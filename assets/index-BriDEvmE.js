function hv(o,a){for(var r=0;r<a.length;r++){const l=a[r];if(typeof l!="string"&&!Array.isArray(l)){for(const u in l)if(u!=="default"&&!(u in o)){const d=Object.getOwnPropertyDescriptor(l,u);d&&Object.defineProperty(o,u,d.get?d:{enumerable:!0,get:()=>l[u]})}}}return Object.freeze(Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}))}(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))l(u);new MutationObserver(u=>{for(const d of u)if(d.type==="childList")for(const f of d.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&l(f)}).observe(document,{childList:!0,subtree:!0});function r(u){const d={};return u.integrity&&(d.integrity=u.integrity),u.referrerPolicy&&(d.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?d.credentials="include":u.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function l(u){if(u.ep)return;u.ep=!0;const d=r(u);fetch(u.href,d)}})();function ap(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}function fv(o){if(Object.prototype.hasOwnProperty.call(o,"__esModule"))return o;var a=o.default;if(typeof a=="function"){var r=function l(){var u=!1;try{u=this instanceof l}catch{}return u?Reflect.construct(a,arguments,this.constructor):a.apply(this,arguments)};r.prototype=a.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(o).forEach(function(l){var u=Object.getOwnPropertyDescriptor(o,l);Object.defineProperty(r,l,u.get?u:{enumerable:!0,get:function(){return o[l]}})}),r}var Hc={exports:{}},Ir={};var yg;function gv(){if(yg)return Ir;yg=1;var o=Symbol.for("react.transitional.element"),a=Symbol.for("react.fragment");function r(l,u,d){var f=null;if(d!==void 0&&(f=""+d),u.key!==void 0&&(f=""+u.key),"key"in u){d={};for(var g in u)g!=="key"&&(d[g]=u[g])}else d=u;return u=d.ref,{$$typeof:o,type:l,key:f,ref:u!==void 0?u:null,props:d}}return Ir.Fragment=a,Ir.jsx=r,Ir.jsxs=r,Ir}var vg;function pv(){return vg||(vg=1,Hc.exports=gv()),Hc.exports}var s=pv(),Ic={exports:{}},Vr={},Vc={exports:{}},$c={};var bg;function mv(){return bg||(bg=1,(function(o){function a(D,L){var Z=D.length;D.push(L);e:for(;0<Z;){var ne=Z-1>>>1,ue=D[ne];if(0<u(ue,L))D[ne]=L,D[Z]=ue,Z=ne;else break e}}function r(D){return D.length===0?null:D[0]}function l(D){if(D.length===0)return null;var L=D[0],Z=D.pop();if(Z!==L){D[0]=Z;e:for(var ne=0,ue=D.length,E=ue>>>1;ne<E;){var U=2*(ne+1)-1,G=D[U],Y=U+1,ae=D[Y];if(0>u(G,Z))Y<ue&&0>u(ae,G)?(D[ne]=ae,D[Y]=Z,ne=Y):(D[ne]=G,D[U]=Z,ne=U);else if(Y<ue&&0>u(ae,Z))D[ne]=ae,D[Y]=Z,ne=Y;else break e}}return L}function u(D,L){var Z=D.sortIndex-L.sortIndex;return Z!==0?Z:D.id-L.id}if(o.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;o.unstable_now=function(){return d.now()}}else{var f=Date,g=f.now();o.unstable_now=function(){return f.now()-g}}var p=[],m=[],b=1,x=null,S=3,_=!1,w=!1,A=!1,R=!1,T=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;function J(D){for(var L=r(m);L!==null;){if(L.callback===null)l(m);else if(L.startTime<=D)l(m),L.sortIndex=L.expirationTime,a(p,L);else break;L=r(m)}}function C(D){if(A=!1,J(D),!w)if(r(p)!==null)w=!0,z||(z=!0,te());else{var L=r(m);L!==null&&pe(C,L.startTime-D)}}var z=!1,k=-1,V=5,le=-1;function he(){return R?!0:!(o.unstable_now()-le<V)}function oe(){if(R=!1,z){var D=o.unstable_now();le=D;var L=!0;try{e:{w=!1,A&&(A=!1,I(k),k=-1),_=!0;var Z=S;try{t:{for(J(D),x=r(p);x!==null&&!(x.expirationTime>D&&he());){var ne=x.callback;if(typeof ne=="function"){x.callback=null,S=x.priorityLevel;var ue=ne(x.expirationTime<=D);if(D=o.unstable_now(),typeof ue=="function"){x.callback=ue,J(D),L=!0;break t}x===r(p)&&l(p),J(D)}else l(p);x=r(p)}if(x!==null)L=!0;else{var E=r(m);E!==null&&pe(C,E.startTime-D),L=!1}}break e}finally{x=null,S=Z,_=!1}L=void 0}}finally{L?te():z=!1}}}var te;if(typeof M=="function")te=function(){M(oe)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,ie=H.port2;H.port1.onmessage=oe,te=function(){ie.postMessage(null)}}else te=function(){T(oe,0)};function pe(D,L){k=T(function(){D(o.unstable_now())},L)}o.unstable_IdlePriority=5,o.unstable_ImmediatePriority=1,o.unstable_LowPriority=4,o.unstable_NormalPriority=3,o.unstable_Profiling=null,o.unstable_UserBlockingPriority=2,o.unstable_cancelCallback=function(D){D.callback=null},o.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<D?Math.floor(1e3/D):5},o.unstable_getCurrentPriorityLevel=function(){return S},o.unstable_next=function(D){switch(S){case 1:case 2:case 3:var L=3;break;default:L=S}var Z=S;S=L;try{return D()}finally{S=Z}},o.unstable_requestPaint=function(){R=!0},o.unstable_runWithPriority=function(D,L){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var Z=S;S=D;try{return L()}finally{S=Z}},o.unstable_scheduleCallback=function(D,L,Z){var ne=o.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?ne+Z:ne):Z=ne,D){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=Z+ue,D={id:b++,callback:L,priorityLevel:D,startTime:Z,expirationTime:ue,sortIndex:-1},Z>ne?(D.sortIndex=Z,a(m,D),r(p)===null&&D===r(m)&&(A?(I(k),k=-1):A=!0,pe(C,Z-ne))):(D.sortIndex=ue,a(p,D),w||_||(w=!0,z||(z=!0,te()))),D},o.unstable_shouldYield=he,o.unstable_wrapCallback=function(D){var L=S;return function(){var Z=S;S=L;try{return D.apply(this,arguments)}finally{S=Z}}}})($c)),$c}var _g;function yv(){return _g||(_g=1,Vc.exports=mv()),Vc.exports}var Gc={exports:{}},Ce={};var xg;function vv(){if(xg)return Ce;xg=1;var o=Symbol.for("react.transitional.element"),a=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),f=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),S=Symbol.iterator;function _(E){return E===null||typeof E!="object"?null:(E=S&&E[S]||E["@@iterator"],typeof E=="function"?E:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,R={};function T(E,U,G){this.props=E,this.context=U,this.refs=R,this.updater=G||w}T.prototype.isReactComponent={},T.prototype.setState=function(E,U){if(typeof E!="object"&&typeof E!="function"&&E!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,E,U,"setState")},T.prototype.forceUpdate=function(E){this.updater.enqueueForceUpdate(this,E,"forceUpdate")};function I(){}I.prototype=T.prototype;function M(E,U,G){this.props=E,this.context=U,this.refs=R,this.updater=G||w}var J=M.prototype=new I;J.constructor=M,A(J,T.prototype),J.isPureReactComponent=!0;var C=Array.isArray;function z(){}var k={H:null,A:null,T:null,S:null},V=Object.prototype.hasOwnProperty;function le(E,U,G){var Y=G.ref;return{$$typeof:o,type:E,key:U,ref:Y!==void 0?Y:null,props:G}}function he(E,U){return le(E.type,U,E.props)}function oe(E){return typeof E=="object"&&E!==null&&E.$$typeof===o}function te(E){var U={"=":"=0",":":"=2"};return"$"+E.replace(/[=:]/g,function(G){return U[G]})}var H=/\/+/g;function ie(E,U){return typeof E=="object"&&E!==null&&E.key!=null?te(""+E.key):U.toString(36)}function pe(E){switch(E.status){case"fulfilled":return E.value;case"rejected":throw E.reason;default:switch(typeof E.status=="string"?E.then(z,z):(E.status="pending",E.then(function(U){E.status==="pending"&&(E.status="fulfilled",E.value=U)},function(U){E.status==="pending"&&(E.status="rejected",E.reason=U)})),E.status){case"fulfilled":return E.value;case"rejected":throw E.reason}}throw E}function D(E,U,G,Y,ae){var ee=typeof E;(ee==="undefined"||ee==="boolean")&&(E=null);var de=!1;if(E===null)de=!0;else switch(ee){case"bigint":case"string":case"number":de=!0;break;case"object":switch(E.$$typeof){case o:case a:de=!0;break;case b:return de=E._init,D(de(E._payload),U,G,Y,ae)}}if(de)return ae=ae(E),de=Y===""?"."+ie(E,0):Y,C(ae)?(G="",de!=null&&(G=de.replace(H,"$&/")+"/"),D(ae,U,G,"",function(Ee){return Ee})):ae!=null&&(oe(ae)&&(ae=he(ae,G+(ae.key==null||E&&E.key===ae.key?"":(""+ae.key).replace(H,"$&/")+"/")+de)),U.push(ae)),1;de=0;var se=Y===""?".":Y+":";if(C(E))for(var fe=0;fe<E.length;fe++)Y=E[fe],ee=se+ie(Y,fe),de+=D(Y,U,G,ee,ae);else if(fe=_(E),typeof fe=="function")for(E=fe.call(E),fe=0;!(Y=E.next()).done;)Y=Y.value,ee=se+ie(Y,fe++),de+=D(Y,U,G,ee,ae);else if(ee==="object"){if(typeof E.then=="function")return D(pe(E),U,G,Y,ae);throw U=String(E),Error("Objects are not valid as a React child (found: "+(U==="[object Object]"?"object with keys {"+Object.keys(E).join(", ")+"}":U)+"). If you meant to render a collection of children, use an array instead.")}return de}function L(E,U,G){if(E==null)return E;var Y=[],ae=0;return D(E,Y,"","",function(ee){return U.call(G,ee,ae++)}),Y}function Z(E){if(E._status===-1){var U=E._result;U=U(),U.then(function(G){(E._status===0||E._status===-1)&&(E._status=1,E._result=G)},function(G){(E._status===0||E._status===-1)&&(E._status=2,E._result=G)}),E._status===-1&&(E._status=0,E._result=U)}if(E._status===1)return E._result.default;throw E._result}var ne=typeof reportError=="function"?reportError:function(E){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var U=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof E=="object"&&E!==null&&typeof E.message=="string"?String(E.message):String(E),error:E});if(!window.dispatchEvent(U))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",E);return}console.error(E)},ue={map:L,forEach:function(E,U,G){L(E,function(){U.apply(this,arguments)},G)},count:function(E){var U=0;return L(E,function(){U++}),U},toArray:function(E){return L(E,function(U){return U})||[]},only:function(E){if(!oe(E))throw Error("React.Children.only expected to receive a single React element child.");return E}};return Ce.Activity=x,Ce.Children=ue,Ce.Component=T,Ce.Fragment=r,Ce.Profiler=u,Ce.PureComponent=M,Ce.StrictMode=l,Ce.Suspense=p,Ce.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,Ce.__COMPILER_RUNTIME={__proto__:null,c:function(E){return k.H.useMemoCache(E)}},Ce.cache=function(E){return function(){return E.apply(null,arguments)}},Ce.cacheSignal=function(){return null},Ce.cloneElement=function(E,U,G){if(E==null)throw Error("The argument must be a React element, but you passed "+E+".");var Y=A({},E.props),ae=E.key;if(U!=null)for(ee in U.key!==void 0&&(ae=""+U.key),U)!V.call(U,ee)||ee==="key"||ee==="__self"||ee==="__source"||ee==="ref"&&U.ref===void 0||(Y[ee]=U[ee]);var ee=arguments.length-2;if(ee===1)Y.children=G;else if(1<ee){for(var de=Array(ee),se=0;se<ee;se++)de[se]=arguments[se+2];Y.children=de}return le(E.type,ae,Y)},Ce.createContext=function(E){return E={$$typeof:f,_currentValue:E,_currentValue2:E,_threadCount:0,Provider:null,Consumer:null},E.Provider=E,E.Consumer={$$typeof:d,_context:E},E},Ce.createElement=function(E,U,G){var Y,ae={},ee=null;if(U!=null)for(Y in U.key!==void 0&&(ee=""+U.key),U)V.call(U,Y)&&Y!=="key"&&Y!=="__self"&&Y!=="__source"&&(ae[Y]=U[Y]);var de=arguments.length-2;if(de===1)ae.children=G;else if(1<de){for(var se=Array(de),fe=0;fe<de;fe++)se[fe]=arguments[fe+2];ae.children=se}if(E&&E.defaultProps)for(Y in de=E.defaultProps,de)ae[Y]===void 0&&(ae[Y]=de[Y]);return le(E,ee,ae)},Ce.createRef=function(){return{current:null}},Ce.forwardRef=function(E){return{$$typeof:g,render:E}},Ce.isValidElement=oe,Ce.lazy=function(E){return{$$typeof:b,_payload:{_status:-1,_result:E},_init:Z}},Ce.memo=function(E,U){return{$$typeof:m,type:E,compare:U===void 0?null:U}},Ce.startTransition=function(E){var U=k.T,G={};k.T=G;try{var Y=E(),ae=k.S;ae!==null&&ae(G,Y),typeof Y=="object"&&Y!==null&&typeof Y.then=="function"&&Y.then(z,ne)}catch(ee){ne(ee)}finally{U!==null&&G.types!==null&&(U.types=G.types),k.T=U}},Ce.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},Ce.use=function(E){return k.H.use(E)},Ce.useActionState=function(E,U,G){return k.H.useActionState(E,U,G)},Ce.useCallback=function(E,U){return k.H.useCallback(E,U)},Ce.useContext=function(E){return k.H.useContext(E)},Ce.useDebugValue=function(){},Ce.useDeferredValue=function(E,U){return k.H.useDeferredValue(E,U)},Ce.useEffect=function(E,U){return k.H.useEffect(E,U)},Ce.useEffectEvent=function(E){return k.H.useEffectEvent(E)},Ce.useId=function(){return k.H.useId()},Ce.useImperativeHandle=function(E,U,G){return k.H.useImperativeHandle(E,U,G)},Ce.useInsertionEffect=function(E,U){return k.H.useInsertionEffect(E,U)},Ce.useLayoutEffect=function(E,U){return k.H.useLayoutEffect(E,U)},Ce.useMemo=function(E,U){return k.H.useMemo(E,U)},Ce.useOptimistic=function(E,U){return k.H.useOptimistic(E,U)},Ce.useReducer=function(E,U,G){return k.H.useReducer(E,U,G)},Ce.useRef=function(E){return k.H.useRef(E)},Ce.useState=function(E){return k.H.useState(E)},Ce.useSyncExternalStore=function(E,U,G){return k.H.useSyncExternalStore(E,U,G)},Ce.useTransition=function(){return k.H.useTransition()},Ce.version="19.2.0",Ce}var jg;function pu(){return jg||(jg=1,Gc.exports=vv()),Gc.exports}var Pc={exports:{}},Rt={};var Sg;function bv(){if(Sg)return Rt;Sg=1;var o=pu();function a(p){var m="https://react.dev/errors/"+p;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)m+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+p+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var l={d:{f:r,r:function(){throw Error(a(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},u=Symbol.for("react.portal");function d(p,m,b){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:x==null?null:""+x,children:p,containerInfo:m,implementation:b}}var f=o.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(p,m){if(p==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return Rt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=l,Rt.createPortal=function(p,m){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(a(299));return d(p,m,null,b)},Rt.flushSync=function(p){var m=f.T,b=l.p;try{if(f.T=null,l.p=2,p)return p()}finally{f.T=m,l.p=b,l.d.f()}},Rt.preconnect=function(p,m){typeof p=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,l.d.C(p,m))},Rt.prefetchDNS=function(p){typeof p=="string"&&l.d.D(p)},Rt.preinit=function(p,m){if(typeof p=="string"&&m&&typeof m.as=="string"){var b=m.as,x=g(b,m.crossOrigin),S=typeof m.integrity=="string"?m.integrity:void 0,_=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;b==="style"?l.d.S(p,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:x,integrity:S,fetchPriority:_}):b==="script"&&l.d.X(p,{crossOrigin:x,integrity:S,fetchPriority:_,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},Rt.preinitModule=function(p,m){if(typeof p=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var b=g(m.as,m.crossOrigin);l.d.M(p,{crossOrigin:b,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&l.d.M(p)},Rt.preload=function(p,m){if(typeof p=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var b=m.as,x=g(b,m.crossOrigin);l.d.L(p,b,{crossOrigin:x,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},Rt.preloadModule=function(p,m){if(typeof p=="string")if(m){var b=g(m.as,m.crossOrigin);l.d.m(p,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:b,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else l.d.m(p)},Rt.requestFormReset=function(p){l.d.r(p)},Rt.unstable_batchedUpdates=function(p,m){return p(m)},Rt.useFormState=function(p,m,b){return f.H.useFormState(p,m,b)},Rt.useFormStatus=function(){return f.H.useHostTransitionStatus()},Rt.version="19.2.0",Rt}var wg;function ip(){if(wg)return Pc.exports;wg=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(a){console.error(a)}}return o(),Pc.exports=bv(),Pc.exports}var Eg;function _v(){if(Eg)return Vr;Eg=1;var o=yv(),a=pu(),r=ip();function l(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function d(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function f(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function g(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function p(e){if(d(e)!==e)throw Error(l(188))}function m(e){var t=e.alternate;if(!t){if(t=d(e),t===null)throw Error(l(188));return t!==e?null:e}for(var n=e,i=t;;){var c=n.return;if(c===null)break;var h=c.alternate;if(h===null){if(i=c.return,i!==null){n=i;continue}break}if(c.child===h.child){for(h=c.child;h;){if(h===n)return p(c),e;if(h===i)return p(c),t;h=h.sibling}throw Error(l(188))}if(n.return!==i.return)n=c,i=h;else{for(var y=!1,v=c.child;v;){if(v===n){y=!0,n=c,i=h;break}if(v===i){y=!0,i=c,n=h;break}v=v.sibling}if(!y){for(v=h.child;v;){if(v===n){y=!0,n=h,i=c;break}if(v===i){y=!0,i=h,n=c;break}v=v.sibling}if(!y)throw Error(l(189))}}if(n.alternate!==i)throw Error(l(190))}if(n.tag!==3)throw Error(l(188));return n.stateNode.current===n?e:t}function b(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=b(e),t!==null)return t;e=e.sibling}return null}var x=Object.assign,S=Symbol.for("react.element"),_=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),I=Symbol.for("react.consumer"),M=Symbol.for("react.context"),J=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),V=Symbol.for("react.lazy"),le=Symbol.for("react.activity"),he=Symbol.for("react.memo_cache_sentinel"),oe=Symbol.iterator;function te(e){return e===null||typeof e!="object"?null:(e=oe&&e[oe]||e["@@iterator"],typeof e=="function"?e:null)}var H=Symbol.for("react.client.reference");function ie(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===H?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case A:return"Fragment";case T:return"Profiler";case R:return"StrictMode";case C:return"Suspense";case z:return"SuspenseList";case le:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case w:return"Portal";case M:return e.displayName||"Context";case I:return(e._context.displayName||"Context")+".Consumer";case J:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case k:return t=e.displayName||null,t!==null?t:ie(e.type)||"Memo";case V:t=e._payload,e=e._init;try{return ie(e(t))}catch{}}return null}var pe=Array.isArray,D=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z={pending:!1,data:null,method:null,action:null},ne=[],ue=-1;function E(e){return{current:e}}function U(e){0>ue||(e.current=ne[ue],ne[ue]=null,ue--)}function G(e,t){ue++,ne[ue]=e.current,e.current=t}var Y=E(null),ae=E(null),ee=E(null),de=E(null);function se(e,t){switch(G(ee,t),G(ae,e),G(Y,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Hf(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Hf(t),e=If(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}U(Y),G(Y,e)}function fe(){U(Y),U(ae),U(ee)}function Ee(e){e.memoizedState!==null&&G(de,e);var t=Y.current,n=If(t,e.type);t!==n&&(G(ae,e),G(Y,n))}function Ne(e){ae.current===e&&(U(Y),U(ae)),de.current===e&&(U(de),Mr._currentValue=Z)}var Te,Ue;function He(e){if(Te===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Te=t&&t[1]||"",Ue=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Te+e+Ue}var _t=!1;function Dt(e,t){if(!e||_t)return"";_t=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(t){var W=function(){throw Error()};if(Object.defineProperty(W.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(W,[])}catch(Q){var K=Q}Reflect.construct(e,[],W)}else{try{W.call()}catch(Q){K=Q}e.call(W.prototype)}}else{try{throw Error()}catch(Q){K=Q}(W=e())&&typeof W.catch=="function"&&W.catch(function(){})}}catch(Q){if(Q&&K&&typeof Q.stack=="string")return[Q.stack,K.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var c=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");c&&c.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var h=i.DetermineComponentFrameRoot(),y=h[0],v=h[1];if(y&&v){var O=y.split(`
`),P=v.split(`
`);for(c=i=0;i<O.length&&!O[i].includes("DetermineComponentFrameRoot");)i++;for(;c<P.length&&!P[c].includes("DetermineComponentFrameRoot");)c++;if(i===O.length||c===P.length)for(i=O.length-1,c=P.length-1;1<=i&&0<=c&&O[i]!==P[c];)c--;for(;1<=i&&0<=c;i--,c--)if(O[i]!==P[c]){if(i!==1||c!==1)do if(i--,c--,0>c||O[i]!==P[c]){var X=`
`+O[i].replace(" at new "," at ");return e.displayName&&X.includes("<anonymous>")&&(X=X.replace("<anonymous>",e.displayName)),X}while(1<=i&&0<=c);break}}}finally{_t=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?He(n):""}function zt(e,t){switch(e.tag){case 26:case 27:case 5:return He(e.type);case 16:return He("Lazy");case 13:return e.child!==t&&t!==null?He("Suspense Fallback"):He("Suspense");case 19:return He("SuspenseList");case 0:case 15:return Dt(e.type,!1);case 11:return Dt(e.type.render,!1);case 1:return Dt(e.type,!0);case 31:return He("Activity");default:return""}}function Wt(e){try{var t="",n=null;do t+=zt(e,n),n=e,e=e.return;while(e);return t}catch(i){return`
Error generating stack: `+i.message+`
`+i.stack}}var mn=Object.prototype.hasOwnProperty,rt=o.unstable_scheduleCallback,at=o.unstable_cancelCallback,wa=o.unstable_shouldYield,El=o.unstable_requestPaint,Ut=o.unstable_now,Qi=o.unstable_getCurrentPriorityLevel,Xi=o.unstable_ImmediatePriority,yn=o.unstable_UserBlockingPriority,en=o.unstable_NormalPriority,Bt=o.unstable_LowPriority,Zi=o.unstable_IdlePriority,Tl=o.log,Cl=o.unstable_setDisableYieldValue,An=null,Ye=null;function tn(e){if(typeof Tl=="function"&&Cl(e),Ye&&typeof Ye.setStrictMode=="function")try{Ye.setStrictMode(An,e)}catch{}}var Ot=Math.clz32?Math.clz32:Ol,Al=Math.log,Xr=Math.LN2;function Ol(e){return e>>>=0,e===0?32:31-(Al(e)/Xr|0)|0}var Jn=256,Za=262144,Fa=4194304;function B(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function re(e,t,n){var i=e.pendingLanes;if(i===0)return 0;var c=0,h=e.suspendedLanes,y=e.pingedLanes;e=e.warmLanes;var v=i&134217727;return v!==0?(i=v&~h,i!==0?c=B(i):(y&=v,y!==0?c=B(y):n||(n=v&~e,n!==0&&(c=B(n))))):(v=i&~h,v!==0?c=B(v):y!==0?c=B(y):n||(n=i&~e,n!==0&&(c=B(n)))),c===0?0:t!==0&&t!==c&&(t&h)===0&&(h=c&-c,n=t&-t,h>=n||h===32&&(n&4194048)!==0)?t:c}function ge(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function _e(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Re(){var e=Fa;return Fa<<=1,(Fa&62914560)===0&&(Fa=4194304),e}function $e(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Je(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function st(e,t,n,i,c,h){var y=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var v=e.entanglements,O=e.expirationTimes,P=e.hiddenUpdates;for(n=y&~n;0<n;){var X=31-Ot(n),W=1<<X;v[X]=0,O[X]=-1;var K=P[X];if(K!==null)for(P[X]=null,X=0;X<K.length;X++){var Q=K[X];Q!==null&&(Q.lane&=-536870913)}n&=~W}i!==0&&ve(e,i,0),h!==0&&c===0&&e.tag!==0&&(e.suspendedLanes|=h&~(y&~t))}function ve(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var i=31-Ot(t);e.entangledLanes|=t,e.entanglements[i]=e.entanglements[i]|1073741824|n&261930}function Ie(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-Ot(n),c=1<<i;c&t|e[i]&t&&(e[i]|=t),n&=~c}}function yt(e,t){var n=t&-t;return n=(n&42)!==0?1:et(n),(n&(e.suspendedLanes|t))!==0?0:n}function et(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ge(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Ea(){var e=L.p;return e!==0?e:(e=window.event,e===void 0?32:ug(e.type))}function Wa(e,t){var n=L.p;try{return L.p=e,t()}finally{L.p=n}}var Qn=Math.random().toString(36).slice(2),St="__reactFiber$"+Qn,Mt="__reactProps$"+Qn,ei="__reactContainer$"+Qn,Rl="__reactEvents$"+Qn,tm="__reactListeners$"+Qn,nm="__reactHandles$"+Qn,Tu="__reactResources$"+Qn,Fi="__reactMarker$"+Qn;function Nl(e){delete e[St],delete e[Mt],delete e[Rl],delete e[tm],delete e[nm]}function ti(e){var t=e[St];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ei]||n[St]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Jf(e);e!==null;){if(n=e[St])return n;e=Jf(e)}return t}e=n,n=e.parentNode}return null}function ni(e){if(e=e[St]||e[ei]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Wi(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(l(33))}function ai(e){var t=e[Tu];return t||(t=e[Tu]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function xt(e){e[Fi]=!0}var Cu=new Set,Au={};function Ta(e,t){ii(e,t),ii(e+"Capture",t)}function ii(e,t){for(Au[e]=t,e=0;e<t.length;e++)Cu.add(t[e])}var am=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ou={},Ru={};function im(e){return mn.call(Ru,e)?!0:mn.call(Ou,e)?!1:am.test(e)?Ru[e]=!0:(Ou[e]=!0,!1)}function Zr(e,t,n){if(im(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var i=t.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function Fr(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function On(e,t,n,i){if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+i)}}function nn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Nu(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function rm(e,t,n){var i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var c=i.get,h=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(y){n=""+y,h.call(this,y)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return n},setValue:function(y){n=""+y},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ul(e){if(!e._valueTracker){var t=Nu(e)?"checked":"value";e._valueTracker=rm(e,t,""+e[t])}}function Uu(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=Nu(e)?e.checked?"true":"false":e.value),e=i,e!==n?(t.setValue(e),!0):!1}function Wr(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var sm=/[\n"\\]/g;function an(e){return e.replace(sm,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function kl(e,t,n,i,c,h,y,v){e.name="",y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"?e.type=y:e.removeAttribute("type"),t!=null?y==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+nn(t)):e.value!==""+nn(t)&&(e.value=""+nn(t)):y!=="submit"&&y!=="reset"||e.removeAttribute("value"),t!=null?Dl(e,y,nn(t)):n!=null?Dl(e,y,nn(n)):i!=null&&e.removeAttribute("value"),c==null&&h!=null&&(e.defaultChecked=!!h),c!=null&&(e.checked=c&&typeof c!="function"&&typeof c!="symbol"),v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.name=""+nn(v):e.removeAttribute("name")}function ku(e,t,n,i,c,h,y,v){if(h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"&&(e.type=h),t!=null||n!=null){if(!(h!=="submit"&&h!=="reset"||t!=null)){Ul(e);return}n=n!=null?""+nn(n):"",t=t!=null?""+nn(t):n,v||t===e.value||(e.value=t),e.defaultValue=t}i=i??c,i=typeof i!="function"&&typeof i!="symbol"&&!!i,e.checked=v?e.checked:!!i,e.defaultChecked=!!i,y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(e.name=y),Ul(e)}function Dl(e,t,n){t==="number"&&Wr(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function ri(e,t,n,i){if(e=e.options,t){t={};for(var c=0;c<n.length;c++)t["$"+n[c]]=!0;for(n=0;n<e.length;n++)c=t.hasOwnProperty("$"+e[n].value),e[n].selected!==c&&(e[n].selected=c),c&&i&&(e[n].defaultSelected=!0)}else{for(n=""+nn(n),t=null,c=0;c<e.length;c++){if(e[c].value===n){e[c].selected=!0,i&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function Du(e,t,n){if(t!=null&&(t=""+nn(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+nn(n):""}function zu(e,t,n,i){if(t==null){if(i!=null){if(n!=null)throw Error(l(92));if(pe(i)){if(1<i.length)throw Error(l(93));i=i[0]}n=i}n==null&&(n=""),t=n}n=nn(t),e.defaultValue=n,i=e.textContent,i===n&&i!==""&&i!==null&&(e.value=i),Ul(e)}function si(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var lm=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Bu(e,t,n){var i=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?i?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":i?e.setProperty(t,n):typeof n!="number"||n===0||lm.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Mu(e,t,n){if(t!=null&&typeof t!="object")throw Error(l(62));if(e=e.style,n!=null){for(var i in n)!n.hasOwnProperty(i)||t!=null&&t.hasOwnProperty(i)||(i.indexOf("--")===0?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="");for(var c in t)i=t[c],t.hasOwnProperty(c)&&n[c]!==i&&Bu(e,c,i)}else for(var h in t)t.hasOwnProperty(h)&&Bu(e,h,t[h])}function zl(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var om=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),cm=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function es(e){return cm.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Rn(){}var Bl=null;function Ml(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var li=null,oi=null;function Lu(e){var t=ni(e);if(t&&(e=t.stateNode)){var n=e[Mt]||null;e:switch(e=t.stateNode,t.type){case"input":if(kl(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+an(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var c=i[Mt]||null;if(!c)throw Error(l(90));kl(i,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name)}}for(t=0;t<n.length;t++)i=n[t],i.form===e.form&&Uu(i)}break e;case"textarea":Du(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&ri(e,!!n.multiple,t,!1)}}}var Ll=!1;function qu(e,t,n){if(Ll)return e(t,n);Ll=!0;try{var i=e(t);return i}finally{if(Ll=!1,(li!==null||oi!==null)&&(Is(),li&&(t=li,e=oi,oi=li=null,Lu(t),e)))for(t=0;t<e.length;t++)Lu(e[t])}}function er(e,t){var n=e.stateNode;if(n===null)return null;var i=n[Mt]||null;if(i===null)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(l(231,t,typeof n));return n}var Nn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ql=!1;if(Nn)try{var tr={};Object.defineProperty(tr,"passive",{get:function(){ql=!0}}),window.addEventListener("test",tr,tr),window.removeEventListener("test",tr,tr)}catch{ql=!1}var Xn=null,Hl=null,ts=null;function Hu(){if(ts)return ts;var e,t=Hl,n=t.length,i,c="value"in Xn?Xn.value:Xn.textContent,h=c.length;for(e=0;e<n&&t[e]===c[e];e++);var y=n-e;for(i=1;i<=y&&t[n-i]===c[h-i];i++);return ts=c.slice(e,1<i?1-i:void 0)}function ns(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function as(){return!0}function Iu(){return!1}function Lt(e){function t(n,i,c,h,y){this._reactName=n,this._targetInst=c,this.type=i,this.nativeEvent=h,this.target=y,this.currentTarget=null;for(var v in e)e.hasOwnProperty(v)&&(n=e[v],this[v]=n?n(h):h[v]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?as:Iu,this.isPropagationStopped=Iu,this}return x(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=as)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=as)},persist:function(){},isPersistent:as}),t}var Ca={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},is=Lt(Ca),nr=x({},Ca,{view:0,detail:0}),um=Lt(nr),Il,Vl,ar,rs=x({},nr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gl,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ar&&(ar&&e.type==="mousemove"?(Il=e.screenX-ar.screenX,Vl=e.screenY-ar.screenY):Vl=Il=0,ar=e),Il)},movementY:function(e){return"movementY"in e?e.movementY:Vl}}),Vu=Lt(rs),dm=x({},rs,{dataTransfer:0}),hm=Lt(dm),fm=x({},nr,{relatedTarget:0}),$l=Lt(fm),gm=x({},Ca,{animationName:0,elapsedTime:0,pseudoElement:0}),pm=Lt(gm),mm=x({},Ca,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ym=Lt(mm),vm=x({},Ca,{data:0}),$u=Lt(vm),bm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_m={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jm(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=xm[e])?!!t[e]:!1}function Gl(){return jm}var Sm=x({},nr,{key:function(e){if(e.key){var t=bm[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ns(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?_m[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gl,charCode:function(e){return e.type==="keypress"?ns(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ns(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),wm=Lt(Sm),Em=x({},rs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Gu=Lt(Em),Tm=x({},nr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gl}),Cm=Lt(Tm),Am=x({},Ca,{propertyName:0,elapsedTime:0,pseudoElement:0}),Om=Lt(Am),Rm=x({},rs,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Nm=Lt(Rm),Um=x({},Ca,{newState:0,oldState:0}),km=Lt(Um),Dm=[9,13,27,32],Pl=Nn&&"CompositionEvent"in window,ir=null;Nn&&"documentMode"in document&&(ir=document.documentMode);var zm=Nn&&"TextEvent"in window&&!ir,Pu=Nn&&(!Pl||ir&&8<ir&&11>=ir),Ku=" ",Yu=!1;function Ju(e,t){switch(e){case"keyup":return Dm.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Qu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ci=!1;function Bm(e,t){switch(e){case"compositionend":return Qu(t);case"keypress":return t.which!==32?null:(Yu=!0,Ku);case"textInput":return e=t.data,e===Ku&&Yu?null:e;default:return null}}function Mm(e,t){if(ci)return e==="compositionend"||!Pl&&Ju(e,t)?(e=Hu(),ts=Hl=Xn=null,ci=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Pu&&t.locale!=="ko"?null:t.data;default:return null}}var Lm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Lm[e.type]:t==="textarea"}function Zu(e,t,n,i){li?oi?oi.push(i):oi=[i]:li=i,t=Js(t,"onChange"),0<t.length&&(n=new is("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var rr=null,sr=null;function qm(e){Df(e,0)}function ss(e){var t=Wi(e);if(Uu(t))return e}function Fu(e,t){if(e==="change")return t}var Wu=!1;if(Nn){var Kl;if(Nn){var Yl="oninput"in document;if(!Yl){var ed=document.createElement("div");ed.setAttribute("oninput","return;"),Yl=typeof ed.oninput=="function"}Kl=Yl}else Kl=!1;Wu=Kl&&(!document.documentMode||9<document.documentMode)}function td(){rr&&(rr.detachEvent("onpropertychange",nd),sr=rr=null)}function nd(e){if(e.propertyName==="value"&&ss(sr)){var t=[];Zu(t,sr,e,Ml(e)),qu(qm,t)}}function Hm(e,t,n){e==="focusin"?(td(),rr=t,sr=n,rr.attachEvent("onpropertychange",nd)):e==="focusout"&&td()}function Im(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ss(sr)}function Vm(e,t){if(e==="click")return ss(t)}function $m(e,t){if(e==="input"||e==="change")return ss(t)}function Gm(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Gt=typeof Object.is=="function"?Object.is:Gm;function lr(e,t){if(Gt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var c=n[i];if(!mn.call(t,c)||!Gt(e[c],t[c]))return!1}return!0}function ad(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function id(e,t){var n=ad(e);e=0;for(var i;n;){if(n.nodeType===3){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ad(n)}}function rd(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?rd(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function sd(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Wr(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Wr(e.document)}return t}function Jl(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Pm=Nn&&"documentMode"in document&&11>=document.documentMode,ui=null,Ql=null,or=null,Xl=!1;function ld(e,t,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Xl||ui==null||ui!==Wr(i)||(i=ui,"selectionStart"in i&&Jl(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),or&&lr(or,i)||(or=i,i=Js(Ql,"onSelect"),0<i.length&&(t=new is("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=ui)))}function Aa(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var di={animationend:Aa("Animation","AnimationEnd"),animationiteration:Aa("Animation","AnimationIteration"),animationstart:Aa("Animation","AnimationStart"),transitionrun:Aa("Transition","TransitionRun"),transitionstart:Aa("Transition","TransitionStart"),transitioncancel:Aa("Transition","TransitionCancel"),transitionend:Aa("Transition","TransitionEnd")},Zl={},od={};Nn&&(od=document.createElement("div").style,"AnimationEvent"in window||(delete di.animationend.animation,delete di.animationiteration.animation,delete di.animationstart.animation),"TransitionEvent"in window||delete di.transitionend.transition);function Oa(e){if(Zl[e])return Zl[e];if(!di[e])return e;var t=di[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in od)return Zl[e]=t[n];return e}var cd=Oa("animationend"),ud=Oa("animationiteration"),dd=Oa("animationstart"),Km=Oa("transitionrun"),Ym=Oa("transitionstart"),Jm=Oa("transitioncancel"),hd=Oa("transitionend"),fd=new Map,Fl="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Fl.push("scrollEnd");function vn(e,t){fd.set(e,t),Ta(t,[e])}var ls=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},rn=[],hi=0,Wl=0;function os(){for(var e=hi,t=Wl=hi=0;t<e;){var n=rn[t];rn[t++]=null;var i=rn[t];rn[t++]=null;var c=rn[t];rn[t++]=null;var h=rn[t];if(rn[t++]=null,i!==null&&c!==null){var y=i.pending;y===null?c.next=c:(c.next=y.next,y.next=c),i.pending=c}h!==0&&gd(n,c,h)}}function cs(e,t,n,i){rn[hi++]=e,rn[hi++]=t,rn[hi++]=n,rn[hi++]=i,Wl|=i,e.lanes|=i,e=e.alternate,e!==null&&(e.lanes|=i)}function eo(e,t,n,i){return cs(e,t,n,i),us(e)}function Ra(e,t){return cs(e,null,null,t),us(e)}function gd(e,t,n){e.lanes|=n;var i=e.alternate;i!==null&&(i.lanes|=n);for(var c=!1,h=e.return;h!==null;)h.childLanes|=n,i=h.alternate,i!==null&&(i.childLanes|=n),h.tag===22&&(e=h.stateNode,e===null||e._visibility&1||(c=!0)),e=h,h=h.return;return e.tag===3?(h=e.stateNode,c&&t!==null&&(c=31-Ot(n),e=h.hiddenUpdates,i=e[c],i===null?e[c]=[t]:i.push(t),t.lane=n|536870912),h):null}function us(e){if(50<Rr)throw Rr=0,uc=null,Error(l(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var fi={};function Qm(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pt(e,t,n,i){return new Qm(e,t,n,i)}function to(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Un(e,t){var n=e.alternate;return n===null?(n=Pt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function pd(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function ds(e,t,n,i,c,h){var y=0;if(i=e,typeof e=="function")to(e)&&(y=1);else if(typeof e=="string")y=ev(e,n,Y.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case le:return e=Pt(31,n,t,c),e.elementType=le,e.lanes=h,e;case A:return Na(n.children,c,h,t);case R:y=8,c|=24;break;case T:return e=Pt(12,n,t,c|2),e.elementType=T,e.lanes=h,e;case C:return e=Pt(13,n,t,c),e.elementType=C,e.lanes=h,e;case z:return e=Pt(19,n,t,c),e.elementType=z,e.lanes=h,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case M:y=10;break e;case I:y=9;break e;case J:y=11;break e;case k:y=14;break e;case V:y=16,i=null;break e}y=29,n=Error(l(130,e===null?"null":typeof e,"")),i=null}return t=Pt(y,n,t,c),t.elementType=e,t.type=i,t.lanes=h,t}function Na(e,t,n,i){return e=Pt(7,e,i,t),e.lanes=n,e}function no(e,t,n){return e=Pt(6,e,null,t),e.lanes=n,e}function md(e){var t=Pt(18,null,null,0);return t.stateNode=e,t}function ao(e,t,n){return t=Pt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var yd=new WeakMap;function sn(e,t){if(typeof e=="object"&&e!==null){var n=yd.get(e);return n!==void 0?n:(t={value:e,source:t,stack:Wt(t)},yd.set(e,t),t)}return{value:e,source:t,stack:Wt(t)}}var gi=[],pi=0,hs=null,cr=0,ln=[],on=0,Zn=null,wn=1,En="";function kn(e,t){gi[pi++]=cr,gi[pi++]=hs,hs=e,cr=t}function vd(e,t,n){ln[on++]=wn,ln[on++]=En,ln[on++]=Zn,Zn=e;var i=wn;e=En;var c=32-Ot(i)-1;i&=~(1<<c),n+=1;var h=32-Ot(t)+c;if(30<h){var y=c-c%5;h=(i&(1<<y)-1).toString(32),i>>=y,c-=y,wn=1<<32-Ot(t)+c|n<<c|i,En=h+e}else wn=1<<h|n<<c|i,En=e}function io(e){e.return!==null&&(kn(e,1),vd(e,1,0))}function ro(e){for(;e===hs;)hs=gi[--pi],gi[pi]=null,cr=gi[--pi],gi[pi]=null;for(;e===Zn;)Zn=ln[--on],ln[on]=null,En=ln[--on],ln[on]=null,wn=ln[--on],ln[on]=null}function bd(e,t){ln[on++]=wn,ln[on++]=En,ln[on++]=Zn,wn=t.id,En=t.overflow,Zn=e}var wt=null,tt=null,Me=!1,Fn=null,cn=!1,so=Error(l(519));function Wn(e){var t=Error(l(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ur(sn(t,e)),so}function _d(e){var t=e.stateNode,n=e.type,i=e.memoizedProps;switch(t[St]=e,t[Mt]=i,n){case"dialog":De("cancel",t),De("close",t);break;case"iframe":case"object":case"embed":De("load",t);break;case"video":case"audio":for(n=0;n<Ur.length;n++)De(Ur[n],t);break;case"source":De("error",t);break;case"img":case"image":case"link":De("error",t),De("load",t);break;case"details":De("toggle",t);break;case"input":De("invalid",t),ku(t,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0);break;case"select":De("invalid",t);break;case"textarea":De("invalid",t),zu(t,i.value,i.defaultValue,i.children)}n=i.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||i.suppressHydrationWarning===!0||Lf(t.textContent,n)?(i.popover!=null&&(De("beforetoggle",t),De("toggle",t)),i.onScroll!=null&&De("scroll",t),i.onScrollEnd!=null&&De("scrollend",t),i.onClick!=null&&(t.onclick=Rn),t=!0):t=!1,t||Wn(e,!0)}function xd(e){for(wt=e.return;wt;)switch(wt.tag){case 5:case 31:case 13:cn=!1;return;case 27:case 3:cn=!0;return;default:wt=wt.return}}function mi(e){if(e!==wt)return!1;if(!Me)return xd(e),Me=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||Ec(e.type,e.memoizedProps)),n=!n),n&&tt&&Wn(e),xd(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(317));tt=Yf(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(317));tt=Yf(e)}else t===27?(t=tt,fa(e.type)?(e=Rc,Rc=null,tt=e):tt=t):tt=wt?dn(e.stateNode.nextSibling):null;return!0}function Ua(){tt=wt=null,Me=!1}function lo(){var e=Fn;return e!==null&&(Vt===null?Vt=e:Vt.push.apply(Vt,e),Fn=null),e}function ur(e){Fn===null?Fn=[e]:Fn.push(e)}var oo=E(null),ka=null,Dn=null;function ea(e,t,n){G(oo,t._currentValue),t._currentValue=n}function zn(e){e._currentValue=oo.current,U(oo)}function co(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function uo(e,t,n,i){var c=e.child;for(c!==null&&(c.return=e);c!==null;){var h=c.dependencies;if(h!==null){var y=c.child;h=h.firstContext;e:for(;h!==null;){var v=h;h=c;for(var O=0;O<t.length;O++)if(v.context===t[O]){h.lanes|=n,v=h.alternate,v!==null&&(v.lanes|=n),co(h.return,n,e),i||(y=null);break e}h=v.next}}else if(c.tag===18){if(y=c.return,y===null)throw Error(l(341));y.lanes|=n,h=y.alternate,h!==null&&(h.lanes|=n),co(y,n,e),y=null}else y=c.child;if(y!==null)y.return=c;else for(y=c;y!==null;){if(y===e){y=null;break}if(c=y.sibling,c!==null){c.return=y.return,y=c;break}y=y.return}c=y}}function yi(e,t,n,i){e=null;for(var c=t,h=!1;c!==null;){if(!h){if((c.flags&524288)!==0)h=!0;else if((c.flags&262144)!==0)break}if(c.tag===10){var y=c.alternate;if(y===null)throw Error(l(387));if(y=y.memoizedProps,y!==null){var v=c.type;Gt(c.pendingProps.value,y.value)||(e!==null?e.push(v):e=[v])}}else if(c===de.current){if(y=c.alternate,y===null)throw Error(l(387));y.memoizedState.memoizedState!==c.memoizedState.memoizedState&&(e!==null?e.push(Mr):e=[Mr])}c=c.return}e!==null&&uo(t,e,n,i),t.flags|=262144}function fs(e){for(e=e.firstContext;e!==null;){if(!Gt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Da(e){ka=e,Dn=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Et(e){return jd(ka,e)}function gs(e,t){return ka===null&&Da(e),jd(e,t)}function jd(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},Dn===null){if(e===null)throw Error(l(308));Dn=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Dn=Dn.next=t;return n}var Xm=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,i){e.push(i)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},Zm=o.unstable_scheduleCallback,Fm=o.unstable_NormalPriority,ht={$$typeof:M,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ho(){return{controller:new Xm,data:new Map,refCount:0}}function dr(e){e.refCount--,e.refCount===0&&Zm(Fm,function(){e.controller.abort()})}var hr=null,fo=0,vi=0,bi=null;function Wm(e,t){if(hr===null){var n=hr=[];fo=0,vi=mc(),bi={status:"pending",value:void 0,then:function(i){n.push(i)}}}return fo++,t.then(Sd,Sd),t}function Sd(){if(--fo===0&&hr!==null){bi!==null&&(bi.status="fulfilled");var e=hr;hr=null,vi=0,bi=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function ey(e,t){var n=[],i={status:"pending",value:null,reason:null,then:function(c){n.push(c)}};return e.then(function(){i.status="fulfilled",i.value=t;for(var c=0;c<n.length;c++)(0,n[c])(t)},function(c){for(i.status="rejected",i.reason=c,c=0;c<n.length;c++)(0,n[c])(void 0)}),i}var wd=D.S;D.S=function(e,t){of=Ut(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&Wm(e,t),wd!==null&&wd(e,t)};var za=E(null);function go(){var e=za.current;return e!==null?e:Fe.pooledCache}function ps(e,t){t===null?G(za,za.current):G(za,t.pool)}function Ed(){var e=go();return e===null?null:{parent:ht._currentValue,pool:e}}var _i=Error(l(460)),po=Error(l(474)),ms=Error(l(542)),ys={then:function(){}};function Td(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Cd(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(Rn,Rn),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Od(e),e;default:if(typeof t.status=="string")t.then(Rn,Rn);else{if(e=Fe,e!==null&&100<e.shellSuspendCounter)throw Error(l(482));e=t,e.status="pending",e.then(function(i){if(t.status==="pending"){var c=t;c.status="fulfilled",c.value=i}},function(i){if(t.status==="pending"){var c=t;c.status="rejected",c.reason=i}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Od(e),e}throw Ma=t,_i}}function Ba(e){try{var t=e._init;return t(e._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(Ma=n,_i):n}}var Ma=null;function Ad(){if(Ma===null)throw Error(l(459));var e=Ma;return Ma=null,e}function Od(e){if(e===_i||e===ms)throw Error(l(483))}var xi=null,fr=0;function vs(e){var t=fr;return fr+=1,xi===null&&(xi=[]),Cd(xi,e,t)}function gr(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function bs(e,t){throw t.$$typeof===S?Error(l(525)):(e=Object.prototype.toString.call(t),Error(l(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Rd(e){function t(q,N){if(e){var $=q.deletions;$===null?(q.deletions=[N],q.flags|=16):$.push(N)}}function n(q,N){if(!e)return null;for(;N!==null;)t(q,N),N=N.sibling;return null}function i(q){for(var N=new Map;q!==null;)q.key!==null?N.set(q.key,q):N.set(q.index,q),q=q.sibling;return N}function c(q,N){return q=Un(q,N),q.index=0,q.sibling=null,q}function h(q,N,$){return q.index=$,e?($=q.alternate,$!==null?($=$.index,$<N?(q.flags|=67108866,N):$):(q.flags|=67108866,N)):(q.flags|=1048576,N)}function y(q){return e&&q.alternate===null&&(q.flags|=67108866),q}function v(q,N,$,F){return N===null||N.tag!==6?(N=no($,q.mode,F),N.return=q,N):(N=c(N,$),N.return=q,N)}function O(q,N,$,F){var je=$.type;return je===A?X(q,N,$.props.children,F,$.key):N!==null&&(N.elementType===je||typeof je=="object"&&je!==null&&je.$$typeof===V&&Ba(je)===N.type)?(N=c(N,$.props),gr(N,$),N.return=q,N):(N=ds($.type,$.key,$.props,null,q.mode,F),gr(N,$),N.return=q,N)}function P(q,N,$,F){return N===null||N.tag!==4||N.stateNode.containerInfo!==$.containerInfo||N.stateNode.implementation!==$.implementation?(N=ao($,q.mode,F),N.return=q,N):(N=c(N,$.children||[]),N.return=q,N)}function X(q,N,$,F,je){return N===null||N.tag!==7?(N=Na($,q.mode,F,je),N.return=q,N):(N=c(N,$),N.return=q,N)}function W(q,N,$){if(typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint")return N=no(""+N,q.mode,$),N.return=q,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case _:return $=ds(N.type,N.key,N.props,null,q.mode,$),gr($,N),$.return=q,$;case w:return N=ao(N,q.mode,$),N.return=q,N;case V:return N=Ba(N),W(q,N,$)}if(pe(N)||te(N))return N=Na(N,q.mode,$,null),N.return=q,N;if(typeof N.then=="function")return W(q,vs(N),$);if(N.$$typeof===M)return W(q,gs(q,N),$);bs(q,N)}return null}function K(q,N,$,F){var je=N!==null?N.key:null;if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return je!==null?null:v(q,N,""+$,F);if(typeof $=="object"&&$!==null){switch($.$$typeof){case _:return $.key===je?O(q,N,$,F):null;case w:return $.key===je?P(q,N,$,F):null;case V:return $=Ba($),K(q,N,$,F)}if(pe($)||te($))return je!==null?null:X(q,N,$,F,null);if(typeof $.then=="function")return K(q,N,vs($),F);if($.$$typeof===M)return K(q,N,gs(q,$),F);bs(q,$)}return null}function Q(q,N,$,F,je){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return q=q.get($)||null,v(N,q,""+F,je);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case _:return q=q.get(F.key===null?$:F.key)||null,O(N,q,F,je);case w:return q=q.get(F.key===null?$:F.key)||null,P(N,q,F,je);case V:return F=Ba(F),Q(q,N,$,F,je)}if(pe(F)||te(F))return q=q.get($)||null,X(N,q,F,je,null);if(typeof F.then=="function")return Q(q,N,$,vs(F),je);if(F.$$typeof===M)return Q(q,N,$,gs(N,F),je);bs(N,F)}return null}function me(q,N,$,F){for(var je=null,Le=null,ye=N,Oe=N=0,Be=null;ye!==null&&Oe<$.length;Oe++){ye.index>Oe?(Be=ye,ye=null):Be=ye.sibling;var qe=K(q,ye,$[Oe],F);if(qe===null){ye===null&&(ye=Be);break}e&&ye&&qe.alternate===null&&t(q,ye),N=h(qe,N,Oe),Le===null?je=qe:Le.sibling=qe,Le=qe,ye=Be}if(Oe===$.length)return n(q,ye),Me&&kn(q,Oe),je;if(ye===null){for(;Oe<$.length;Oe++)ye=W(q,$[Oe],F),ye!==null&&(N=h(ye,N,Oe),Le===null?je=ye:Le.sibling=ye,Le=ye);return Me&&kn(q,Oe),je}for(ye=i(ye);Oe<$.length;Oe++)Be=Q(ye,q,Oe,$[Oe],F),Be!==null&&(e&&Be.alternate!==null&&ye.delete(Be.key===null?Oe:Be.key),N=h(Be,N,Oe),Le===null?je=Be:Le.sibling=Be,Le=Be);return e&&ye.forEach(function(va){return t(q,va)}),Me&&kn(q,Oe),je}function Se(q,N,$,F){if($==null)throw Error(l(151));for(var je=null,Le=null,ye=N,Oe=N=0,Be=null,qe=$.next();ye!==null&&!qe.done;Oe++,qe=$.next()){ye.index>Oe?(Be=ye,ye=null):Be=ye.sibling;var va=K(q,ye,qe.value,F);if(va===null){ye===null&&(ye=Be);break}e&&ye&&va.alternate===null&&t(q,ye),N=h(va,N,Oe),Le===null?je=va:Le.sibling=va,Le=va,ye=Be}if(qe.done)return n(q,ye),Me&&kn(q,Oe),je;if(ye===null){for(;!qe.done;Oe++,qe=$.next())qe=W(q,qe.value,F),qe!==null&&(N=h(qe,N,Oe),Le===null?je=qe:Le.sibling=qe,Le=qe);return Me&&kn(q,Oe),je}for(ye=i(ye);!qe.done;Oe++,qe=$.next())qe=Q(ye,q,Oe,qe.value,F),qe!==null&&(e&&qe.alternate!==null&&ye.delete(qe.key===null?Oe:qe.key),N=h(qe,N,Oe),Le===null?je=qe:Le.sibling=qe,Le=qe);return e&&ye.forEach(function(dv){return t(q,dv)}),Me&&kn(q,Oe),je}function Ze(q,N,$,F){if(typeof $=="object"&&$!==null&&$.type===A&&$.key===null&&($=$.props.children),typeof $=="object"&&$!==null){switch($.$$typeof){case _:e:{for(var je=$.key;N!==null;){if(N.key===je){if(je=$.type,je===A){if(N.tag===7){n(q,N.sibling),F=c(N,$.props.children),F.return=q,q=F;break e}}else if(N.elementType===je||typeof je=="object"&&je!==null&&je.$$typeof===V&&Ba(je)===N.type){n(q,N.sibling),F=c(N,$.props),gr(F,$),F.return=q,q=F;break e}n(q,N);break}else t(q,N);N=N.sibling}$.type===A?(F=Na($.props.children,q.mode,F,$.key),F.return=q,q=F):(F=ds($.type,$.key,$.props,null,q.mode,F),gr(F,$),F.return=q,q=F)}return y(q);case w:e:{for(je=$.key;N!==null;){if(N.key===je)if(N.tag===4&&N.stateNode.containerInfo===$.containerInfo&&N.stateNode.implementation===$.implementation){n(q,N.sibling),F=c(N,$.children||[]),F.return=q,q=F;break e}else{n(q,N);break}else t(q,N);N=N.sibling}F=ao($,q.mode,F),F.return=q,q=F}return y(q);case V:return $=Ba($),Ze(q,N,$,F)}if(pe($))return me(q,N,$,F);if(te($)){if(je=te($),typeof je!="function")throw Error(l(150));return $=je.call($),Se(q,N,$,F)}if(typeof $.then=="function")return Ze(q,N,vs($),F);if($.$$typeof===M)return Ze(q,N,gs(q,$),F);bs(q,$)}return typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint"?($=""+$,N!==null&&N.tag===6?(n(q,N.sibling),F=c(N,$),F.return=q,q=F):(n(q,N),F=no($,q.mode,F),F.return=q,q=F),y(q)):n(q,N)}return function(q,N,$,F){try{fr=0;var je=Ze(q,N,$,F);return xi=null,je}catch(ye){if(ye===_i||ye===ms)throw ye;var Le=Pt(29,ye,null,q.mode);return Le.lanes=F,Le.return=q,Le}finally{}}}var La=Rd(!0),Nd=Rd(!1),ta=!1;function mo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function yo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function na(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function aa(e,t,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,(Ve&2)!==0){var c=i.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),i.pending=t,t=us(e),gd(e,null,n),t}return cs(e,i,t,n),us(e)}function pr(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,Ie(e,n)}}function vo(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var c=null,h=null;if(n=n.firstBaseUpdate,n!==null){do{var y={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};h===null?c=h=y:h=h.next=y,n=n.next}while(n!==null);h===null?c=h=t:h=h.next=t}else c=h=t;n={baseState:i.baseState,firstBaseUpdate:c,lastBaseUpdate:h,shared:i.shared,callbacks:i.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var bo=!1;function mr(){if(bo){var e=bi;if(e!==null)throw e}}function yr(e,t,n,i){bo=!1;var c=e.updateQueue;ta=!1;var h=c.firstBaseUpdate,y=c.lastBaseUpdate,v=c.shared.pending;if(v!==null){c.shared.pending=null;var O=v,P=O.next;O.next=null,y===null?h=P:y.next=P,y=O;var X=e.alternate;X!==null&&(X=X.updateQueue,v=X.lastBaseUpdate,v!==y&&(v===null?X.firstBaseUpdate=P:v.next=P,X.lastBaseUpdate=O))}if(h!==null){var W=c.baseState;y=0,X=P=O=null,v=h;do{var K=v.lane&-536870913,Q=K!==v.lane;if(Q?(ze&K)===K:(i&K)===K){K!==0&&K===vi&&(bo=!0),X!==null&&(X=X.next={lane:0,tag:v.tag,payload:v.payload,callback:null,next:null});e:{var me=e,Se=v;K=t;var Ze=n;switch(Se.tag){case 1:if(me=Se.payload,typeof me=="function"){W=me.call(Ze,W,K);break e}W=me;break e;case 3:me.flags=me.flags&-65537|128;case 0:if(me=Se.payload,K=typeof me=="function"?me.call(Ze,W,K):me,K==null)break e;W=x({},W,K);break e;case 2:ta=!0}}K=v.callback,K!==null&&(e.flags|=64,Q&&(e.flags|=8192),Q=c.callbacks,Q===null?c.callbacks=[K]:Q.push(K))}else Q={lane:K,tag:v.tag,payload:v.payload,callback:v.callback,next:null},X===null?(P=X=Q,O=W):X=X.next=Q,y|=K;if(v=v.next,v===null){if(v=c.shared.pending,v===null)break;Q=v,v=Q.next,Q.next=null,c.lastBaseUpdate=Q,c.shared.pending=null}}while(!0);X===null&&(O=W),c.baseState=O,c.firstBaseUpdate=P,c.lastBaseUpdate=X,h===null&&(c.shared.lanes=0),oa|=y,e.lanes=y,e.memoizedState=W}}function Ud(e,t){if(typeof e!="function")throw Error(l(191,e));e.call(t)}function kd(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)Ud(n[e],t)}var ji=E(null),_s=E(0);function Dd(e,t){e=Gn,G(_s,e),G(ji,t),Gn=e|t.baseLanes}function _o(){G(_s,Gn),G(ji,ji.current)}function xo(){Gn=_s.current,U(ji),U(_s)}var Kt=E(null),un=null;function ia(e){var t=e.alternate;G(ut,ut.current&1),G(Kt,e),un===null&&(t===null||ji.current!==null||t.memoizedState!==null)&&(un=e)}function jo(e){G(ut,ut.current),G(Kt,e),un===null&&(un=e)}function zd(e){e.tag===22?(G(ut,ut.current),G(Kt,e),un===null&&(un=e)):ra()}function ra(){G(ut,ut.current),G(Kt,Kt.current)}function Yt(e){U(Kt),un===e&&(un=null),U(ut)}var ut=E(0);function xs(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||Ac(n)||Oc(n)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Bn=0,Ae=null,Qe=null,ft=null,js=!1,Si=!1,qa=!1,Ss=0,vr=0,wi=null,ty=0;function ot(){throw Error(l(321))}function So(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Gt(e[n],t[n]))return!1;return!0}function wo(e,t,n,i,c,h){return Bn=h,Ae=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,D.H=e===null||e.memoizedState===null?vh:qo,qa=!1,h=n(i,c),qa=!1,Si&&(h=Md(t,n,i,c)),Bd(e),h}function Bd(e){D.H=xr;var t=Qe!==null&&Qe.next!==null;if(Bn=0,ft=Qe=Ae=null,js=!1,vr=0,wi=null,t)throw Error(l(300));e===null||gt||(e=e.dependencies,e!==null&&fs(e)&&(gt=!0))}function Md(e,t,n,i){Ae=e;var c=0;do{if(Si&&(wi=null),vr=0,Si=!1,25<=c)throw Error(l(301));if(c+=1,ft=Qe=null,e.updateQueue!=null){var h=e.updateQueue;h.lastEffect=null,h.events=null,h.stores=null,h.memoCache!=null&&(h.memoCache.index=0)}D.H=bh,h=t(n,i)}while(Si);return h}function ny(){var e=D.H,t=e.useState()[0];return t=typeof t.then=="function"?br(t):t,e=e.useState()[0],(Qe!==null?Qe.memoizedState:null)!==e&&(Ae.flags|=1024),t}function Eo(){var e=Ss!==0;return Ss=0,e}function To(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Co(e){if(js){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}js=!1}Bn=0,ft=Qe=Ae=null,Si=!1,vr=Ss=0,wi=null}function kt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ft===null?Ae.memoizedState=ft=e:ft=ft.next=e,ft}function dt(){if(Qe===null){var e=Ae.alternate;e=e!==null?e.memoizedState:null}else e=Qe.next;var t=ft===null?Ae.memoizedState:ft.next;if(t!==null)ft=t,Qe=e;else{if(e===null)throw Ae.alternate===null?Error(l(467)):Error(l(310));Qe=e,e={memoizedState:Qe.memoizedState,baseState:Qe.baseState,baseQueue:Qe.baseQueue,queue:Qe.queue,next:null},ft===null?Ae.memoizedState=ft=e:ft=ft.next=e}return ft}function ws(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function br(e){var t=vr;return vr+=1,wi===null&&(wi=[]),e=Cd(wi,e,t),t=Ae,(ft===null?t.memoizedState:ft.next)===null&&(t=t.alternate,D.H=t===null||t.memoizedState===null?vh:qo),e}function Es(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return br(e);if(e.$$typeof===M)return Et(e)}throw Error(l(438,String(e)))}function Ao(e){var t=null,n=Ae.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var i=Ae.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(t={data:i.data.map(function(c){return c.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=ws(),Ae.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),i=0;i<e;i++)n[i]=he;return t.index++,n}function Mn(e,t){return typeof t=="function"?t(e):t}function Ts(e){var t=dt();return Oo(t,Qe,e)}function Oo(e,t,n){var i=e.queue;if(i===null)throw Error(l(311));i.lastRenderedReducer=n;var c=e.baseQueue,h=i.pending;if(h!==null){if(c!==null){var y=c.next;c.next=h.next,h.next=y}t.baseQueue=c=h,i.pending=null}if(h=e.baseState,c===null)e.memoizedState=h;else{t=c.next;var v=y=null,O=null,P=t,X=!1;do{var W=P.lane&-536870913;if(W!==P.lane?(ze&W)===W:(Bn&W)===W){var K=P.revertLane;if(K===0)O!==null&&(O=O.next={lane:0,revertLane:0,gesture:null,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null}),W===vi&&(X=!0);else if((Bn&K)===K){P=P.next,K===vi&&(X=!0);continue}else W={lane:0,revertLane:P.revertLane,gesture:null,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null},O===null?(v=O=W,y=h):O=O.next=W,Ae.lanes|=K,oa|=K;W=P.action,qa&&n(h,W),h=P.hasEagerState?P.eagerState:n(h,W)}else K={lane:W,revertLane:P.revertLane,gesture:P.gesture,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null},O===null?(v=O=K,y=h):O=O.next=K,Ae.lanes|=W,oa|=W;P=P.next}while(P!==null&&P!==t);if(O===null?y=h:O.next=v,!Gt(h,e.memoizedState)&&(gt=!0,X&&(n=bi,n!==null)))throw n;e.memoizedState=h,e.baseState=y,e.baseQueue=O,i.lastRenderedState=h}return c===null&&(i.lanes=0),[e.memoizedState,i.dispatch]}function Ro(e){var t=dt(),n=t.queue;if(n===null)throw Error(l(311));n.lastRenderedReducer=e;var i=n.dispatch,c=n.pending,h=t.memoizedState;if(c!==null){n.pending=null;var y=c=c.next;do h=e(h,y.action),y=y.next;while(y!==c);Gt(h,t.memoizedState)||(gt=!0),t.memoizedState=h,t.baseQueue===null&&(t.baseState=h),n.lastRenderedState=h}return[h,i]}function Ld(e,t,n){var i=Ae,c=dt(),h=Me;if(h){if(n===void 0)throw Error(l(407));n=n()}else n=t();var y=!Gt((Qe||c).memoizedState,n);if(y&&(c.memoizedState=n,gt=!0),c=c.queue,ko(Id.bind(null,i,c,e),[e]),c.getSnapshot!==t||y||ft!==null&&ft.memoizedState.tag&1){if(i.flags|=2048,Ei(9,{destroy:void 0},Hd.bind(null,i,c,n,t),null),Fe===null)throw Error(l(349));h||(Bn&127)!==0||qd(i,t,n)}return n}function qd(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ae.updateQueue,t===null?(t=ws(),Ae.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Hd(e,t,n,i){t.value=n,t.getSnapshot=i,Vd(t)&&$d(e)}function Id(e,t,n){return n(function(){Vd(t)&&$d(e)})}function Vd(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Gt(e,n)}catch{return!0}}function $d(e){var t=Ra(e,2);t!==null&&$t(t,e,2)}function No(e){var t=kt();if(typeof e=="function"){var n=e;if(e=n(),qa){tn(!0);try{n()}finally{tn(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mn,lastRenderedState:e},t}function Gd(e,t,n,i){return e.baseState=n,Oo(e,Qe,typeof i=="function"?i:Mn)}function ay(e,t,n,i,c){if(Os(e))throw Error(l(485));if(e=t.action,e!==null){var h={payload:c,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(y){h.listeners.push(y)}};D.T!==null?n(!0):h.isTransition=!1,i(h),n=t.pending,n===null?(h.next=t.pending=h,Pd(t,h)):(h.next=n.next,t.pending=n.next=h)}}function Pd(e,t){var n=t.action,i=t.payload,c=e.state;if(t.isTransition){var h=D.T,y={};D.T=y;try{var v=n(c,i),O=D.S;O!==null&&O(y,v),Kd(e,t,v)}catch(P){Uo(e,t,P)}finally{h!==null&&y.types!==null&&(h.types=y.types),D.T=h}}else try{h=n(c,i),Kd(e,t,h)}catch(P){Uo(e,t,P)}}function Kd(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){Yd(e,t,i)},function(i){return Uo(e,t,i)}):Yd(e,t,n)}function Yd(e,t,n){t.status="fulfilled",t.value=n,Jd(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,Pd(e,n)))}function Uo(e,t,n){var i=e.pending;if(e.pending=null,i!==null){i=i.next;do t.status="rejected",t.reason=n,Jd(t),t=t.next;while(t!==i)}e.action=null}function Jd(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Qd(e,t){return t}function Xd(e,t){if(Me){var n=Fe.formState;if(n!==null){e:{var i=Ae;if(Me){if(tt){t:{for(var c=tt,h=cn;c.nodeType!==8;){if(!h){c=null;break t}if(c=dn(c.nextSibling),c===null){c=null;break t}}h=c.data,c=h==="F!"||h==="F"?c:null}if(c){tt=dn(c.nextSibling),i=c.data==="F!";break e}}Wn(i)}i=!1}i&&(t=n[0])}}return n=kt(),n.memoizedState=n.baseState=t,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qd,lastRenderedState:t},n.queue=i,n=ph.bind(null,Ae,i),i.dispatch=n,i=No(!1),h=Lo.bind(null,Ae,!1,i.queue),i=kt(),c={state:t,dispatch:null,action:e,pending:null},i.queue=c,n=ay.bind(null,Ae,c,h,n),c.dispatch=n,i.memoizedState=e,[t,n,!1]}function Zd(e){var t=dt();return Fd(t,Qe,e)}function Fd(e,t,n){if(t=Oo(e,t,Qd)[0],e=Ts(Mn)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var i=br(t)}catch(y){throw y===_i?ms:y}else i=t;t=dt();var c=t.queue,h=c.dispatch;return n!==t.memoizedState&&(Ae.flags|=2048,Ei(9,{destroy:void 0},iy.bind(null,c,n),null)),[i,h,e]}function iy(e,t){e.action=t}function Wd(e){var t=dt(),n=Qe;if(n!==null)return Fd(t,n,e);dt(),t=t.memoizedState,n=dt();var i=n.queue.dispatch;return n.memoizedState=e,[t,i,!1]}function Ei(e,t,n,i){return e={tag:e,create:n,deps:i,inst:t,next:null},t=Ae.updateQueue,t===null&&(t=ws(),Ae.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function eh(){return dt().memoizedState}function Cs(e,t,n,i){var c=kt();Ae.flags|=e,c.memoizedState=Ei(1|t,{destroy:void 0},n,i===void 0?null:i)}function As(e,t,n,i){var c=dt();i=i===void 0?null:i;var h=c.memoizedState.inst;Qe!==null&&i!==null&&So(i,Qe.memoizedState.deps)?c.memoizedState=Ei(t,h,n,i):(Ae.flags|=e,c.memoizedState=Ei(1|t,h,n,i))}function th(e,t){Cs(8390656,8,e,t)}function ko(e,t){As(2048,8,e,t)}function ry(e){Ae.flags|=4;var t=Ae.updateQueue;if(t===null)t=ws(),Ae.updateQueue=t,t.events=[e];else{var n=t.events;n===null?t.events=[e]:n.push(e)}}function nh(e){var t=dt().memoizedState;return ry({ref:t,nextImpl:e}),function(){if((Ve&2)!==0)throw Error(l(440));return t.impl.apply(void 0,arguments)}}function ah(e,t){return As(4,2,e,t)}function ih(e,t){return As(4,4,e,t)}function rh(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function sh(e,t,n){n=n!=null?n.concat([e]):null,As(4,4,rh.bind(null,t,e),n)}function Do(){}function lh(e,t){var n=dt();t=t===void 0?null:t;var i=n.memoizedState;return t!==null&&So(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function oh(e,t){var n=dt();t=t===void 0?null:t;var i=n.memoizedState;if(t!==null&&So(t,i[1]))return i[0];if(i=e(),qa){tn(!0);try{e()}finally{tn(!1)}}return n.memoizedState=[i,t],i}function zo(e,t,n){return n===void 0||(Bn&1073741824)!==0&&(ze&261930)===0?e.memoizedState=t:(e.memoizedState=n,e=uf(),Ae.lanes|=e,oa|=e,n)}function ch(e,t,n,i){return Gt(n,t)?n:ji.current!==null?(e=zo(e,n,i),Gt(e,t)||(gt=!0),e):(Bn&42)===0||(Bn&1073741824)!==0&&(ze&261930)===0?(gt=!0,e.memoizedState=n):(e=uf(),Ae.lanes|=e,oa|=e,t)}function uh(e,t,n,i,c){var h=L.p;L.p=h!==0&&8>h?h:8;var y=D.T,v={};D.T=v,Lo(e,!1,t,n);try{var O=c(),P=D.S;if(P!==null&&P(v,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var X=ey(O,i);_r(e,t,X,Xt(e))}else _r(e,t,i,Xt(e))}catch(W){_r(e,t,{then:function(){},status:"rejected",reason:W},Xt())}finally{L.p=h,y!==null&&v.types!==null&&(y.types=v.types),D.T=y}}function sy(){}function Bo(e,t,n,i){if(e.tag!==5)throw Error(l(476));var c=dh(e).queue;uh(e,c,t,Z,n===null?sy:function(){return hh(e),n(i)})}function dh(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:Z,baseState:Z,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mn,lastRenderedState:Z},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mn,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function hh(e){var t=dh(e);t.next===null&&(t=e.alternate.memoizedState),_r(e,t.next.queue,{},Xt())}function Mo(){return Et(Mr)}function fh(){return dt().memoizedState}function gh(){return dt().memoizedState}function ly(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=Xt();e=na(n);var i=aa(t,e,n);i!==null&&($t(i,t,n),pr(i,t,n)),t={cache:ho()},e.payload=t;return}t=t.return}}function oy(e,t,n){var i=Xt();n={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},Os(e)?mh(t,n):(n=eo(e,t,n,i),n!==null&&($t(n,e,i),yh(n,t,i)))}function ph(e,t,n){var i=Xt();_r(e,t,n,i)}function _r(e,t,n,i){var c={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(Os(e))mh(t,c);else{var h=e.alternate;if(e.lanes===0&&(h===null||h.lanes===0)&&(h=t.lastRenderedReducer,h!==null))try{var y=t.lastRenderedState,v=h(y,n);if(c.hasEagerState=!0,c.eagerState=v,Gt(v,y))return cs(e,t,c,0),Fe===null&&os(),!1}catch{}finally{}if(n=eo(e,t,c,i),n!==null)return $t(n,e,i),yh(n,t,i),!0}return!1}function Lo(e,t,n,i){if(i={lane:2,revertLane:mc(),gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},Os(e)){if(t)throw Error(l(479))}else t=eo(e,n,i,2),t!==null&&$t(t,e,2)}function Os(e){var t=e.alternate;return e===Ae||t!==null&&t===Ae}function mh(e,t){Si=js=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function yh(e,t,n){if((n&4194048)!==0){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,Ie(e,n)}}var xr={readContext:Et,use:Es,useCallback:ot,useContext:ot,useEffect:ot,useImperativeHandle:ot,useLayoutEffect:ot,useInsertionEffect:ot,useMemo:ot,useReducer:ot,useRef:ot,useState:ot,useDebugValue:ot,useDeferredValue:ot,useTransition:ot,useSyncExternalStore:ot,useId:ot,useHostTransitionStatus:ot,useFormState:ot,useActionState:ot,useOptimistic:ot,useMemoCache:ot,useCacheRefresh:ot};xr.useEffectEvent=ot;var vh={readContext:Et,use:Es,useCallback:function(e,t){return kt().memoizedState=[e,t===void 0?null:t],e},useContext:Et,useEffect:th,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,Cs(4194308,4,rh.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Cs(4194308,4,e,t)},useInsertionEffect:function(e,t){Cs(4,2,e,t)},useMemo:function(e,t){var n=kt();t=t===void 0?null:t;var i=e();if(qa){tn(!0);try{e()}finally{tn(!1)}}return n.memoizedState=[i,t],i},useReducer:function(e,t,n){var i=kt();if(n!==void 0){var c=n(t);if(qa){tn(!0);try{n(t)}finally{tn(!1)}}}else c=t;return i.memoizedState=i.baseState=c,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:c},i.queue=e,e=e.dispatch=oy.bind(null,Ae,e),[i.memoizedState,e]},useRef:function(e){var t=kt();return e={current:e},t.memoizedState=e},useState:function(e){e=No(e);var t=e.queue,n=ph.bind(null,Ae,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Do,useDeferredValue:function(e,t){var n=kt();return zo(n,e,t)},useTransition:function(){var e=No(!1);return e=uh.bind(null,Ae,e.queue,!0,!1),kt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var i=Ae,c=kt();if(Me){if(n===void 0)throw Error(l(407));n=n()}else{if(n=t(),Fe===null)throw Error(l(349));(ze&127)!==0||qd(i,t,n)}c.memoizedState=n;var h={value:n,getSnapshot:t};return c.queue=h,th(Id.bind(null,i,h,e),[e]),i.flags|=2048,Ei(9,{destroy:void 0},Hd.bind(null,i,h,n,t),null),n},useId:function(){var e=kt(),t=Fe.identifierPrefix;if(Me){var n=En,i=wn;n=(i&~(1<<32-Ot(i)-1)).toString(32)+n,t="_"+t+"R_"+n,n=Ss++,0<n&&(t+="H"+n.toString(32)),t+="_"}else n=ty++,t="_"+t+"r_"+n.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Mo,useFormState:Xd,useActionState:Xd,useOptimistic:function(e){var t=kt();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Lo.bind(null,Ae,!0,n),n.dispatch=t,[e,t]},useMemoCache:Ao,useCacheRefresh:function(){return kt().memoizedState=ly.bind(null,Ae)},useEffectEvent:function(e){var t=kt(),n={impl:e};return t.memoizedState=n,function(){if((Ve&2)!==0)throw Error(l(440));return n.impl.apply(void 0,arguments)}}},qo={readContext:Et,use:Es,useCallback:lh,useContext:Et,useEffect:ko,useImperativeHandle:sh,useInsertionEffect:ah,useLayoutEffect:ih,useMemo:oh,useReducer:Ts,useRef:eh,useState:function(){return Ts(Mn)},useDebugValue:Do,useDeferredValue:function(e,t){var n=dt();return ch(n,Qe.memoizedState,e,t)},useTransition:function(){var e=Ts(Mn)[0],t=dt().memoizedState;return[typeof e=="boolean"?e:br(e),t]},useSyncExternalStore:Ld,useId:fh,useHostTransitionStatus:Mo,useFormState:Zd,useActionState:Zd,useOptimistic:function(e,t){var n=dt();return Gd(n,Qe,e,t)},useMemoCache:Ao,useCacheRefresh:gh};qo.useEffectEvent=nh;var bh={readContext:Et,use:Es,useCallback:lh,useContext:Et,useEffect:ko,useImperativeHandle:sh,useInsertionEffect:ah,useLayoutEffect:ih,useMemo:oh,useReducer:Ro,useRef:eh,useState:function(){return Ro(Mn)},useDebugValue:Do,useDeferredValue:function(e,t){var n=dt();return Qe===null?zo(n,e,t):ch(n,Qe.memoizedState,e,t)},useTransition:function(){var e=Ro(Mn)[0],t=dt().memoizedState;return[typeof e=="boolean"?e:br(e),t]},useSyncExternalStore:Ld,useId:fh,useHostTransitionStatus:Mo,useFormState:Wd,useActionState:Wd,useOptimistic:function(e,t){var n=dt();return Qe!==null?Gd(n,Qe,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:Ao,useCacheRefresh:gh};bh.useEffectEvent=nh;function Ho(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:x({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Io={enqueueSetState:function(e,t,n){e=e._reactInternals;var i=Xt(),c=na(i);c.payload=t,n!=null&&(c.callback=n),t=aa(e,c,i),t!==null&&($t(t,e,i),pr(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=Xt(),c=na(i);c.tag=1,c.payload=t,n!=null&&(c.callback=n),t=aa(e,c,i),t!==null&&($t(t,e,i),pr(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Xt(),i=na(n);i.tag=2,t!=null&&(i.callback=t),t=aa(e,i,n),t!==null&&($t(t,e,n),pr(t,e,n))}};function _h(e,t,n,i,c,h,y){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,h,y):t.prototype&&t.prototype.isPureReactComponent?!lr(n,i)||!lr(c,h):!0}function xh(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&Io.enqueueReplaceState(t,t.state,null)}function Ha(e,t){var n=t;if("ref"in t){n={};for(var i in t)i!=="ref"&&(n[i]=t[i])}if(e=e.defaultProps){n===t&&(n=x({},n));for(var c in e)n[c]===void 0&&(n[c]=e[c])}return n}function jh(e){ls(e)}function Sh(e){console.error(e)}function wh(e){ls(e)}function Rs(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(i){setTimeout(function(){throw i})}}function Eh(e,t,n){try{var i=e.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(c){setTimeout(function(){throw c})}}function Vo(e,t,n){return n=na(n),n.tag=3,n.payload={element:null},n.callback=function(){Rs(e,t)},n}function Th(e){return e=na(e),e.tag=3,e}function Ch(e,t,n,i){var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var h=i.value;e.payload=function(){return c(h)},e.callback=function(){Eh(t,n,i)}}var y=n.stateNode;y!==null&&typeof y.componentDidCatch=="function"&&(e.callback=function(){Eh(t,n,i),typeof c!="function"&&(ca===null?ca=new Set([this]):ca.add(this));var v=i.stack;this.componentDidCatch(i.value,{componentStack:v!==null?v:""})})}function cy(e,t,n,i,c){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(t=n.alternate,t!==null&&yi(t,n,c,!0),n=Kt.current,n!==null){switch(n.tag){case 31:case 13:return un===null?Vs():n.alternate===null&&ct===0&&(ct=3),n.flags&=-257,n.flags|=65536,n.lanes=c,i===ys?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([i]):t.add(i),fc(e,i,c)),!1;case 22:return n.flags|=65536,i===ys?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([i]):n.add(i)),fc(e,i,c)),!1}throw Error(l(435,n.tag))}return fc(e,i,c),Vs(),!1}if(Me)return t=Kt.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=c,i!==so&&(e=Error(l(422),{cause:i}),ur(sn(e,n)))):(i!==so&&(t=Error(l(423),{cause:i}),ur(sn(t,n))),e=e.current.alternate,e.flags|=65536,c&=-c,e.lanes|=c,i=sn(i,n),c=Vo(e.stateNode,i,c),vo(e,c),ct!==4&&(ct=2)),!1;var h=Error(l(520),{cause:i});if(h=sn(h,n),Or===null?Or=[h]:Or.push(h),ct!==4&&(ct=2),t===null)return!0;i=sn(i,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=c&-c,n.lanes|=e,e=Vo(n.stateNode,i,e),vo(n,e),!1;case 1:if(t=n.type,h=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||h!==null&&typeof h.componentDidCatch=="function"&&(ca===null||!ca.has(h))))return n.flags|=65536,c&=-c,n.lanes|=c,c=Th(c),Ch(c,e,n,i),vo(n,c),!1}n=n.return}while(n!==null);return!1}var $o=Error(l(461)),gt=!1;function Tt(e,t,n,i){t.child=e===null?Nd(t,null,n,i):La(t,e.child,n,i)}function Ah(e,t,n,i,c){n=n.render;var h=t.ref;if("ref"in i){var y={};for(var v in i)v!=="ref"&&(y[v]=i[v])}else y=i;return Da(t),i=wo(e,t,n,y,h,c),v=Eo(),e!==null&&!gt?(To(e,t,c),Ln(e,t,c)):(Me&&v&&io(t),t.flags|=1,Tt(e,t,i,c),t.child)}function Oh(e,t,n,i,c){if(e===null){var h=n.type;return typeof h=="function"&&!to(h)&&h.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=h,Rh(e,t,h,i,c)):(e=ds(n.type,null,i,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(h=e.child,!Zo(e,c)){var y=h.memoizedProps;if(n=n.compare,n=n!==null?n:lr,n(y,i)&&e.ref===t.ref)return Ln(e,t,c)}return t.flags|=1,e=Un(h,i),e.ref=t.ref,e.return=t,t.child=e}function Rh(e,t,n,i,c){if(e!==null){var h=e.memoizedProps;if(lr(h,i)&&e.ref===t.ref)if(gt=!1,t.pendingProps=i=h,Zo(e,c))(e.flags&131072)!==0&&(gt=!0);else return t.lanes=e.lanes,Ln(e,t,c)}return Go(e,t,n,i,c)}function Nh(e,t,n,i){var c=i.children,h=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.mode==="hidden"){if((t.flags&128)!==0){if(h=h!==null?h.baseLanes|n:n,e!==null){for(i=t.child=e.child,c=0;i!==null;)c=c|i.lanes|i.childLanes,i=i.sibling;i=c&~h}else i=0,t.child=null;return Uh(e,t,h,n,i)}if((n&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&ps(t,h!==null?h.cachePool:null),h!==null?Dd(t,h):_o(),zd(t);else return i=t.lanes=536870912,Uh(e,t,h!==null?h.baseLanes|n:n,n,i)}else h!==null?(ps(t,h.cachePool),Dd(t,h),ra(),t.memoizedState=null):(e!==null&&ps(t,null),_o(),ra());return Tt(e,t,c,n),t.child}function jr(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Uh(e,t,n,i,c){var h=go();return h=h===null?null:{parent:ht._currentValue,pool:h},t.memoizedState={baseLanes:n,cachePool:h},e!==null&&ps(t,null),_o(),zd(t),e!==null&&yi(e,t,i,!0),t.childLanes=c,null}function Ns(e,t){return t=ks({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function kh(e,t,n){return La(t,e.child,null,n),e=Ns(t,t.pendingProps),e.flags|=2,Yt(t),t.memoizedState=null,e}function uy(e,t,n){var i=t.pendingProps,c=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(Me){if(i.mode==="hidden")return e=Ns(t,i),t.lanes=536870912,jr(null,e);if(jo(t),(e=tt)?(e=Kf(e,cn),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Zn!==null?{id:wn,overflow:En}:null,retryLane:536870912,hydrationErrors:null},n=md(e),n.return=t,t.child=n,wt=t,tt=null)):e=null,e===null)throw Wn(t);return t.lanes=536870912,null}return Ns(t,i)}var h=e.memoizedState;if(h!==null){var y=h.dehydrated;if(jo(t),c)if(t.flags&256)t.flags&=-257,t=kh(e,t,n);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(l(558));else if(gt||yi(e,t,n,!1),c=(n&e.childLanes)!==0,gt||c){if(i=Fe,i!==null&&(y=yt(i,n),y!==0&&y!==h.retryLane))throw h.retryLane=y,Ra(e,y),$t(i,e,y),$o;Vs(),t=kh(e,t,n)}else e=h.treeContext,tt=dn(y.nextSibling),wt=t,Me=!0,Fn=null,cn=!1,e!==null&&bd(t,e),t=Ns(t,i),t.flags|=4096;return t}return e=Un(e.child,{mode:i.mode,children:i.children}),e.ref=t.ref,t.child=e,e.return=t,e}function Us(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(l(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function Go(e,t,n,i,c){return Da(t),n=wo(e,t,n,i,void 0,c),i=Eo(),e!==null&&!gt?(To(e,t,c),Ln(e,t,c)):(Me&&i&&io(t),t.flags|=1,Tt(e,t,n,c),t.child)}function Dh(e,t,n,i,c,h){return Da(t),t.updateQueue=null,n=Md(t,i,n,c),Bd(e),i=Eo(),e!==null&&!gt?(To(e,t,h),Ln(e,t,h)):(Me&&i&&io(t),t.flags|=1,Tt(e,t,n,h),t.child)}function zh(e,t,n,i,c){if(Da(t),t.stateNode===null){var h=fi,y=n.contextType;typeof y=="object"&&y!==null&&(h=Et(y)),h=new n(i,h),t.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=Io,t.stateNode=h,h._reactInternals=t,h=t.stateNode,h.props=i,h.state=t.memoizedState,h.refs={},mo(t),y=n.contextType,h.context=typeof y=="object"&&y!==null?Et(y):fi,h.state=t.memoizedState,y=n.getDerivedStateFromProps,typeof y=="function"&&(Ho(t,n,y,i),h.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(y=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),y!==h.state&&Io.enqueueReplaceState(h,h.state,null),yr(t,i,h,c),mr(),h.state=t.memoizedState),typeof h.componentDidMount=="function"&&(t.flags|=4194308),i=!0}else if(e===null){h=t.stateNode;var v=t.memoizedProps,O=Ha(n,v);h.props=O;var P=h.context,X=n.contextType;y=fi,typeof X=="object"&&X!==null&&(y=Et(X));var W=n.getDerivedStateFromProps;X=typeof W=="function"||typeof h.getSnapshotBeforeUpdate=="function",v=t.pendingProps!==v,X||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(v||P!==y)&&xh(t,h,i,y),ta=!1;var K=t.memoizedState;h.state=K,yr(t,i,h,c),mr(),P=t.memoizedState,v||K!==P||ta?(typeof W=="function"&&(Ho(t,n,W,i),P=t.memoizedState),(O=ta||_h(t,n,O,i,K,P,y))?(X||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(t.flags|=4194308)):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=P),h.props=i,h.state=P,h.context=y,i=O):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{h=t.stateNode,yo(e,t),y=t.memoizedProps,X=Ha(n,y),h.props=X,W=t.pendingProps,K=h.context,P=n.contextType,O=fi,typeof P=="object"&&P!==null&&(O=Et(P)),v=n.getDerivedStateFromProps,(P=typeof v=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(y!==W||K!==O)&&xh(t,h,i,O),ta=!1,K=t.memoizedState,h.state=K,yr(t,i,h,c),mr();var Q=t.memoizedState;y!==W||K!==Q||ta||e!==null&&e.dependencies!==null&&fs(e.dependencies)?(typeof v=="function"&&(Ho(t,n,v,i),Q=t.memoizedState),(X=ta||_h(t,n,X,i,K,Q,O)||e!==null&&e.dependencies!==null&&fs(e.dependencies))?(P||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(i,Q,O),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(i,Q,O)),typeof h.componentDidUpdate=="function"&&(t.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof h.componentDidUpdate!="function"||y===e.memoizedProps&&K===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&K===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=Q),h.props=i,h.state=Q,h.context=O,i=X):(typeof h.componentDidUpdate!="function"||y===e.memoizedProps&&K===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&K===e.memoizedState||(t.flags|=1024),i=!1)}return h=i,Us(e,t),i=(t.flags&128)!==0,h||i?(h=t.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:h.render(),t.flags|=1,e!==null&&i?(t.child=La(t,e.child,null,c),t.child=La(t,null,n,c)):Tt(e,t,n,c),t.memoizedState=h.state,e=t.child):e=Ln(e,t,c),e}function Bh(e,t,n,i){return Ua(),t.flags|=256,Tt(e,t,n,i),t.child}var Po={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ko(e){return{baseLanes:e,cachePool:Ed()}}function Yo(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=Qt),e}function Mh(e,t,n){var i=t.pendingProps,c=!1,h=(t.flags&128)!==0,y;if((y=h)||(y=e!==null&&e.memoizedState===null?!1:(ut.current&2)!==0),y&&(c=!0,t.flags&=-129),y=(t.flags&32)!==0,t.flags&=-33,e===null){if(Me){if(c?ia(t):ra(),(e=tt)?(e=Kf(e,cn),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Zn!==null?{id:wn,overflow:En}:null,retryLane:536870912,hydrationErrors:null},n=md(e),n.return=t,t.child=n,wt=t,tt=null)):e=null,e===null)throw Wn(t);return Oc(e)?t.lanes=32:t.lanes=536870912,null}var v=i.children;return i=i.fallback,c?(ra(),c=t.mode,v=ks({mode:"hidden",children:v},c),i=Na(i,c,n,null),v.return=t,i.return=t,v.sibling=i,t.child=v,i=t.child,i.memoizedState=Ko(n),i.childLanes=Yo(e,y,n),t.memoizedState=Po,jr(null,i)):(ia(t),Jo(t,v))}var O=e.memoizedState;if(O!==null&&(v=O.dehydrated,v!==null)){if(h)t.flags&256?(ia(t),t.flags&=-257,t=Qo(e,t,n)):t.memoizedState!==null?(ra(),t.child=e.child,t.flags|=128,t=null):(ra(),v=i.fallback,c=t.mode,i=ks({mode:"visible",children:i.children},c),v=Na(v,c,n,null),v.flags|=2,i.return=t,v.return=t,i.sibling=v,t.child=i,La(t,e.child,null,n),i=t.child,i.memoizedState=Ko(n),i.childLanes=Yo(e,y,n),t.memoizedState=Po,t=jr(null,i));else if(ia(t),Oc(v)){if(y=v.nextSibling&&v.nextSibling.dataset,y)var P=y.dgst;y=P,i=Error(l(419)),i.stack="",i.digest=y,ur({value:i,source:null,stack:null}),t=Qo(e,t,n)}else if(gt||yi(e,t,n,!1),y=(n&e.childLanes)!==0,gt||y){if(y=Fe,y!==null&&(i=yt(y,n),i!==0&&i!==O.retryLane))throw O.retryLane=i,Ra(e,i),$t(y,e,i),$o;Ac(v)||Vs(),t=Qo(e,t,n)}else Ac(v)?(t.flags|=192,t.child=e.child,t=null):(e=O.treeContext,tt=dn(v.nextSibling),wt=t,Me=!0,Fn=null,cn=!1,e!==null&&bd(t,e),t=Jo(t,i.children),t.flags|=4096);return t}return c?(ra(),v=i.fallback,c=t.mode,O=e.child,P=O.sibling,i=Un(O,{mode:"hidden",children:i.children}),i.subtreeFlags=O.subtreeFlags&65011712,P!==null?v=Un(P,v):(v=Na(v,c,n,null),v.flags|=2),v.return=t,i.return=t,i.sibling=v,t.child=i,jr(null,i),i=t.child,v=e.child.memoizedState,v===null?v=Ko(n):(c=v.cachePool,c!==null?(O=ht._currentValue,c=c.parent!==O?{parent:O,pool:O}:c):c=Ed(),v={baseLanes:v.baseLanes|n,cachePool:c}),i.memoizedState=v,i.childLanes=Yo(e,y,n),t.memoizedState=Po,jr(e.child,i)):(ia(t),n=e.child,e=n.sibling,n=Un(n,{mode:"visible",children:i.children}),n.return=t,n.sibling=null,e!==null&&(y=t.deletions,y===null?(t.deletions=[e],t.flags|=16):y.push(e)),t.child=n,t.memoizedState=null,n)}function Jo(e,t){return t=ks({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function ks(e,t){return e=Pt(22,e,null,t),e.lanes=0,e}function Qo(e,t,n){return La(t,e.child,null,n),e=Jo(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Lh(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),co(e.return,t,n)}function Xo(e,t,n,i,c,h){var y=e.memoizedState;y===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:c,treeForkCount:h}:(y.isBackwards=t,y.rendering=null,y.renderingStartTime=0,y.last=i,y.tail=n,y.tailMode=c,y.treeForkCount=h)}function qh(e,t,n){var i=t.pendingProps,c=i.revealOrder,h=i.tail;i=i.children;var y=ut.current,v=(y&2)!==0;if(v?(y=y&1|2,t.flags|=128):y&=1,G(ut,y),Tt(e,t,i,n),i=Me?cr:0,!v&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Lh(e,n,t);else if(e.tag===19)Lh(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(c){case"forwards":for(n=t.child,c=null;n!==null;)e=n.alternate,e!==null&&xs(e)===null&&(c=n),n=n.sibling;n=c,n===null?(c=t.child,t.child=null):(c=n.sibling,n.sibling=null),Xo(t,!1,c,n,h,i);break;case"backwards":case"unstable_legacy-backwards":for(n=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&xs(e)===null){t.child=c;break}e=c.sibling,c.sibling=n,n=c,c=e}Xo(t,!0,n,null,h,i);break;case"together":Xo(t,!1,null,null,void 0,i);break;default:t.memoizedState=null}return t.child}function Ln(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),oa|=t.lanes,(n&t.childLanes)===0)if(e!==null){if(yi(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(l(153));if(t.child!==null){for(e=t.child,n=Un(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Un(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Zo(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&fs(e)))}function dy(e,t,n){switch(t.tag){case 3:se(t,t.stateNode.containerInfo),ea(t,ht,e.memoizedState.cache),Ua();break;case 27:case 5:Ee(t);break;case 4:se(t,t.stateNode.containerInfo);break;case 10:ea(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,jo(t),null;break;case 13:var i=t.memoizedState;if(i!==null)return i.dehydrated!==null?(ia(t),t.flags|=128,null):(n&t.child.childLanes)!==0?Mh(e,t,n):(ia(t),e=Ln(e,t,n),e!==null?e.sibling:null);ia(t);break;case 19:var c=(e.flags&128)!==0;if(i=(n&t.childLanes)!==0,i||(yi(e,t,n,!1),i=(n&t.childLanes)!==0),c){if(i)return qh(e,t,n);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),G(ut,ut.current),i)break;return null;case 22:return t.lanes=0,Nh(e,t,n,t.pendingProps);case 24:ea(t,ht,e.memoizedState.cache)}return Ln(e,t,n)}function Hh(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)gt=!0;else{if(!Zo(e,n)&&(t.flags&128)===0)return gt=!1,dy(e,t,n);gt=(e.flags&131072)!==0}else gt=!1,Me&&(t.flags&1048576)!==0&&vd(t,cr,t.index);switch(t.lanes=0,t.tag){case 16:e:{var i=t.pendingProps;if(e=Ba(t.elementType),t.type=e,typeof e=="function")to(e)?(i=Ha(e,i),t.tag=1,t=zh(null,t,e,i,n)):(t.tag=0,t=Go(null,t,e,i,n));else{if(e!=null){var c=e.$$typeof;if(c===J){t.tag=11,t=Ah(null,t,e,i,n);break e}else if(c===k){t.tag=14,t=Oh(null,t,e,i,n);break e}}throw t=ie(e)||e,Error(l(306,t,""))}}return t;case 0:return Go(e,t,t.type,t.pendingProps,n);case 1:return i=t.type,c=Ha(i,t.pendingProps),zh(e,t,i,c,n);case 3:e:{if(se(t,t.stateNode.containerInfo),e===null)throw Error(l(387));i=t.pendingProps;var h=t.memoizedState;c=h.element,yo(e,t),yr(t,i,null,n);var y=t.memoizedState;if(i=y.cache,ea(t,ht,i),i!==h.cache&&uo(t,[ht],n,!0),mr(),i=y.element,h.isDehydrated)if(h={element:i,isDehydrated:!1,cache:y.cache},t.updateQueue.baseState=h,t.memoizedState=h,t.flags&256){t=Bh(e,t,i,n);break e}else if(i!==c){c=sn(Error(l(424)),t),ur(c),t=Bh(e,t,i,n);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(tt=dn(e.firstChild),wt=t,Me=!0,Fn=null,cn=!0,n=Nd(t,null,i,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(Ua(),i===c){t=Ln(e,t,n);break e}Tt(e,t,i,n)}t=t.child}return t;case 26:return Us(e,t),e===null?(n=Ff(t.type,null,t.pendingProps,null))?t.memoizedState=n:Me||(n=t.type,e=t.pendingProps,i=Qs(ee.current).createElement(n),i[St]=t,i[Mt]=e,Ct(i,n,e),xt(i),t.stateNode=i):t.memoizedState=Ff(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Ee(t),e===null&&Me&&(i=t.stateNode=Qf(t.type,t.pendingProps,ee.current),wt=t,cn=!0,c=tt,fa(t.type)?(Rc=c,tt=dn(i.firstChild)):tt=c),Tt(e,t,t.pendingProps.children,n),Us(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Me&&((c=i=tt)&&(i=Iy(i,t.type,t.pendingProps,cn),i!==null?(t.stateNode=i,wt=t,tt=dn(i.firstChild),cn=!1,c=!0):c=!1),c||Wn(t)),Ee(t),c=t.type,h=t.pendingProps,y=e!==null?e.memoizedProps:null,i=h.children,Ec(c,h)?i=null:y!==null&&Ec(c,y)&&(t.flags|=32),t.memoizedState!==null&&(c=wo(e,t,ny,null,null,n),Mr._currentValue=c),Us(e,t),Tt(e,t,i,n),t.child;case 6:return e===null&&Me&&((e=n=tt)&&(n=Vy(n,t.pendingProps,cn),n!==null?(t.stateNode=n,wt=t,tt=null,e=!0):e=!1),e||Wn(t)),null;case 13:return Mh(e,t,n);case 4:return se(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=La(t,null,i,n):Tt(e,t,i,n),t.child;case 11:return Ah(e,t,t.type,t.pendingProps,n);case 7:return Tt(e,t,t.pendingProps,n),t.child;case 8:return Tt(e,t,t.pendingProps.children,n),t.child;case 12:return Tt(e,t,t.pendingProps.children,n),t.child;case 10:return i=t.pendingProps,ea(t,t.type,i.value),Tt(e,t,i.children,n),t.child;case 9:return c=t.type._context,i=t.pendingProps.children,Da(t),c=Et(c),i=i(c),t.flags|=1,Tt(e,t,i,n),t.child;case 14:return Oh(e,t,t.type,t.pendingProps,n);case 15:return Rh(e,t,t.type,t.pendingProps,n);case 19:return qh(e,t,n);case 31:return uy(e,t,n);case 22:return Nh(e,t,n,t.pendingProps);case 24:return Da(t),i=Et(ht),e===null?(c=go(),c===null&&(c=Fe,h=ho(),c.pooledCache=h,h.refCount++,h!==null&&(c.pooledCacheLanes|=n),c=h),t.memoizedState={parent:i,cache:c},mo(t),ea(t,ht,c)):((e.lanes&n)!==0&&(yo(e,t),yr(t,null,null,n),mr()),c=e.memoizedState,h=t.memoizedState,c.parent!==i?(c={parent:i,cache:i},t.memoizedState=c,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=c),ea(t,ht,i)):(i=h.cache,ea(t,ht,i),i!==c.cache&&uo(t,[ht],n,!0))),Tt(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(l(156,t.tag))}function qn(e){e.flags|=4}function Fo(e,t,n,i,c){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(c&335544128)===c)if(e.stateNode.complete)e.flags|=8192;else if(gf())e.flags|=8192;else throw Ma=ys,po}else e.flags&=-16777217}function Ih(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!ag(t))if(gf())e.flags|=8192;else throw Ma=ys,po}function Ds(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Re():536870912,e.lanes|=t,Oi|=t)}function Sr(e,t){if(!Me)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function nt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var c=e.child;c!==null;)n|=c.lanes|c.childLanes,i|=c.subtreeFlags&65011712,i|=c.flags&65011712,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)n|=c.lanes|c.childLanes,i|=c.subtreeFlags,i|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function hy(e,t,n){var i=t.pendingProps;switch(ro(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return nt(t),null;case 1:return nt(t),null;case 3:return n=t.stateNode,i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),zn(ht),fe(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(mi(t)?qn(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,lo())),nt(t),null;case 26:var c=t.type,h=t.memoizedState;return e===null?(qn(t),h!==null?(nt(t),Ih(t,h)):(nt(t),Fo(t,c,null,i,n))):h?h!==e.memoizedState?(qn(t),nt(t),Ih(t,h)):(nt(t),t.flags&=-16777217):(e=e.memoizedProps,e!==i&&qn(t),nt(t),Fo(t,c,e,i,n)),null;case 27:if(Ne(t),n=ee.current,c=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&qn(t);else{if(!i){if(t.stateNode===null)throw Error(l(166));return nt(t),null}e=Y.current,mi(t)?_d(t):(e=Qf(c,i,n),t.stateNode=e,qn(t))}return nt(t),null;case 5:if(Ne(t),c=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&qn(t);else{if(!i){if(t.stateNode===null)throw Error(l(166));return nt(t),null}if(h=Y.current,mi(t))_d(t);else{var y=Qs(ee.current);switch(h){case 1:h=y.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:h=y.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":h=y.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":h=y.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":h=y.createElement("div"),h.innerHTML="<script><\/script>",h=h.removeChild(h.firstChild);break;case"select":h=typeof i.is=="string"?y.createElement("select",{is:i.is}):y.createElement("select"),i.multiple?h.multiple=!0:i.size&&(h.size=i.size);break;default:h=typeof i.is=="string"?y.createElement(c,{is:i.is}):y.createElement(c)}}h[St]=t,h[Mt]=i;e:for(y=t.child;y!==null;){if(y.tag===5||y.tag===6)h.appendChild(y.stateNode);else if(y.tag!==4&&y.tag!==27&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===t)break e;for(;y.sibling===null;){if(y.return===null||y.return===t)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}t.stateNode=h;e:switch(Ct(h,c,i),c){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&qn(t)}}return nt(t),Fo(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==i&&qn(t);else{if(typeof i!="string"&&t.stateNode===null)throw Error(l(166));if(e=ee.current,mi(t)){if(e=t.stateNode,n=t.memoizedProps,i=null,c=wt,c!==null)switch(c.tag){case 27:case 5:i=c.memoizedProps}e[St]=t,e=!!(e.nodeValue===n||i!==null&&i.suppressHydrationWarning===!0||Lf(e.nodeValue,n)),e||Wn(t,!0)}else e=Qs(e).createTextNode(i),e[St]=t,t.stateNode=e}return nt(t),null;case 31:if(n=t.memoizedState,e===null||e.memoizedState!==null){if(i=mi(t),n!==null){if(e===null){if(!i)throw Error(l(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(557));e[St]=t}else Ua(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;nt(t),e=!1}else n=lo(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return t.flags&256?(Yt(t),t):(Yt(t),null);if((t.flags&128)!==0)throw Error(l(558))}return nt(t),null;case 13:if(i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(c=mi(t),i!==null&&i.dehydrated!==null){if(e===null){if(!c)throw Error(l(318));if(c=t.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(l(317));c[St]=t}else Ua(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;nt(t),c=!1}else c=lo(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=c),c=!0;if(!c)return t.flags&256?(Yt(t),t):(Yt(t),null)}return Yt(t),(t.flags&128)!==0?(t.lanes=n,t):(n=i!==null,e=e!==null&&e.memoizedState!==null,n&&(i=t.child,c=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(c=i.alternate.memoizedState.cachePool.pool),h=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(h=i.memoizedState.cachePool.pool),h!==c&&(i.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),Ds(t,t.updateQueue),nt(t),null);case 4:return fe(),e===null&&_c(t.stateNode.containerInfo),nt(t),null;case 10:return zn(t.type),nt(t),null;case 19:if(U(ut),i=t.memoizedState,i===null)return nt(t),null;if(c=(t.flags&128)!==0,h=i.rendering,h===null)if(c)Sr(i,!1);else{if(ct!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(h=xs(e),h!==null){for(t.flags|=128,Sr(i,!1),e=h.updateQueue,t.updateQueue=e,Ds(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)pd(n,e),n=n.sibling;return G(ut,ut.current&1|2),Me&&kn(t,i.treeForkCount),t.child}e=e.sibling}i.tail!==null&&Ut()>qs&&(t.flags|=128,c=!0,Sr(i,!1),t.lanes=4194304)}else{if(!c)if(e=xs(h),e!==null){if(t.flags|=128,c=!0,e=e.updateQueue,t.updateQueue=e,Ds(t,e),Sr(i,!0),i.tail===null&&i.tailMode==="hidden"&&!h.alternate&&!Me)return nt(t),null}else 2*Ut()-i.renderingStartTime>qs&&n!==536870912&&(t.flags|=128,c=!0,Sr(i,!1),t.lanes=4194304);i.isBackwards?(h.sibling=t.child,t.child=h):(e=i.last,e!==null?e.sibling=h:t.child=h,i.last=h)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ut(),e.sibling=null,n=ut.current,G(ut,c?n&1|2:n&1),Me&&kn(t,i.treeForkCount),e):(nt(t),null);case 22:case 23:return Yt(t),xo(),i=t.memoizedState!==null,e!==null?e.memoizedState!==null!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?(n&536870912)!==0&&(t.flags&128)===0&&(nt(t),t.subtreeFlags&6&&(t.flags|=8192)):nt(t),n=t.updateQueue,n!==null&&Ds(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),i=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),i!==n&&(t.flags|=2048),e!==null&&U(za),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),zn(ht),nt(t),null;case 25:return null;case 30:return null}throw Error(l(156,t.tag))}function fy(e,t){switch(ro(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return zn(ht),fe(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Ne(t),null;case 31:if(t.memoizedState!==null){if(Yt(t),t.alternate===null)throw Error(l(340));Ua()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(Yt(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(l(340));Ua()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return U(ut),null;case 4:return fe(),null;case 10:return zn(t.type),null;case 22:case 23:return Yt(t),xo(),e!==null&&U(za),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return zn(ht),null;case 25:return null;default:return null}}function Vh(e,t){switch(ro(t),t.tag){case 3:zn(ht),fe();break;case 26:case 27:case 5:Ne(t);break;case 4:fe();break;case 31:t.memoizedState!==null&&Yt(t);break;case 13:Yt(t);break;case 19:U(ut);break;case 10:zn(t.type);break;case 22:case 23:Yt(t),xo(),e!==null&&U(za);break;case 24:zn(ht)}}function wr(e,t){try{var n=t.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var c=i.next;n=c;do{if((n.tag&e)===e){i=void 0;var h=n.create,y=n.inst;i=h(),y.destroy=i}n=n.next}while(n!==c)}}catch(v){Ke(t,t.return,v)}}function sa(e,t,n){try{var i=t.updateQueue,c=i!==null?i.lastEffect:null;if(c!==null){var h=c.next;i=h;do{if((i.tag&e)===e){var y=i.inst,v=y.destroy;if(v!==void 0){y.destroy=void 0,c=t;var O=n,P=v;try{P()}catch(X){Ke(c,O,X)}}}i=i.next}while(i!==h)}}catch(X){Ke(t,t.return,X)}}function $h(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{kd(t,n)}catch(i){Ke(e,e.return,i)}}}function Gh(e,t,n){n.props=Ha(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(i){Ke(e,t,i)}}function Er(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var i=e.stateNode;break;case 30:i=e.stateNode;break;default:i=e.stateNode}typeof n=="function"?e.refCleanup=n(i):n.current=i}}catch(c){Ke(e,t,c)}}function Tn(e,t){var n=e.ref,i=e.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(c){Ke(e,t,c)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(c){Ke(e,t,c)}else n.current=null}function Ph(e){var t=e.type,n=e.memoizedProps,i=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break e;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(c){Ke(e,e.return,c)}}function Wo(e,t,n){try{var i=e.stateNode;zy(i,e.type,n,t),i[Mt]=t}catch(c){Ke(e,e.return,c)}}function Kh(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&fa(e.type)||e.tag===4}function ec(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Kh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&fa(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function tc(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Rn));else if(i!==4&&(i===27&&fa(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(tc(e,t,n),e=e.sibling;e!==null;)tc(e,t,n),e=e.sibling}function zs(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(i!==4&&(i===27&&fa(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(zs(e,t,n),e=e.sibling;e!==null;)zs(e,t,n),e=e.sibling}function Yh(e){var t=e.stateNode,n=e.memoizedProps;try{for(var i=e.type,c=t.attributes;c.length;)t.removeAttributeNode(c[0]);Ct(t,i,n),t[St]=e,t[Mt]=n}catch(h){Ke(e,e.return,h)}}var Hn=!1,pt=!1,nc=!1,Jh=typeof WeakSet=="function"?WeakSet:Set,jt=null;function gy(e,t){if(e=e.containerInfo,Sc=nl,e=sd(e),Jl(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var c=i.anchorOffset,h=i.focusNode;i=i.focusOffset;try{n.nodeType,h.nodeType}catch{n=null;break e}var y=0,v=-1,O=-1,P=0,X=0,W=e,K=null;t:for(;;){for(var Q;W!==n||c!==0&&W.nodeType!==3||(v=y+c),W!==h||i!==0&&W.nodeType!==3||(O=y+i),W.nodeType===3&&(y+=W.nodeValue.length),(Q=W.firstChild)!==null;)K=W,W=Q;for(;;){if(W===e)break t;if(K===n&&++P===c&&(v=y),K===h&&++X===i&&(O=y),(Q=W.nextSibling)!==null)break;W=K,K=W.parentNode}W=Q}n=v===-1||O===-1?null:{start:v,end:O}}else n=null}n=n||{start:0,end:0}}else n=null;for(wc={focusedElem:e,selectionRange:n},nl=!1,jt=t;jt!==null;)if(t=jt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,jt=e;else for(;jt!==null;){switch(t=jt,h=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(n=0;n<e.length;n++)c=e[n],c.ref.impl=c.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&h!==null){e=void 0,n=t,c=h.memoizedProps,h=h.memoizedState,i=n.stateNode;try{var me=Ha(n.type,c);e=i.getSnapshotBeforeUpdate(me,h),i.__reactInternalSnapshotBeforeUpdate=e}catch(Se){Ke(n,n.return,Se)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)Cc(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Cc(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(l(163))}if(e=t.sibling,e!==null){e.return=t.return,jt=e;break}jt=t.return}}function Qh(e,t,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:Vn(e,n),i&4&&wr(5,n);break;case 1:if(Vn(e,n),i&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(y){Ke(n,n.return,y)}else{var c=Ha(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(c,t,e.__reactInternalSnapshotBeforeUpdate)}catch(y){Ke(n,n.return,y)}}i&64&&$h(n),i&512&&Er(n,n.return);break;case 3:if(Vn(e,n),i&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{kd(e,t)}catch(y){Ke(n,n.return,y)}}break;case 27:t===null&&i&4&&Yh(n);case 26:case 5:Vn(e,n),t===null&&i&4&&Ph(n),i&512&&Er(n,n.return);break;case 12:Vn(e,n);break;case 31:Vn(e,n),i&4&&Fh(e,n);break;case 13:Vn(e,n),i&4&&Wh(e,n),i&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=Sy.bind(null,n),$y(e,n))));break;case 22:if(i=n.memoizedState!==null||Hn,!i){t=t!==null&&t.memoizedState!==null||pt,c=Hn;var h=pt;Hn=i,(pt=t)&&!h?$n(e,n,(n.subtreeFlags&8772)!==0):Vn(e,n),Hn=c,pt=h}break;case 30:break;default:Vn(e,n)}}function Xh(e){var t=e.alternate;t!==null&&(e.alternate=null,Xh(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Nl(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var it=null,qt=!1;function In(e,t,n){for(n=n.child;n!==null;)Zh(e,t,n),n=n.sibling}function Zh(e,t,n){if(Ye&&typeof Ye.onCommitFiberUnmount=="function")try{Ye.onCommitFiberUnmount(An,n)}catch{}switch(n.tag){case 26:pt||Tn(n,t),In(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:pt||Tn(n,t);var i=it,c=qt;fa(n.type)&&(it=n.stateNode,qt=!1),In(e,t,n),Dr(n.stateNode),it=i,qt=c;break;case 5:pt||Tn(n,t);case 6:if(i=it,c=qt,it=null,In(e,t,n),it=i,qt=c,it!==null)if(qt)try{(it.nodeType===9?it.body:it.nodeName==="HTML"?it.ownerDocument.body:it).removeChild(n.stateNode)}catch(h){Ke(n,t,h)}else try{it.removeChild(n.stateNode)}catch(h){Ke(n,t,h)}break;case 18:it!==null&&(qt?(e=it,Gf(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),Mi(e)):Gf(it,n.stateNode));break;case 4:i=it,c=qt,it=n.stateNode.containerInfo,qt=!0,In(e,t,n),it=i,qt=c;break;case 0:case 11:case 14:case 15:sa(2,n,t),pt||sa(4,n,t),In(e,t,n);break;case 1:pt||(Tn(n,t),i=n.stateNode,typeof i.componentWillUnmount=="function"&&Gh(n,t,i)),In(e,t,n);break;case 21:In(e,t,n);break;case 22:pt=(i=pt)||n.memoizedState!==null,In(e,t,n),pt=i;break;default:In(e,t,n)}}function Fh(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Mi(e)}catch(n){Ke(t,t.return,n)}}}function Wh(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Mi(e)}catch(n){Ke(t,t.return,n)}}function py(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Jh),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Jh),t;default:throw Error(l(435,e.tag))}}function Bs(e,t){var n=py(e);t.forEach(function(i){if(!n.has(i)){n.add(i);var c=wy.bind(null,e,i);i.then(c,c)}})}function Ht(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var c=n[i],h=e,y=t,v=y;e:for(;v!==null;){switch(v.tag){case 27:if(fa(v.type)){it=v.stateNode,qt=!1;break e}break;case 5:it=v.stateNode,qt=!1;break e;case 3:case 4:it=v.stateNode.containerInfo,qt=!0;break e}v=v.return}if(it===null)throw Error(l(160));Zh(h,y,c),it=null,qt=!1,h=c.alternate,h!==null&&(h.return=null),c.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)ef(t,e),t=t.sibling}var bn=null;function ef(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Ht(t,e),It(e),i&4&&(sa(3,e,e.return),wr(3,e),sa(5,e,e.return));break;case 1:Ht(t,e),It(e),i&512&&(pt||n===null||Tn(n,n.return)),i&64&&Hn&&(e=e.updateQueue,e!==null&&(i=e.callbacks,i!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:var c=bn;if(Ht(t,e),It(e),i&512&&(pt||n===null||Tn(n,n.return)),i&4){var h=n!==null?n.memoizedState:null;if(i=e.memoizedState,n===null)if(i===null)if(e.stateNode===null){e:{i=e.type,n=e.memoizedProps,c=c.ownerDocument||c;t:switch(i){case"title":h=c.getElementsByTagName("title")[0],(!h||h[Fi]||h[St]||h.namespaceURI==="http://www.w3.org/2000/svg"||h.hasAttribute("itemprop"))&&(h=c.createElement(i),c.head.insertBefore(h,c.querySelector("head > title"))),Ct(h,i,n),h[St]=e,xt(h),i=h;break e;case"link":var y=tg("link","href",c).get(i+(n.href||""));if(y){for(var v=0;v<y.length;v++)if(h=y[v],h.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&h.getAttribute("rel")===(n.rel==null?null:n.rel)&&h.getAttribute("title")===(n.title==null?null:n.title)&&h.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){y.splice(v,1);break t}}h=c.createElement(i),Ct(h,i,n),c.head.appendChild(h);break;case"meta":if(y=tg("meta","content",c).get(i+(n.content||""))){for(v=0;v<y.length;v++)if(h=y[v],h.getAttribute("content")===(n.content==null?null:""+n.content)&&h.getAttribute("name")===(n.name==null?null:n.name)&&h.getAttribute("property")===(n.property==null?null:n.property)&&h.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&h.getAttribute("charset")===(n.charSet==null?null:n.charSet)){y.splice(v,1);break t}}h=c.createElement(i),Ct(h,i,n),c.head.appendChild(h);break;default:throw Error(l(468,i))}h[St]=e,xt(h),i=h}e.stateNode=i}else ng(c,e.type,e.stateNode);else e.stateNode=eg(c,i,e.memoizedProps);else h!==i?(h===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):h.count--,i===null?ng(c,e.type,e.stateNode):eg(c,i,e.memoizedProps)):i===null&&e.stateNode!==null&&Wo(e,e.memoizedProps,n.memoizedProps)}break;case 27:Ht(t,e),It(e),i&512&&(pt||n===null||Tn(n,n.return)),n!==null&&i&4&&Wo(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Ht(t,e),It(e),i&512&&(pt||n===null||Tn(n,n.return)),e.flags&32){c=e.stateNode;try{si(c,"")}catch(me){Ke(e,e.return,me)}}i&4&&e.stateNode!=null&&(c=e.memoizedProps,Wo(e,c,n!==null?n.memoizedProps:c)),i&1024&&(nc=!0);break;case 6:if(Ht(t,e),It(e),i&4){if(e.stateNode===null)throw Error(l(162));i=e.memoizedProps,n=e.stateNode;try{n.nodeValue=i}catch(me){Ke(e,e.return,me)}}break;case 3:if(Fs=null,c=bn,bn=Xs(t.containerInfo),Ht(t,e),bn=c,It(e),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Mi(t.containerInfo)}catch(me){Ke(e,e.return,me)}nc&&(nc=!1,tf(e));break;case 4:i=bn,bn=Xs(e.stateNode.containerInfo),Ht(t,e),It(e),bn=i;break;case 12:Ht(t,e),It(e);break;case 31:Ht(t,e),It(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,Bs(e,i)));break;case 13:Ht(t,e),It(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Ls=Ut()),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,Bs(e,i)));break;case 22:c=e.memoizedState!==null;var O=n!==null&&n.memoizedState!==null,P=Hn,X=pt;if(Hn=P||c,pt=X||O,Ht(t,e),pt=X,Hn=P,It(e),i&8192)e:for(t=e.stateNode,t._visibility=c?t._visibility&-2:t._visibility|1,c&&(n===null||O||Hn||pt||Ia(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){O=n=t;try{if(h=O.stateNode,c)y=h.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none";else{v=O.stateNode;var W=O.memoizedProps.style,K=W!=null&&W.hasOwnProperty("display")?W.display:null;v.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch(me){Ke(O,O.return,me)}}}else if(t.tag===6){if(n===null){O=t;try{O.stateNode.nodeValue=c?"":O.memoizedProps}catch(me){Ke(O,O.return,me)}}}else if(t.tag===18){if(n===null){O=t;try{var Q=O.stateNode;c?Pf(Q,!0):Pf(O.stateNode,!1)}catch(me){Ke(O,O.return,me)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}i&4&&(i=e.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,Bs(e,n))));break;case 19:Ht(t,e),It(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,Bs(e,i)));break;case 30:break;case 21:break;default:Ht(t,e),It(e)}}function It(e){var t=e.flags;if(t&2){try{for(var n,i=e.return;i!==null;){if(Kh(i)){n=i;break}i=i.return}if(n==null)throw Error(l(160));switch(n.tag){case 27:var c=n.stateNode,h=ec(e);zs(e,h,c);break;case 5:var y=n.stateNode;n.flags&32&&(si(y,""),n.flags&=-33);var v=ec(e);zs(e,v,y);break;case 3:case 4:var O=n.stateNode.containerInfo,P=ec(e);tc(e,P,O);break;default:throw Error(l(161))}}catch(X){Ke(e,e.return,X)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function tf(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;tf(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Vn(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Qh(e,t.alternate,t),t=t.sibling}function Ia(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:sa(4,t,t.return),Ia(t);break;case 1:Tn(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&Gh(t,t.return,n),Ia(t);break;case 27:Dr(t.stateNode);case 26:case 5:Tn(t,t.return),Ia(t);break;case 22:t.memoizedState===null&&Ia(t);break;case 30:Ia(t);break;default:Ia(t)}e=e.sibling}}function $n(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var i=t.alternate,c=e,h=t,y=h.flags;switch(h.tag){case 0:case 11:case 15:$n(c,h,n),wr(4,h);break;case 1:if($n(c,h,n),i=h,c=i.stateNode,typeof c.componentDidMount=="function")try{c.componentDidMount()}catch(P){Ke(i,i.return,P)}if(i=h,c=i.updateQueue,c!==null){var v=i.stateNode;try{var O=c.shared.hiddenCallbacks;if(O!==null)for(c.shared.hiddenCallbacks=null,c=0;c<O.length;c++)Ud(O[c],v)}catch(P){Ke(i,i.return,P)}}n&&y&64&&$h(h),Er(h,h.return);break;case 27:Yh(h);case 26:case 5:$n(c,h,n),n&&i===null&&y&4&&Ph(h),Er(h,h.return);break;case 12:$n(c,h,n);break;case 31:$n(c,h,n),n&&y&4&&Fh(c,h);break;case 13:$n(c,h,n),n&&y&4&&Wh(c,h);break;case 22:h.memoizedState===null&&$n(c,h,n),Er(h,h.return);break;case 30:break;default:$n(c,h,n)}t=t.sibling}}function ac(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&dr(n))}function ic(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&dr(e))}function _n(e,t,n,i){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)nf(e,t,n,i),t=t.sibling}function nf(e,t,n,i){var c=t.flags;switch(t.tag){case 0:case 11:case 15:_n(e,t,n,i),c&2048&&wr(9,t);break;case 1:_n(e,t,n,i);break;case 3:_n(e,t,n,i),c&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&dr(e)));break;case 12:if(c&2048){_n(e,t,n,i),e=t.stateNode;try{var h=t.memoizedProps,y=h.id,v=h.onPostCommit;typeof v=="function"&&v(y,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(O){Ke(t,t.return,O)}}else _n(e,t,n,i);break;case 31:_n(e,t,n,i);break;case 13:_n(e,t,n,i);break;case 23:break;case 22:h=t.stateNode,y=t.alternate,t.memoizedState!==null?h._visibility&2?_n(e,t,n,i):Tr(e,t):h._visibility&2?_n(e,t,n,i):(h._visibility|=2,Ti(e,t,n,i,(t.subtreeFlags&10256)!==0||!1)),c&2048&&ac(y,t);break;case 24:_n(e,t,n,i),c&2048&&ic(t.alternate,t);break;default:_n(e,t,n,i)}}function Ti(e,t,n,i,c){for(c=c&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var h=e,y=t,v=n,O=i,P=y.flags;switch(y.tag){case 0:case 11:case 15:Ti(h,y,v,O,c),wr(8,y);break;case 23:break;case 22:var X=y.stateNode;y.memoizedState!==null?X._visibility&2?Ti(h,y,v,O,c):Tr(h,y):(X._visibility|=2,Ti(h,y,v,O,c)),c&&P&2048&&ac(y.alternate,y);break;case 24:Ti(h,y,v,O,c),c&&P&2048&&ic(y.alternate,y);break;default:Ti(h,y,v,O,c)}t=t.sibling}}function Tr(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,i=t,c=i.flags;switch(i.tag){case 22:Tr(n,i),c&2048&&ac(i.alternate,i);break;case 24:Tr(n,i),c&2048&&ic(i.alternate,i);break;default:Tr(n,i)}t=t.sibling}}var Cr=8192;function Ci(e,t,n){if(e.subtreeFlags&Cr)for(e=e.child;e!==null;)af(e,t,n),e=e.sibling}function af(e,t,n){switch(e.tag){case 26:Ci(e,t,n),e.flags&Cr&&e.memoizedState!==null&&tv(n,bn,e.memoizedState,e.memoizedProps);break;case 5:Ci(e,t,n);break;case 3:case 4:var i=bn;bn=Xs(e.stateNode.containerInfo),Ci(e,t,n),bn=i;break;case 22:e.memoizedState===null&&(i=e.alternate,i!==null&&i.memoizedState!==null?(i=Cr,Cr=16777216,Ci(e,t,n),Cr=i):Ci(e,t,n));break;default:Ci(e,t,n)}}function rf(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Ar(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];jt=i,lf(i,e)}rf(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)sf(e),e=e.sibling}function sf(e){switch(e.tag){case 0:case 11:case 15:Ar(e),e.flags&2048&&sa(9,e,e.return);break;case 3:Ar(e);break;case 12:Ar(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Ms(e)):Ar(e);break;default:Ar(e)}}function Ms(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];jt=i,lf(i,e)}rf(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:sa(8,t,t.return),Ms(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,Ms(t));break;default:Ms(t)}e=e.sibling}}function lf(e,t){for(;jt!==null;){var n=jt;switch(n.tag){case 0:case 11:case 15:sa(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:dr(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,jt=i;else e:for(n=e;jt!==null;){i=jt;var c=i.sibling,h=i.return;if(Xh(i),i===n){jt=null;break e}if(c!==null){c.return=h,jt=c;break e}jt=h}}}var my={getCacheForType:function(e){var t=Et(ht),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return Et(ht).controller.signal}},yy=typeof WeakMap=="function"?WeakMap:Map,Ve=0,Fe=null,ke=null,ze=0,Pe=0,Jt=null,la=!1,Ai=!1,rc=!1,Gn=0,ct=0,oa=0,Va=0,sc=0,Qt=0,Oi=0,Or=null,Vt=null,lc=!1,Ls=0,of=0,qs=1/0,Hs=null,ca=null,vt=0,ua=null,Ri=null,Pn=0,oc=0,cc=null,cf=null,Rr=0,uc=null;function Xt(){return(Ve&2)!==0&&ze!==0?ze&-ze:D.T!==null?mc():Ea()}function uf(){if(Qt===0)if((ze&536870912)===0||Me){var e=Za;Za<<=1,(Za&3932160)===0&&(Za=262144),Qt=e}else Qt=536870912;return e=Kt.current,e!==null&&(e.flags|=32),Qt}function $t(e,t,n){(e===Fe&&(Pe===2||Pe===9)||e.cancelPendingCommit!==null)&&(Ni(e,0),da(e,ze,Qt,!1)),Je(e,n),((Ve&2)===0||e!==Fe)&&(e===Fe&&((Ve&2)===0&&(Va|=n),ct===4&&da(e,ze,Qt,!1)),Cn(e))}function df(e,t,n){if((Ve&6)!==0)throw Error(l(327));var i=!n&&(t&127)===0&&(t&e.expiredLanes)===0||ge(e,t),c=i?_y(e,t):hc(e,t,!0),h=i;do{if(c===0){Ai&&!i&&da(e,t,0,!1);break}else{if(n=e.current.alternate,h&&!vy(n)){c=hc(e,t,!1),h=!1;continue}if(c===2){if(h=t,e.errorRecoveryDisabledLanes&h)var y=0;else y=e.pendingLanes&-536870913,y=y!==0?y:y&536870912?536870912:0;if(y!==0){t=y;e:{var v=e;c=Or;var O=v.current.memoizedState.isDehydrated;if(O&&(Ni(v,y).flags|=256),y=hc(v,y,!1),y!==2){if(rc&&!O){v.errorRecoveryDisabledLanes|=h,Va|=h,c=4;break e}h=Vt,Vt=c,h!==null&&(Vt===null?Vt=h:Vt.push.apply(Vt,h))}c=y}if(h=!1,c!==2)continue}}if(c===1){Ni(e,0),da(e,t,0,!0);break}e:{switch(i=e,h=c,h){case 0:case 1:throw Error(l(345));case 4:if((t&4194048)!==t)break;case 6:da(i,t,Qt,!la);break e;case 2:Vt=null;break;case 3:case 5:break;default:throw Error(l(329))}if((t&62914560)===t&&(c=Ls+300-Ut(),10<c)){if(da(i,t,Qt,!la),re(i,0,!0)!==0)break e;Pn=t,i.timeoutHandle=Vf(hf.bind(null,i,n,Vt,Hs,lc,t,Qt,Va,Oi,la,h,"Throttled",-0,0),c);break e}hf(i,n,Vt,Hs,lc,t,Qt,Va,Oi,la,h,null,-0,0)}}break}while(!0);Cn(e)}function hf(e,t,n,i,c,h,y,v,O,P,X,W,K,Q){if(e.timeoutHandle=-1,W=t.subtreeFlags,W&8192||(W&16785408)===16785408){W={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Rn},af(t,h,W);var me=(h&62914560)===h?Ls-Ut():(h&4194048)===h?of-Ut():0;if(me=nv(W,me),me!==null){Pn=h,e.cancelPendingCommit=me(_f.bind(null,e,t,h,n,i,c,y,v,O,X,W,null,K,Q)),da(e,h,y,!P);return}}_f(e,t,h,n,i,c,y,v,O)}function vy(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var c=n[i],h=c.getSnapshot;c=c.value;try{if(!Gt(h(),c))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function da(e,t,n,i){t&=~sc,t&=~Va,e.suspendedLanes|=t,e.pingedLanes&=~t,i&&(e.warmLanes|=t),i=e.expirationTimes;for(var c=t;0<c;){var h=31-Ot(c),y=1<<h;i[h]=-1,c&=~y}n!==0&&ve(e,n,t)}function Is(){return(Ve&6)===0?(Nr(0),!1):!0}function dc(){if(ke!==null){if(Pe===0)var e=ke.return;else e=ke,Dn=ka=null,Co(e),xi=null,fr=0,e=ke;for(;e!==null;)Vh(e.alternate,e),e=e.return;ke=null}}function Ni(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,Ly(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),Pn=0,dc(),Fe=e,ke=n=Un(e.current,null),ze=t,Pe=0,Jt=null,la=!1,Ai=ge(e,t),rc=!1,Oi=Qt=sc=Va=oa=ct=0,Vt=Or=null,lc=!1,(t&8)!==0&&(t|=t&32);var i=e.entangledLanes;if(i!==0)for(e=e.entanglements,i&=t;0<i;){var c=31-Ot(i),h=1<<c;t|=e[c],i&=~h}return Gn=t,os(),n}function ff(e,t){Ae=null,D.H=xr,t===_i||t===ms?(t=Ad(),Pe=3):t===po?(t=Ad(),Pe=4):Pe=t===$o?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Jt=t,ke===null&&(ct=1,Rs(e,sn(t,e.current)))}function gf(){var e=Kt.current;return e===null?!0:(ze&4194048)===ze?un===null:(ze&62914560)===ze||(ze&536870912)!==0?e===un:!1}function pf(){var e=D.H;return D.H=xr,e===null?xr:e}function mf(){var e=D.A;return D.A=my,e}function Vs(){ct=4,la||(ze&4194048)!==ze&&Kt.current!==null||(Ai=!0),(oa&134217727)===0&&(Va&134217727)===0||Fe===null||da(Fe,ze,Qt,!1)}function hc(e,t,n){var i=Ve;Ve|=2;var c=pf(),h=mf();(Fe!==e||ze!==t)&&(Hs=null,Ni(e,t)),t=!1;var y=ct;e:do try{if(Pe!==0&&ke!==null){var v=ke,O=Jt;switch(Pe){case 8:dc(),y=6;break e;case 3:case 2:case 9:case 6:Kt.current===null&&(t=!0);var P=Pe;if(Pe=0,Jt=null,Ui(e,v,O,P),n&&Ai){y=0;break e}break;default:P=Pe,Pe=0,Jt=null,Ui(e,v,O,P)}}by(),y=ct;break}catch(X){ff(e,X)}while(!0);return t&&e.shellSuspendCounter++,Dn=ka=null,Ve=i,D.H=c,D.A=h,ke===null&&(Fe=null,ze=0,os()),y}function by(){for(;ke!==null;)yf(ke)}function _y(e,t){var n=Ve;Ve|=2;var i=pf(),c=mf();Fe!==e||ze!==t?(Hs=null,qs=Ut()+500,Ni(e,t)):Ai=ge(e,t);e:do try{if(Pe!==0&&ke!==null){t=ke;var h=Jt;t:switch(Pe){case 1:Pe=0,Jt=null,Ui(e,t,h,1);break;case 2:case 9:if(Td(h)){Pe=0,Jt=null,vf(t);break}t=function(){Pe!==2&&Pe!==9||Fe!==e||(Pe=7),Cn(e)},h.then(t,t);break e;case 3:Pe=7;break e;case 4:Pe=5;break e;case 7:Td(h)?(Pe=0,Jt=null,vf(t)):(Pe=0,Jt=null,Ui(e,t,h,7));break;case 5:var y=null;switch(ke.tag){case 26:y=ke.memoizedState;case 5:case 27:var v=ke;if(y?ag(y):v.stateNode.complete){Pe=0,Jt=null;var O=v.sibling;if(O!==null)ke=O;else{var P=v.return;P!==null?(ke=P,$s(P)):ke=null}break t}}Pe=0,Jt=null,Ui(e,t,h,5);break;case 6:Pe=0,Jt=null,Ui(e,t,h,6);break;case 8:dc(),ct=6;break e;default:throw Error(l(462))}}xy();break}catch(X){ff(e,X)}while(!0);return Dn=ka=null,D.H=i,D.A=c,Ve=n,ke!==null?0:(Fe=null,ze=0,os(),ct)}function xy(){for(;ke!==null&&!wa();)yf(ke)}function yf(e){var t=Hh(e.alternate,e,Gn);e.memoizedProps=e.pendingProps,t===null?$s(e):ke=t}function vf(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Dh(n,t,t.pendingProps,t.type,void 0,ze);break;case 11:t=Dh(n,t,t.pendingProps,t.type.render,t.ref,ze);break;case 5:Co(t);default:Vh(n,t),t=ke=pd(t,Gn),t=Hh(n,t,Gn)}e.memoizedProps=e.pendingProps,t===null?$s(e):ke=t}function Ui(e,t,n,i){Dn=ka=null,Co(t),xi=null,fr=0;var c=t.return;try{if(cy(e,c,t,n,ze)){ct=1,Rs(e,sn(n,e.current)),ke=null;return}}catch(h){if(c!==null)throw ke=c,h;ct=1,Rs(e,sn(n,e.current)),ke=null;return}t.flags&32768?(Me||i===1?e=!0:Ai||(ze&536870912)!==0?e=!1:(la=e=!0,(i===2||i===9||i===3||i===6)&&(i=Kt.current,i!==null&&i.tag===13&&(i.flags|=16384))),bf(t,e)):$s(t)}function $s(e){var t=e;do{if((t.flags&32768)!==0){bf(t,la);return}e=t.return;var n=hy(t.alternate,t,Gn);if(n!==null){ke=n;return}if(t=t.sibling,t!==null){ke=t;return}ke=t=e}while(t!==null);ct===0&&(ct=5)}function bf(e,t){do{var n=fy(e.alternate,e);if(n!==null){n.flags&=32767,ke=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){ke=e;return}ke=e=n}while(e!==null);ct=6,ke=null}function _f(e,t,n,i,c,h,y,v,O){e.cancelPendingCommit=null;do Gs();while(vt!==0);if((Ve&6)!==0)throw Error(l(327));if(t!==null){if(t===e.current)throw Error(l(177));if(h=t.lanes|t.childLanes,h|=Wl,st(e,n,h,y,v,O),e===Fe&&(ke=Fe=null,ze=0),Ri=t,ua=e,Pn=n,oc=h,cc=c,cf=i,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Ey(en,function(){return Ef(),null})):(e.callbackNode=null,e.callbackPriority=0),i=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||i){i=D.T,D.T=null,c=L.p,L.p=2,y=Ve,Ve|=4;try{gy(e,t,n)}finally{Ve=y,L.p=c,D.T=i}}vt=1,xf(),jf(),Sf()}}function xf(){if(vt===1){vt=0;var e=ua,t=Ri,n=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||n){n=D.T,D.T=null;var i=L.p;L.p=2;var c=Ve;Ve|=4;try{ef(t,e);var h=wc,y=sd(e.containerInfo),v=h.focusedElem,O=h.selectionRange;if(y!==v&&v&&v.ownerDocument&&rd(v.ownerDocument.documentElement,v)){if(O!==null&&Jl(v)){var P=O.start,X=O.end;if(X===void 0&&(X=P),"selectionStart"in v)v.selectionStart=P,v.selectionEnd=Math.min(X,v.value.length);else{var W=v.ownerDocument||document,K=W&&W.defaultView||window;if(K.getSelection){var Q=K.getSelection(),me=v.textContent.length,Se=Math.min(O.start,me),Ze=O.end===void 0?Se:Math.min(O.end,me);!Q.extend&&Se>Ze&&(y=Ze,Ze=Se,Se=y);var q=id(v,Se),N=id(v,Ze);if(q&&N&&(Q.rangeCount!==1||Q.anchorNode!==q.node||Q.anchorOffset!==q.offset||Q.focusNode!==N.node||Q.focusOffset!==N.offset)){var $=W.createRange();$.setStart(q.node,q.offset),Q.removeAllRanges(),Se>Ze?(Q.addRange($),Q.extend(N.node,N.offset)):($.setEnd(N.node,N.offset),Q.addRange($))}}}}for(W=[],Q=v;Q=Q.parentNode;)Q.nodeType===1&&W.push({element:Q,left:Q.scrollLeft,top:Q.scrollTop});for(typeof v.focus=="function"&&v.focus(),v=0;v<W.length;v++){var F=W[v];F.element.scrollLeft=F.left,F.element.scrollTop=F.top}}nl=!!Sc,wc=Sc=null}finally{Ve=c,L.p=i,D.T=n}}e.current=t,vt=2}}function jf(){if(vt===2){vt=0;var e=ua,t=Ri,n=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||n){n=D.T,D.T=null;var i=L.p;L.p=2;var c=Ve;Ve|=4;try{Qh(e,t.alternate,t)}finally{Ve=c,L.p=i,D.T=n}}vt=3}}function Sf(){if(vt===4||vt===3){vt=0,El();var e=ua,t=Ri,n=Pn,i=cf;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?vt=5:(vt=0,Ri=ua=null,wf(e,e.pendingLanes));var c=e.pendingLanes;if(c===0&&(ca=null),Ge(n),t=t.stateNode,Ye&&typeof Ye.onCommitFiberRoot=="function")try{Ye.onCommitFiberRoot(An,t,void 0,(t.current.flags&128)===128)}catch{}if(i!==null){t=D.T,c=L.p,L.p=2,D.T=null;try{for(var h=e.onRecoverableError,y=0;y<i.length;y++){var v=i[y];h(v.value,{componentStack:v.stack})}}finally{D.T=t,L.p=c}}(Pn&3)!==0&&Gs(),Cn(e),c=e.pendingLanes,(n&261930)!==0&&(c&42)!==0?e===uc?Rr++:(Rr=0,uc=e):Rr=0,Nr(0)}}function wf(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,dr(t)))}function Gs(){return xf(),jf(),Sf(),Ef()}function Ef(){if(vt!==5)return!1;var e=ua,t=oc;oc=0;var n=Ge(Pn),i=D.T,c=L.p;try{L.p=32>n?32:n,D.T=null,n=cc,cc=null;var h=ua,y=Pn;if(vt=0,Ri=ua=null,Pn=0,(Ve&6)!==0)throw Error(l(331));var v=Ve;if(Ve|=4,sf(h.current),nf(h,h.current,y,n),Ve=v,Nr(0,!1),Ye&&typeof Ye.onPostCommitFiberRoot=="function")try{Ye.onPostCommitFiberRoot(An,h)}catch{}return!0}finally{L.p=c,D.T=i,wf(e,t)}}function Tf(e,t,n){t=sn(n,t),t=Vo(e.stateNode,t,2),e=aa(e,t,2),e!==null&&(Je(e,2),Cn(e))}function Ke(e,t,n){if(e.tag===3)Tf(e,e,n);else for(;t!==null;){if(t.tag===3){Tf(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(ca===null||!ca.has(i))){e=sn(n,e),n=Th(2),i=aa(t,n,2),i!==null&&(Ch(n,i,t,e),Je(i,2),Cn(i));break}}t=t.return}}function fc(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new yy;var c=new Set;i.set(t,c)}else c=i.get(t),c===void 0&&(c=new Set,i.set(t,c));c.has(n)||(rc=!0,c.add(n),e=jy.bind(null,e,t,n),t.then(e,e))}function jy(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,Fe===e&&(ze&n)===n&&(ct===4||ct===3&&(ze&62914560)===ze&&300>Ut()-Ls?(Ve&2)===0&&Ni(e,0):sc|=n,Oi===ze&&(Oi=0)),Cn(e)}function Cf(e,t){t===0&&(t=Re()),e=Ra(e,t),e!==null&&(Je(e,t),Cn(e))}function Sy(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Cf(e,n)}function wy(e,t){var n=0;switch(e.tag){case 31:case 13:var i=e.stateNode,c=e.memoizedState;c!==null&&(n=c.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(l(314))}i!==null&&i.delete(t),Cf(e,n)}function Ey(e,t){return rt(e,t)}var Ps=null,ki=null,gc=!1,Ks=!1,pc=!1,ha=0;function Cn(e){e!==ki&&e.next===null&&(ki===null?Ps=ki=e:ki=ki.next=e),Ks=!0,gc||(gc=!0,Cy())}function Nr(e,t){if(!pc&&Ks){pc=!0;do for(var n=!1,i=Ps;i!==null;){if(e!==0){var c=i.pendingLanes;if(c===0)var h=0;else{var y=i.suspendedLanes,v=i.pingedLanes;h=(1<<31-Ot(42|e)+1)-1,h&=c&~(y&~v),h=h&201326741?h&201326741|1:h?h|2:0}h!==0&&(n=!0,Nf(i,h))}else h=ze,h=re(i,i===Fe?h:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),(h&3)===0||ge(i,h)||(n=!0,Nf(i,h));i=i.next}while(n);pc=!1}}function Ty(){Af()}function Af(){Ks=gc=!1;var e=0;ha!==0&&My()&&(e=ha);for(var t=Ut(),n=null,i=Ps;i!==null;){var c=i.next,h=Of(i,t);h===0?(i.next=null,n===null?Ps=c:n.next=c,c===null&&(ki=n)):(n=i,(e!==0||(h&3)!==0)&&(Ks=!0)),i=c}vt!==0&&vt!==5||Nr(e),ha!==0&&(ha=0)}function Of(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,c=e.expirationTimes,h=e.pendingLanes&-62914561;0<h;){var y=31-Ot(h),v=1<<y,O=c[y];O===-1?((v&n)===0||(v&i)!==0)&&(c[y]=_e(v,t)):O<=t&&(e.expiredLanes|=v),h&=~v}if(t=Fe,n=ze,n=re(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i=e.callbackNode,n===0||e===t&&(Pe===2||Pe===9)||e.cancelPendingCommit!==null)return i!==null&&i!==null&&at(i),e.callbackNode=null,e.callbackPriority=0;if((n&3)===0||ge(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(i!==null&&at(i),Ge(n)){case 2:case 8:n=yn;break;case 32:n=en;break;case 268435456:n=Zi;break;default:n=en}return i=Rf.bind(null,e),n=rt(n,i),e.callbackPriority=t,e.callbackNode=n,t}return i!==null&&i!==null&&at(i),e.callbackPriority=2,e.callbackNode=null,2}function Rf(e,t){if(vt!==0&&vt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(Gs()&&e.callbackNode!==n)return null;var i=ze;return i=re(e,e===Fe?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i===0?null:(df(e,i,t),Of(e,Ut()),e.callbackNode!=null&&e.callbackNode===n?Rf.bind(null,e):null)}function Nf(e,t){if(Gs())return null;df(e,t,!0)}function Cy(){qy(function(){(Ve&6)!==0?rt(Xi,Ty):Af()})}function mc(){if(ha===0){var e=vi;e===0&&(e=Jn,Jn<<=1,(Jn&261888)===0&&(Jn=256)),ha=e}return ha}function Uf(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:es(""+e)}function kf(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function Ay(e,t,n,i,c){if(t==="submit"&&n&&n.stateNode===c){var h=Uf((c[Mt]||null).action),y=i.submitter;y&&(t=(t=y[Mt]||null)?Uf(t.formAction):y.getAttribute("formAction"),t!==null&&(h=t,y=null));var v=new is("action","action",null,i,c);e.push({event:v,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(ha!==0){var O=y?kf(c,y):new FormData(c);Bo(n,{pending:!0,data:O,method:c.method,action:h},null,O)}}else typeof h=="function"&&(v.preventDefault(),O=y?kf(c,y):new FormData(c),Bo(n,{pending:!0,data:O,method:c.method,action:h},h,O))},currentTarget:c}]})}}for(var yc=0;yc<Fl.length;yc++){var vc=Fl[yc],Oy=vc.toLowerCase(),Ry=vc[0].toUpperCase()+vc.slice(1);vn(Oy,"on"+Ry)}vn(cd,"onAnimationEnd"),vn(ud,"onAnimationIteration"),vn(dd,"onAnimationStart"),vn("dblclick","onDoubleClick"),vn("focusin","onFocus"),vn("focusout","onBlur"),vn(Km,"onTransitionRun"),vn(Ym,"onTransitionStart"),vn(Jm,"onTransitionCancel"),vn(hd,"onTransitionEnd"),ii("onMouseEnter",["mouseout","mouseover"]),ii("onMouseLeave",["mouseout","mouseover"]),ii("onPointerEnter",["pointerout","pointerover"]),ii("onPointerLeave",["pointerout","pointerover"]),Ta("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ta("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ta("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ta("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ta("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ta("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ur="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ny=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ur));function Df(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var i=e[n],c=i.event;i=i.listeners;e:{var h=void 0;if(t)for(var y=i.length-1;0<=y;y--){var v=i[y],O=v.instance,P=v.currentTarget;if(v=v.listener,O!==h&&c.isPropagationStopped())break e;h=v,c.currentTarget=P;try{h(c)}catch(X){ls(X)}c.currentTarget=null,h=O}else for(y=0;y<i.length;y++){if(v=i[y],O=v.instance,P=v.currentTarget,v=v.listener,O!==h&&c.isPropagationStopped())break e;h=v,c.currentTarget=P;try{h(c)}catch(X){ls(X)}c.currentTarget=null,h=O}}}}function De(e,t){var n=t[Rl];n===void 0&&(n=t[Rl]=new Set);var i=e+"__bubble";n.has(i)||(zf(t,e,2,!1),n.add(i))}function bc(e,t,n){var i=0;t&&(i|=4),zf(n,e,i,t)}var Ys="_reactListening"+Math.random().toString(36).slice(2);function _c(e){if(!e[Ys]){e[Ys]=!0,Cu.forEach(function(n){n!=="selectionchange"&&(Ny.has(n)||bc(n,!1,e),bc(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ys]||(t[Ys]=!0,bc("selectionchange",!1,t))}}function zf(e,t,n,i){switch(ug(t)){case 2:var c=rv;break;case 8:c=sv;break;default:c=zc}n=c.bind(null,t,n,e),c=void 0,!ql||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),i?c!==void 0?e.addEventListener(t,n,{capture:!0,passive:c}):e.addEventListener(t,n,!0):c!==void 0?e.addEventListener(t,n,{passive:c}):e.addEventListener(t,n,!1)}function xc(e,t,n,i,c){var h=i;if((t&1)===0&&(t&2)===0&&i!==null)e:for(;;){if(i===null)return;var y=i.tag;if(y===3||y===4){var v=i.stateNode.containerInfo;if(v===c)break;if(y===4)for(y=i.return;y!==null;){var O=y.tag;if((O===3||O===4)&&y.stateNode.containerInfo===c)return;y=y.return}for(;v!==null;){if(y=ti(v),y===null)return;if(O=y.tag,O===5||O===6||O===26||O===27){i=h=y;continue e}v=v.parentNode}}i=i.return}qu(function(){var P=h,X=Ml(n),W=[];e:{var K=fd.get(e);if(K!==void 0){var Q=is,me=e;switch(e){case"keypress":if(ns(n)===0)break e;case"keydown":case"keyup":Q=wm;break;case"focusin":me="focus",Q=$l;break;case"focusout":me="blur",Q=$l;break;case"beforeblur":case"afterblur":Q=$l;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Q=Vu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Q=hm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Q=Cm;break;case cd:case ud:case dd:Q=pm;break;case hd:Q=Om;break;case"scroll":case"scrollend":Q=um;break;case"wheel":Q=Nm;break;case"copy":case"cut":case"paste":Q=ym;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Q=Gu;break;case"toggle":case"beforetoggle":Q=km}var Se=(t&4)!==0,Ze=!Se&&(e==="scroll"||e==="scrollend"),q=Se?K!==null?K+"Capture":null:K;Se=[];for(var N=P,$;N!==null;){var F=N;if($=F.stateNode,F=F.tag,F!==5&&F!==26&&F!==27||$===null||q===null||(F=er(N,q),F!=null&&Se.push(kr(N,F,$))),Ze)break;N=N.return}0<Se.length&&(K=new Q(K,me,null,n,X),W.push({event:K,listeners:Se}))}}if((t&7)===0){e:{if(K=e==="mouseover"||e==="pointerover",Q=e==="mouseout"||e==="pointerout",K&&n!==Bl&&(me=n.relatedTarget||n.fromElement)&&(ti(me)||me[ei]))break e;if((Q||K)&&(K=X.window===X?X:(K=X.ownerDocument)?K.defaultView||K.parentWindow:window,Q?(me=n.relatedTarget||n.toElement,Q=P,me=me?ti(me):null,me!==null&&(Ze=d(me),Se=me.tag,me!==Ze||Se!==5&&Se!==27&&Se!==6)&&(me=null)):(Q=null,me=P),Q!==me)){if(Se=Vu,F="onMouseLeave",q="onMouseEnter",N="mouse",(e==="pointerout"||e==="pointerover")&&(Se=Gu,F="onPointerLeave",q="onPointerEnter",N="pointer"),Ze=Q==null?K:Wi(Q),$=me==null?K:Wi(me),K=new Se(F,N+"leave",Q,n,X),K.target=Ze,K.relatedTarget=$,F=null,ti(X)===P&&(Se=new Se(q,N+"enter",me,n,X),Se.target=$,Se.relatedTarget=Ze,F=Se),Ze=F,Q&&me)t:{for(Se=Uy,q=Q,N=me,$=0,F=q;F;F=Se(F))$++;F=0;for(var je=N;je;je=Se(je))F++;for(;0<$-F;)q=Se(q),$--;for(;0<F-$;)N=Se(N),F--;for(;$--;){if(q===N||N!==null&&q===N.alternate){Se=q;break t}q=Se(q),N=Se(N)}Se=null}else Se=null;Q!==null&&Bf(W,K,Q,Se,!1),me!==null&&Ze!==null&&Bf(W,Ze,me,Se,!0)}}e:{if(K=P?Wi(P):window,Q=K.nodeName&&K.nodeName.toLowerCase(),Q==="select"||Q==="input"&&K.type==="file")var Le=Fu;else if(Xu(K))if(Wu)Le=$m;else{Le=Im;var ye=Hm}else Q=K.nodeName,!Q||Q.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?P&&zl(P.elementType)&&(Le=Fu):Le=Vm;if(Le&&(Le=Le(e,P))){Zu(W,Le,n,X);break e}ye&&ye(e,K,P),e==="focusout"&&P&&K.type==="number"&&P.memoizedProps.value!=null&&Dl(K,"number",K.value)}switch(ye=P?Wi(P):window,e){case"focusin":(Xu(ye)||ye.contentEditable==="true")&&(ui=ye,Ql=P,or=null);break;case"focusout":or=Ql=ui=null;break;case"mousedown":Xl=!0;break;case"contextmenu":case"mouseup":case"dragend":Xl=!1,ld(W,n,X);break;case"selectionchange":if(Pm)break;case"keydown":case"keyup":ld(W,n,X)}var Oe;if(Pl)e:{switch(e){case"compositionstart":var Be="onCompositionStart";break e;case"compositionend":Be="onCompositionEnd";break e;case"compositionupdate":Be="onCompositionUpdate";break e}Be=void 0}else ci?Ju(e,n)&&(Be="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(Be="onCompositionStart");Be&&(Pu&&n.locale!=="ko"&&(ci||Be!=="onCompositionStart"?Be==="onCompositionEnd"&&ci&&(Oe=Hu()):(Xn=X,Hl="value"in Xn?Xn.value:Xn.textContent,ci=!0)),ye=Js(P,Be),0<ye.length&&(Be=new $u(Be,e,null,n,X),W.push({event:Be,listeners:ye}),Oe?Be.data=Oe:(Oe=Qu(n),Oe!==null&&(Be.data=Oe)))),(Oe=zm?Bm(e,n):Mm(e,n))&&(Be=Js(P,"onBeforeInput"),0<Be.length&&(ye=new $u("onBeforeInput","beforeinput",null,n,X),W.push({event:ye,listeners:Be}),ye.data=Oe)),Ay(W,e,P,n,X)}Df(W,t)})}function kr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Js(e,t){for(var n=t+"Capture",i=[];e!==null;){var c=e,h=c.stateNode;if(c=c.tag,c!==5&&c!==26&&c!==27||h===null||(c=er(e,n),c!=null&&i.unshift(kr(e,c,h)),c=er(e,t),c!=null&&i.push(kr(e,c,h))),e.tag===3)return i;e=e.return}return[]}function Uy(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Bf(e,t,n,i,c){for(var h=t._reactName,y=[];n!==null&&n!==i;){var v=n,O=v.alternate,P=v.stateNode;if(v=v.tag,O!==null&&O===i)break;v!==5&&v!==26&&v!==27||P===null||(O=P,c?(P=er(n,h),P!=null&&y.unshift(kr(n,P,O))):c||(P=er(n,h),P!=null&&y.push(kr(n,P,O)))),n=n.return}y.length!==0&&e.push({event:t,listeners:y})}var ky=/\r\n?/g,Dy=/\u0000|\uFFFD/g;function Mf(e){return(typeof e=="string"?e:""+e).replace(ky,`
`).replace(Dy,"")}function Lf(e,t){return t=Mf(t),Mf(e)===t}function Xe(e,t,n,i,c,h){switch(n){case"children":typeof i=="string"?t==="body"||t==="textarea"&&i===""||si(e,i):(typeof i=="number"||typeof i=="bigint")&&t!=="body"&&si(e,""+i);break;case"className":Fr(e,"class",i);break;case"tabIndex":Fr(e,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":Fr(e,n,i);break;case"style":Mu(e,i,h);break;case"data":if(t!=="object"){Fr(e,"data",i);break}case"src":case"href":if(i===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=es(""+i),e.setAttribute(n,i);break;case"action":case"formAction":if(typeof i=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof h=="function"&&(n==="formAction"?(t!=="input"&&Xe(e,t,"name",c.name,c,null),Xe(e,t,"formEncType",c.formEncType,c,null),Xe(e,t,"formMethod",c.formMethod,c,null),Xe(e,t,"formTarget",c.formTarget,c,null)):(Xe(e,t,"encType",c.encType,c,null),Xe(e,t,"method",c.method,c,null),Xe(e,t,"target",c.target,c,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=es(""+i),e.setAttribute(n,i);break;case"onClick":i!=null&&(e.onclick=Rn);break;case"onScroll":i!=null&&De("scroll",e);break;case"onScrollEnd":i!=null&&De("scrollend",e);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(l(61));if(n=i.__html,n!=null){if(c.children!=null)throw Error(l(60));e.innerHTML=n}}break;case"multiple":e.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":e.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){e.removeAttribute("xlink:href");break}n=es(""+i),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""+i):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":i===!0?e.setAttribute(n,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,i):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?e.setAttribute(n,i):e.removeAttribute(n);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?e.removeAttribute(n):e.setAttribute(n,i);break;case"popover":De("beforetoggle",e),De("toggle",e),Zr(e,"popover",i);break;case"xlinkActuate":On(e,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":On(e,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":On(e,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":On(e,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":On(e,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":On(e,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":On(e,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":On(e,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":On(e,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":Zr(e,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=om.get(n)||n,Zr(e,n,i))}}function jc(e,t,n,i,c,h){switch(n){case"style":Mu(e,i,h);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(l(61));if(n=i.__html,n!=null){if(c.children!=null)throw Error(l(60));e.innerHTML=n}}break;case"children":typeof i=="string"?si(e,i):(typeof i=="number"||typeof i=="bigint")&&si(e,""+i);break;case"onScroll":i!=null&&De("scroll",e);break;case"onScrollEnd":i!=null&&De("scrollend",e);break;case"onClick":i!=null&&(e.onclick=Rn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Au.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(c=n.endsWith("Capture"),t=n.slice(2,c?n.length-7:void 0),h=e[Mt]||null,h=h!=null?h[n]:null,typeof h=="function"&&e.removeEventListener(t,h,c),typeof i=="function")){typeof h!="function"&&h!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,i,c);break e}n in e?e[n]=i:i===!0?e.setAttribute(n,""):Zr(e,n,i)}}}function Ct(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":De("error",e),De("load",e);var i=!1,c=!1,h;for(h in n)if(n.hasOwnProperty(h)){var y=n[h];if(y!=null)switch(h){case"src":i=!0;break;case"srcSet":c=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(l(137,t));default:Xe(e,t,h,y,n,null)}}c&&Xe(e,t,"srcSet",n.srcSet,n,null),i&&Xe(e,t,"src",n.src,n,null);return;case"input":De("invalid",e);var v=h=y=c=null,O=null,P=null;for(i in n)if(n.hasOwnProperty(i)){var X=n[i];if(X!=null)switch(i){case"name":c=X;break;case"type":y=X;break;case"checked":O=X;break;case"defaultChecked":P=X;break;case"value":h=X;break;case"defaultValue":v=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(l(137,t));break;default:Xe(e,t,i,X,n,null)}}ku(e,h,v,O,P,y,c,!1);return;case"select":De("invalid",e),i=y=h=null;for(c in n)if(n.hasOwnProperty(c)&&(v=n[c],v!=null))switch(c){case"value":h=v;break;case"defaultValue":y=v;break;case"multiple":i=v;default:Xe(e,t,c,v,n,null)}t=h,n=y,e.multiple=!!i,t!=null?ri(e,!!i,t,!1):n!=null&&ri(e,!!i,n,!0);return;case"textarea":De("invalid",e),h=c=i=null;for(y in n)if(n.hasOwnProperty(y)&&(v=n[y],v!=null))switch(y){case"value":i=v;break;case"defaultValue":c=v;break;case"children":h=v;break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(l(91));break;default:Xe(e,t,y,v,n,null)}zu(e,i,c,h);return;case"option":for(O in n)if(n.hasOwnProperty(O)&&(i=n[O],i!=null))switch(O){case"selected":e.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:Xe(e,t,O,i,n,null)}return;case"dialog":De("beforetoggle",e),De("toggle",e),De("cancel",e),De("close",e);break;case"iframe":case"object":De("load",e);break;case"video":case"audio":for(i=0;i<Ur.length;i++)De(Ur[i],e);break;case"image":De("error",e),De("load",e);break;case"details":De("toggle",e);break;case"embed":case"source":case"link":De("error",e),De("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(P in n)if(n.hasOwnProperty(P)&&(i=n[P],i!=null))switch(P){case"children":case"dangerouslySetInnerHTML":throw Error(l(137,t));default:Xe(e,t,P,i,n,null)}return;default:if(zl(t)){for(X in n)n.hasOwnProperty(X)&&(i=n[X],i!==void 0&&jc(e,t,X,i,n,void 0));return}}for(v in n)n.hasOwnProperty(v)&&(i=n[v],i!=null&&Xe(e,t,v,i,n,null))}function zy(e,t,n,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var c=null,h=null,y=null,v=null,O=null,P=null,X=null;for(Q in n){var W=n[Q];if(n.hasOwnProperty(Q)&&W!=null)switch(Q){case"checked":break;case"value":break;case"defaultValue":O=W;default:i.hasOwnProperty(Q)||Xe(e,t,Q,null,i,W)}}for(var K in i){var Q=i[K];if(W=n[K],i.hasOwnProperty(K)&&(Q!=null||W!=null))switch(K){case"type":h=Q;break;case"name":c=Q;break;case"checked":P=Q;break;case"defaultChecked":X=Q;break;case"value":y=Q;break;case"defaultValue":v=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(l(137,t));break;default:Q!==W&&Xe(e,t,K,Q,i,W)}}kl(e,y,v,O,P,X,h,c);return;case"select":Q=y=v=K=null;for(h in n)if(O=n[h],n.hasOwnProperty(h)&&O!=null)switch(h){case"value":break;case"multiple":Q=O;default:i.hasOwnProperty(h)||Xe(e,t,h,null,i,O)}for(c in i)if(h=i[c],O=n[c],i.hasOwnProperty(c)&&(h!=null||O!=null))switch(c){case"value":K=h;break;case"defaultValue":v=h;break;case"multiple":y=h;default:h!==O&&Xe(e,t,c,h,i,O)}t=v,n=y,i=Q,K!=null?ri(e,!!n,K,!1):!!i!=!!n&&(t!=null?ri(e,!!n,t,!0):ri(e,!!n,n?[]:"",!1));return;case"textarea":Q=K=null;for(v in n)if(c=n[v],n.hasOwnProperty(v)&&c!=null&&!i.hasOwnProperty(v))switch(v){case"value":break;case"children":break;default:Xe(e,t,v,null,i,c)}for(y in i)if(c=i[y],h=n[y],i.hasOwnProperty(y)&&(c!=null||h!=null))switch(y){case"value":K=c;break;case"defaultValue":Q=c;break;case"children":break;case"dangerouslySetInnerHTML":if(c!=null)throw Error(l(91));break;default:c!==h&&Xe(e,t,y,c,i,h)}Du(e,K,Q);return;case"option":for(var me in n)if(K=n[me],n.hasOwnProperty(me)&&K!=null&&!i.hasOwnProperty(me))switch(me){case"selected":e.selected=!1;break;default:Xe(e,t,me,null,i,K)}for(O in i)if(K=i[O],Q=n[O],i.hasOwnProperty(O)&&K!==Q&&(K!=null||Q!=null))switch(O){case"selected":e.selected=K&&typeof K!="function"&&typeof K!="symbol";break;default:Xe(e,t,O,K,i,Q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Se in n)K=n[Se],n.hasOwnProperty(Se)&&K!=null&&!i.hasOwnProperty(Se)&&Xe(e,t,Se,null,i,K);for(P in i)if(K=i[P],Q=n[P],i.hasOwnProperty(P)&&K!==Q&&(K!=null||Q!=null))switch(P){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(l(137,t));break;default:Xe(e,t,P,K,i,Q)}return;default:if(zl(t)){for(var Ze in n)K=n[Ze],n.hasOwnProperty(Ze)&&K!==void 0&&!i.hasOwnProperty(Ze)&&jc(e,t,Ze,void 0,i,K);for(X in i)K=i[X],Q=n[X],!i.hasOwnProperty(X)||K===Q||K===void 0&&Q===void 0||jc(e,t,X,K,i,Q);return}}for(var q in n)K=n[q],n.hasOwnProperty(q)&&K!=null&&!i.hasOwnProperty(q)&&Xe(e,t,q,null,i,K);for(W in i)K=i[W],Q=n[W],!i.hasOwnProperty(W)||K===Q||K==null&&Q==null||Xe(e,t,W,K,i,Q)}function qf(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function By(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,n=performance.getEntriesByType("resource"),i=0;i<n.length;i++){var c=n[i],h=c.transferSize,y=c.initiatorType,v=c.duration;if(h&&v&&qf(y)){for(y=0,v=c.responseEnd,i+=1;i<n.length;i++){var O=n[i],P=O.startTime;if(P>v)break;var X=O.transferSize,W=O.initiatorType;X&&qf(W)&&(O=O.responseEnd,y+=X*(O<v?1:(v-P)/(O-P)))}if(--i,t+=8*(h+y)/(c.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Sc=null,wc=null;function Qs(e){return e.nodeType===9?e:e.ownerDocument}function Hf(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function If(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Ec(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Tc=null;function My(){var e=window.event;return e&&e.type==="popstate"?e===Tc?!1:(Tc=e,!0):(Tc=null,!1)}var Vf=typeof setTimeout=="function"?setTimeout:void 0,Ly=typeof clearTimeout=="function"?clearTimeout:void 0,$f=typeof Promise=="function"?Promise:void 0,qy=typeof queueMicrotask=="function"?queueMicrotask:typeof $f<"u"?function(e){return $f.resolve(null).then(e).catch(Hy)}:Vf;function Hy(e){setTimeout(function(){throw e})}function fa(e){return e==="head"}function Gf(e,t){var n=t,i=0;do{var c=n.nextSibling;if(e.removeChild(n),c&&c.nodeType===8)if(n=c.data,n==="/$"||n==="/&"){if(i===0){e.removeChild(c),Mi(t);return}i--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")i++;else if(n==="html")Dr(e.ownerDocument.documentElement);else if(n==="head"){n=e.ownerDocument.head,Dr(n);for(var h=n.firstChild;h;){var y=h.nextSibling,v=h.nodeName;h[Fi]||v==="SCRIPT"||v==="STYLE"||v==="LINK"&&h.rel.toLowerCase()==="stylesheet"||n.removeChild(h),h=y}}else n==="body"&&Dr(e.ownerDocument.body);n=c}while(n);Mi(t)}function Pf(e,t){var n=e;e=0;do{var i=n.nextSibling;if(n.nodeType===1?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(e===0)break;e--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||e++;n=i}while(n)}function Cc(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Cc(n),Nl(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function Iy(e,t,n,i){for(;e.nodeType===1;){var c=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!i&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(i){if(!e[Fi])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(h=e.getAttribute("rel"),h==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(h!==c.rel||e.getAttribute("href")!==(c.href==null||c.href===""?null:c.href)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin)||e.getAttribute("title")!==(c.title==null?null:c.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(h=e.getAttribute("src"),(h!==(c.src==null?null:c.src)||e.getAttribute("type")!==(c.type==null?null:c.type)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin))&&h&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var h=c.name==null?null:""+c.name;if(c.type==="hidden"&&e.getAttribute("name")===h)return e}else return e;if(e=dn(e.nextSibling),e===null)break}return null}function Vy(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=dn(e.nextSibling),e===null))return null;return e}function Kf(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=dn(e.nextSibling),e===null))return null;return e}function Ac(e){return e.data==="$?"||e.data==="$~"}function Oc(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function $y(e,t){var n=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||n.readyState!=="loading")t();else{var i=function(){t(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),e._reactRetry=i}}function dn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var Rc=null;function Yf(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"||n==="/&"){if(t===0)return dn(e.nextSibling);t--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||t++}e=e.nextSibling}return null}function Jf(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(t===0)return e;t--}else n!=="/$"&&n!=="/&"||t++}e=e.previousSibling}return null}function Qf(e,t,n){switch(t=Qs(n),e){case"html":if(e=t.documentElement,!e)throw Error(l(452));return e;case"head":if(e=t.head,!e)throw Error(l(453));return e;case"body":if(e=t.body,!e)throw Error(l(454));return e;default:throw Error(l(451))}}function Dr(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Nl(e)}var hn=new Map,Xf=new Set;function Xs(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Kn=L.d;L.d={f:Gy,r:Py,D:Ky,C:Yy,L:Jy,m:Qy,X:Zy,S:Xy,M:Fy};function Gy(){var e=Kn.f(),t=Is();return e||t}function Py(e){var t=ni(e);t!==null&&t.tag===5&&t.type==="form"?hh(t):Kn.r(e)}var Di=typeof document>"u"?null:document;function Zf(e,t,n){var i=Di;if(i&&typeof t=="string"&&t){var c=an(t);c='link[rel="'+e+'"][href="'+c+'"]',typeof n=="string"&&(c+='[crossorigin="'+n+'"]'),Xf.has(c)||(Xf.add(c),e={rel:e,crossOrigin:n,href:t},i.querySelector(c)===null&&(t=i.createElement("link"),Ct(t,"link",e),xt(t),i.head.appendChild(t)))}}function Ky(e){Kn.D(e),Zf("dns-prefetch",e,null)}function Yy(e,t){Kn.C(e,t),Zf("preconnect",e,t)}function Jy(e,t,n){Kn.L(e,t,n);var i=Di;if(i&&e&&t){var c='link[rel="preload"][as="'+an(t)+'"]';t==="image"&&n&&n.imageSrcSet?(c+='[imagesrcset="'+an(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(c+='[imagesizes="'+an(n.imageSizes)+'"]')):c+='[href="'+an(e)+'"]';var h=c;switch(t){case"style":h=zi(e);break;case"script":h=Bi(e)}hn.has(h)||(e=x({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),hn.set(h,e),i.querySelector(c)!==null||t==="style"&&i.querySelector(zr(h))||t==="script"&&i.querySelector(Br(h))||(t=i.createElement("link"),Ct(t,"link",e),xt(t),i.head.appendChild(t)))}}function Qy(e,t){Kn.m(e,t);var n=Di;if(n&&e){var i=t&&typeof t.as=="string"?t.as:"script",c='link[rel="modulepreload"][as="'+an(i)+'"][href="'+an(e)+'"]',h=c;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":h=Bi(e)}if(!hn.has(h)&&(e=x({rel:"modulepreload",href:e},t),hn.set(h,e),n.querySelector(c)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Br(h)))return}i=n.createElement("link"),Ct(i,"link",e),xt(i),n.head.appendChild(i)}}}function Xy(e,t,n){Kn.S(e,t,n);var i=Di;if(i&&e){var c=ai(i).hoistableStyles,h=zi(e);t=t||"default";var y=c.get(h);if(!y){var v={loading:0,preload:null};if(y=i.querySelector(zr(h)))v.loading=5;else{e=x({rel:"stylesheet",href:e,"data-precedence":t},n),(n=hn.get(h))&&Nc(e,n);var O=y=i.createElement("link");xt(O),Ct(O,"link",e),O._p=new Promise(function(P,X){O.onload=P,O.onerror=X}),O.addEventListener("load",function(){v.loading|=1}),O.addEventListener("error",function(){v.loading|=2}),v.loading|=4,Zs(y,t,i)}y={type:"stylesheet",instance:y,count:1,state:v},c.set(h,y)}}}function Zy(e,t){Kn.X(e,t);var n=Di;if(n&&e){var i=ai(n).hoistableScripts,c=Bi(e),h=i.get(c);h||(h=n.querySelector(Br(c)),h||(e=x({src:e,async:!0},t),(t=hn.get(c))&&Uc(e,t),h=n.createElement("script"),xt(h),Ct(h,"link",e),n.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},i.set(c,h))}}function Fy(e,t){Kn.M(e,t);var n=Di;if(n&&e){var i=ai(n).hoistableScripts,c=Bi(e),h=i.get(c);h||(h=n.querySelector(Br(c)),h||(e=x({src:e,async:!0,type:"module"},t),(t=hn.get(c))&&Uc(e,t),h=n.createElement("script"),xt(h),Ct(h,"link",e),n.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},i.set(c,h))}}function Ff(e,t,n,i){var c=(c=ee.current)?Xs(c):null;if(!c)throw Error(l(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=zi(n.href),n=ai(c).hoistableStyles,i=n.get(t),i||(i={type:"style",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=zi(n.href);var h=ai(c).hoistableStyles,y=h.get(e);if(y||(c=c.ownerDocument||c,y={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},h.set(e,y),(h=c.querySelector(zr(e)))&&!h._p&&(y.instance=h,y.state.loading=5),hn.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},hn.set(e,n),h||Wy(c,e,n,y.state))),t&&i===null)throw Error(l(528,""));return y}if(t&&i!==null)throw Error(l(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Bi(n),n=ai(c).hoistableScripts,i=n.get(t),i||(i={type:"script",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(l(444,e))}}function zi(e){return'href="'+an(e)+'"'}function zr(e){return'link[rel="stylesheet"]['+e+"]"}function Wf(e){return x({},e,{"data-precedence":e.precedence,precedence:null})}function Wy(e,t,n,i){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?i.loading=1:(t=e.createElement("link"),i.preload=t,t.addEventListener("load",function(){return i.loading|=1}),t.addEventListener("error",function(){return i.loading|=2}),Ct(t,"link",n),xt(t),e.head.appendChild(t))}function Bi(e){return'[src="'+an(e)+'"]'}function Br(e){return"script[async]"+e}function eg(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var i=e.querySelector('style[data-href~="'+an(n.href)+'"]');if(i)return t.instance=i,xt(i),i;var c=x({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return i=(e.ownerDocument||e).createElement("style"),xt(i),Ct(i,"style",c),Zs(i,n.precedence,e),t.instance=i;case"stylesheet":c=zi(n.href);var h=e.querySelector(zr(c));if(h)return t.state.loading|=4,t.instance=h,xt(h),h;i=Wf(n),(c=hn.get(c))&&Nc(i,c),h=(e.ownerDocument||e).createElement("link"),xt(h);var y=h;return y._p=new Promise(function(v,O){y.onload=v,y.onerror=O}),Ct(h,"link",i),t.state.loading|=4,Zs(h,n.precedence,e),t.instance=h;case"script":return h=Bi(n.src),(c=e.querySelector(Br(h)))?(t.instance=c,xt(c),c):(i=n,(c=hn.get(h))&&(i=x({},n),Uc(i,c)),e=e.ownerDocument||e,c=e.createElement("script"),xt(c),Ct(c,"link",i),e.head.appendChild(c),t.instance=c);case"void":return null;default:throw Error(l(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(i=t.instance,t.state.loading|=4,Zs(i,n.precedence,e));return t.instance}function Zs(e,t,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),c=i.length?i[i.length-1]:null,h=c,y=0;y<i.length;y++){var v=i[y];if(v.dataset.precedence===t)h=v;else if(h!==c)break}h?h.parentNode.insertBefore(e,h.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function Nc(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Uc(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Fs=null;function tg(e,t,n){if(Fs===null){var i=new Map,c=Fs=new Map;c.set(n,i)}else c=Fs,i=c.get(n),i||(i=new Map,c.set(n,i));if(i.has(e))return i;for(i.set(e,null),n=n.getElementsByTagName(e),c=0;c<n.length;c++){var h=n[c];if(!(h[Fi]||h[St]||e==="link"&&h.getAttribute("rel")==="stylesheet")&&h.namespaceURI!=="http://www.w3.org/2000/svg"){var y=h.getAttribute(t)||"";y=e+y;var v=i.get(y);v?v.push(h):i.set(y,[h])}}return i}function ng(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function ev(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function ag(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function tv(e,t,n,i){if(n.type==="stylesheet"&&(typeof i.media!="string"||matchMedia(i.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var c=zi(i.href),h=t.querySelector(zr(c));if(h){t=h._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Ws.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=h,xt(h);return}h=t.ownerDocument||t,i=Wf(i),(c=hn.get(c))&&Nc(i,c),h=h.createElement("link"),xt(h);var y=h;y._p=new Promise(function(v,O){y.onload=v,y.onerror=O}),Ct(h,"link",i),n.instance=h}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&(n.state.loading&3)===0&&(e.count++,n=Ws.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}var kc=0;function nv(e,t){return e.stylesheets&&e.count===0&&tl(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var i=setTimeout(function(){if(e.stylesheets&&tl(e,e.stylesheets),e.unsuspend){var h=e.unsuspend;e.unsuspend=null,h()}},6e4+t);0<e.imgBytes&&kc===0&&(kc=62500*By());var c=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&tl(e,e.stylesheets),e.unsuspend)){var h=e.unsuspend;e.unsuspend=null,h()}},(e.imgBytes>kc?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(i),clearTimeout(c)}}:null}function Ws(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)tl(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var el=null;function tl(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,el=new Map,t.forEach(av,e),el=null,Ws.call(e))}function av(e,t){if(!(t.state.loading&4)){var n=el.get(e);if(n)var i=n.get(null);else{n=new Map,el.set(e,n);for(var c=e.querySelectorAll("link[data-precedence],style[data-precedence]"),h=0;h<c.length;h++){var y=c[h];(y.nodeName==="LINK"||y.getAttribute("media")!=="not all")&&(n.set(y.dataset.precedence,y),i=y)}i&&n.set(null,i)}c=t.instance,y=c.getAttribute("data-precedence"),h=n.get(y)||i,h===i&&n.set(null,c),n.set(y,c),this.count++,i=Ws.bind(this),c.addEventListener("load",i),c.addEventListener("error",i),h?h.parentNode.insertBefore(c,h.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(c,e.firstChild)),t.state.loading|=4}}var Mr={$$typeof:M,Provider:null,Consumer:null,_currentValue:Z,_currentValue2:Z,_threadCount:0};function iv(e,t,n,i,c,h,y,v,O){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=$e(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$e(0),this.hiddenUpdates=$e(null),this.identifierPrefix=i,this.onUncaughtError=c,this.onCaughtError=h,this.onRecoverableError=y,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function ig(e,t,n,i,c,h,y,v,O,P,X,W){return e=new iv(e,t,n,y,O,P,X,W,v),t=1,h===!0&&(t|=24),h=Pt(3,null,null,t),e.current=h,h.stateNode=e,t=ho(),t.refCount++,e.pooledCache=t,t.refCount++,h.memoizedState={element:i,isDehydrated:n,cache:t},mo(h),e}function rg(e){return e?(e=fi,e):fi}function sg(e,t,n,i,c,h){c=rg(c),i.context===null?i.context=c:i.pendingContext=c,i=na(t),i.payload={element:n},h=h===void 0?null:h,h!==null&&(i.callback=h),n=aa(e,i,t),n!==null&&($t(n,e,t),pr(n,e,t))}function lg(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Dc(e,t){lg(e,t),(e=e.alternate)&&lg(e,t)}function og(e){if(e.tag===13||e.tag===31){var t=Ra(e,67108864);t!==null&&$t(t,e,67108864),Dc(e,67108864)}}function cg(e){if(e.tag===13||e.tag===31){var t=Xt();t=et(t);var n=Ra(e,t);n!==null&&$t(n,e,t),Dc(e,t)}}var nl=!0;function rv(e,t,n,i){var c=D.T;D.T=null;var h=L.p;try{L.p=2,zc(e,t,n,i)}finally{L.p=h,D.T=c}}function sv(e,t,n,i){var c=D.T;D.T=null;var h=L.p;try{L.p=8,zc(e,t,n,i)}finally{L.p=h,D.T=c}}function zc(e,t,n,i){if(nl){var c=Bc(i);if(c===null)xc(e,t,i,al,n),dg(e,i);else if(ov(c,e,t,n,i))i.stopPropagation();else if(dg(e,i),t&4&&-1<lv.indexOf(e)){for(;c!==null;){var h=ni(c);if(h!==null)switch(h.tag){case 3:if(h=h.stateNode,h.current.memoizedState.isDehydrated){var y=B(h.pendingLanes);if(y!==0){var v=h;for(v.pendingLanes|=2,v.entangledLanes|=2;y;){var O=1<<31-Ot(y);v.entanglements[1]|=O,y&=~O}Cn(h),(Ve&6)===0&&(qs=Ut()+500,Nr(0))}}break;case 31:case 13:v=Ra(h,2),v!==null&&$t(v,h,2),Is(),Dc(h,2)}if(h=Bc(i),h===null&&xc(e,t,i,al,n),h===c)break;c=h}c!==null&&i.stopPropagation()}else xc(e,t,i,null,n)}}function Bc(e){return e=Ml(e),Mc(e)}var al=null;function Mc(e){if(al=null,e=ti(e),e!==null){var t=d(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=f(t),e!==null)return e;e=null}else if(n===31){if(e=g(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return al=e,null}function ug(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Qi()){case Xi:return 2;case yn:return 8;case en:case Bt:return 32;case Zi:return 268435456;default:return 32}default:return 32}}var Lc=!1,ga=null,pa=null,ma=null,Lr=new Map,qr=new Map,ya=[],lv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function dg(e,t){switch(e){case"focusin":case"focusout":ga=null;break;case"dragenter":case"dragleave":pa=null;break;case"mouseover":case"mouseout":ma=null;break;case"pointerover":case"pointerout":Lr.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":qr.delete(t.pointerId)}}function Hr(e,t,n,i,c,h){return e===null||e.nativeEvent!==h?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:h,targetContainers:[c]},t!==null&&(t=ni(t),t!==null&&og(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function ov(e,t,n,i,c){switch(t){case"focusin":return ga=Hr(ga,e,t,n,i,c),!0;case"dragenter":return pa=Hr(pa,e,t,n,i,c),!0;case"mouseover":return ma=Hr(ma,e,t,n,i,c),!0;case"pointerover":var h=c.pointerId;return Lr.set(h,Hr(Lr.get(h)||null,e,t,n,i,c)),!0;case"gotpointercapture":return h=c.pointerId,qr.set(h,Hr(qr.get(h)||null,e,t,n,i,c)),!0}return!1}function hg(e){var t=ti(e.target);if(t!==null){var n=d(t);if(n!==null){if(t=n.tag,t===13){if(t=f(n),t!==null){e.blockedOn=t,Wa(e.priority,function(){cg(n)});return}}else if(t===31){if(t=g(n),t!==null){e.blockedOn=t,Wa(e.priority,function(){cg(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function il(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Bc(e.nativeEvent);if(n===null){n=e.nativeEvent;var i=new n.constructor(n.type,n);Bl=i,n.target.dispatchEvent(i),Bl=null}else return t=ni(n),t!==null&&og(t),e.blockedOn=n,!1;t.shift()}return!0}function fg(e,t,n){il(e)&&n.delete(t)}function cv(){Lc=!1,ga!==null&&il(ga)&&(ga=null),pa!==null&&il(pa)&&(pa=null),ma!==null&&il(ma)&&(ma=null),Lr.forEach(fg),qr.forEach(fg)}function rl(e,t){e.blockedOn===t&&(e.blockedOn=null,Lc||(Lc=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,cv)))}var sl=null;function gg(e){sl!==e&&(sl=e,o.unstable_scheduleCallback(o.unstable_NormalPriority,function(){sl===e&&(sl=null);for(var t=0;t<e.length;t+=3){var n=e[t],i=e[t+1],c=e[t+2];if(typeof i!="function"){if(Mc(i||n)===null)continue;break}var h=ni(n);h!==null&&(e.splice(t,3),t-=3,Bo(h,{pending:!0,data:c,method:n.method,action:i},i,c))}}))}function Mi(e){function t(O){return rl(O,e)}ga!==null&&rl(ga,e),pa!==null&&rl(pa,e),ma!==null&&rl(ma,e),Lr.forEach(t),qr.forEach(t);for(var n=0;n<ya.length;n++){var i=ya[n];i.blockedOn===e&&(i.blockedOn=null)}for(;0<ya.length&&(n=ya[0],n.blockedOn===null);)hg(n),n.blockedOn===null&&ya.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(i=0;i<n.length;i+=3){var c=n[i],h=n[i+1],y=c[Mt]||null;if(typeof h=="function")y||gg(n);else if(y){var v=null;if(h&&h.hasAttribute("formAction")){if(c=h,y=h[Mt]||null)v=y.formAction;else if(Mc(c)!==null)continue}else v=y.action;typeof v=="function"?n[i+1]=v:(n.splice(i,3),i-=3),gg(n)}}}function pg(){function e(h){h.canIntercept&&h.info==="react-transition"&&h.intercept({handler:function(){return new Promise(function(y){return c=y})},focusReset:"manual",scroll:"manual"})}function t(){c!==null&&(c(),c=null),i||setTimeout(n,20)}function n(){if(!i&&!navigation.transition){var h=navigation.currentEntry;h&&h.url!=null&&navigation.navigate(h.url,{state:h.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var i=!1,c=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){i=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),c!==null&&(c(),c=null)}}}function qc(e){this._internalRoot=e}ll.prototype.render=qc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(l(409));var n=t.current,i=Xt();sg(n,i,e,t,null,null)},ll.prototype.unmount=qc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;sg(e.current,2,null,e,null,null),Is(),t[ei]=null}};function ll(e){this._internalRoot=e}ll.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ea();e={blockedOn:null,target:e,priority:t};for(var n=0;n<ya.length&&t!==0&&t<ya[n].priority;n++);ya.splice(n,0,e),n===0&&hg(e)}};var mg=a.version;if(mg!=="19.2.0")throw Error(l(527,mg,"19.2.0"));L.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(l(188)):(e=Object.keys(e).join(","),Error(l(268,e)));return e=m(t),e=e!==null?b(e):null,e=e===null?null:e.stateNode,e};var uv={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:D,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ol=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ol.isDisabled&&ol.supportsFiber)try{An=ol.inject(uv),Ye=ol}catch{}}return Vr.createRoot=function(e,t){if(!u(e))throw Error(l(299));var n=!1,i="",c=jh,h=Sh,y=wh;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onUncaughtError!==void 0&&(c=t.onUncaughtError),t.onCaughtError!==void 0&&(h=t.onCaughtError),t.onRecoverableError!==void 0&&(y=t.onRecoverableError)),t=ig(e,1,!1,null,null,n,i,null,c,h,y,pg),e[ei]=t.current,_c(e),new qc(t)},Vr.hydrateRoot=function(e,t,n){if(!u(e))throw Error(l(299));var i=!1,c="",h=jh,y=Sh,v=wh,O=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(c=n.identifierPrefix),n.onUncaughtError!==void 0&&(h=n.onUncaughtError),n.onCaughtError!==void 0&&(y=n.onCaughtError),n.onRecoverableError!==void 0&&(v=n.onRecoverableError),n.formState!==void 0&&(O=n.formState)),t=ig(e,1,!0,t,n??null,i,c,O,h,y,v,pg),t.context=rg(null),n=t.current,i=Xt(),i=et(i),c=na(i),c.callback=null,aa(n,c,i),n=i,t.current.lanes=n,Je(t,n),Cn(t),e[ei]=t.current,_c(e),new ll(t)},Vr.version="19.2.0",Vr}var Tg;function xv(){if(Tg)return Ic.exports;Tg=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(a){console.error(a)}}return o(),Ic.exports=_v(),Ic.exports}var jv=xv(),j=pu();const rp=ap(j);var nu=function(o,a){return nu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,l){r.__proto__=l}||function(r,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(r[u]=l[u])},nu(o,a)};function sp(o,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");nu(o,a);function r(){this.constructor=o}o.prototype=a===null?Object.create(a):(r.prototype=a.prototype,new r)}var vl=function(){return vl=Object.assign||function(a){for(var r,l=1,u=arguments.length;l<u;l++){r=arguments[l];for(var d in r)Object.prototype.hasOwnProperty.call(r,d)&&(a[d]=r[d])}return a},vl.apply(this,arguments)};function Yi(o,a){var r={};for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&a.indexOf(l)<0&&(r[l]=o[l]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,l=Object.getOwnPropertySymbols(o);u<l.length;u++)a.indexOf(l[u])<0&&Object.prototype.propertyIsEnumerable.call(o,l[u])&&(r[l[u]]=o[l[u]]);return r}function lp(o,a,r,l){var u=arguments.length,d=u<3?a:l===null?l=Object.getOwnPropertyDescriptor(a,r):l,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(o,a,r,l);else for(var g=o.length-1;g>=0;g--)(f=o[g])&&(d=(u<3?f(d):u>3?f(a,r,d):f(a,r))||d);return u>3&&d&&Object.defineProperty(a,r,d),d}function op(o,a){return function(r,l){a(r,l,o)}}function cp(o,a,r,l,u,d){function f(T){if(T!==void 0&&typeof T!="function")throw new TypeError("Function expected");return T}for(var g=l.kind,p=g==="getter"?"get":g==="setter"?"set":"value",m=!a&&o?l.static?o:o.prototype:null,b=a||(m?Object.getOwnPropertyDescriptor(m,l.name):{}),x,S=!1,_=r.length-1;_>=0;_--){var w={};for(var A in l)w[A]=A==="access"?{}:l[A];for(var A in l.access)w.access[A]=l.access[A];w.addInitializer=function(T){if(S)throw new TypeError("Cannot add initializers after decoration has completed");d.push(f(T||null))};var R=(0,r[_])(g==="accessor"?{get:b.get,set:b.set}:b[p],w);if(g==="accessor"){if(R===void 0)continue;if(R===null||typeof R!="object")throw new TypeError("Object expected");(x=f(R.get))&&(b.get=x),(x=f(R.set))&&(b.set=x),(x=f(R.init))&&u.unshift(x)}else(x=f(R))&&(g==="field"?u.unshift(x):b[p]=x)}m&&Object.defineProperty(m,l.name,b),S=!0}function up(o,a,r){for(var l=arguments.length>2,u=0;u<a.length;u++)r=l?a[u].call(o,r):a[u].call(o);return l?r:void 0}function dp(o){return typeof o=="symbol"?o:"".concat(o)}function hp(o,a,r){return typeof a=="symbol"&&(a=a.description?"[".concat(a.description,"]"):""),Object.defineProperty(o,"name",{configurable:!0,value:r?"".concat(r," ",a):a})}function fp(o,a){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(o,a)}function be(o,a,r,l){function u(d){return d instanceof r?d:new r(function(f){f(d)})}return new(r||(r=Promise))(function(d,f){function g(b){try{m(l.next(b))}catch(x){f(x)}}function p(b){try{m(l.throw(b))}catch(x){f(x)}}function m(b){b.done?d(b.value):u(b.value).then(g,p)}m((l=l.apply(o,a||[])).next())})}function gp(o,a){var r={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},l,u,d,f=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return f.next=g(0),f.throw=g(1),f.return=g(2),typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function g(m){return function(b){return p([m,b])}}function p(m){if(l)throw new TypeError("Generator is already executing.");for(;f&&(f=0,m[0]&&(r=0)),r;)try{if(l=1,u&&(d=m[0]&2?u.return:m[0]?u.throw||((d=u.return)&&d.call(u),0):u.next)&&!(d=d.call(u,m[1])).done)return d;switch(u=0,d&&(m=[m[0]&2,d.value]),m[0]){case 0:case 1:d=m;break;case 4:return r.label++,{value:m[1],done:!1};case 5:r.label++,u=m[1],m=[0];continue;case 7:m=r.ops.pop(),r.trys.pop();continue;default:if(d=r.trys,!(d=d.length>0&&d[d.length-1])&&(m[0]===6||m[0]===2)){r=0;continue}if(m[0]===3&&(!d||m[1]>d[0]&&m[1]<d[3])){r.label=m[1];break}if(m[0]===6&&r.label<d[1]){r.label=d[1],d=m;break}if(d&&r.label<d[2]){r.label=d[2],r.ops.push(m);break}d[2]&&r.ops.pop(),r.trys.pop();continue}m=a.call(o,r)}catch(b){m=[6,b],u=0}finally{l=d=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}}var Sl=Object.create?(function(o,a,r,l){l===void 0&&(l=r);var u=Object.getOwnPropertyDescriptor(a,r);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[r]}}),Object.defineProperty(o,l,u)}):(function(o,a,r,l){l===void 0&&(l=r),o[l]=a[r]});function pp(o,a){for(var r in o)r!=="default"&&!Object.prototype.hasOwnProperty.call(a,r)&&Sl(a,o,r)}function bl(o){var a=typeof Symbol=="function"&&Symbol.iterator,r=a&&o[a],l=0;if(r)return r.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&l>=o.length&&(o=void 0),{value:o&&o[l++],done:!o}}};throw new TypeError(a?"Object is not iterable.":"Symbol.iterator is not defined.")}function mu(o,a){var r=typeof Symbol=="function"&&o[Symbol.iterator];if(!r)return o;var l=r.call(o),u,d=[],f;try{for(;(a===void 0||a-- >0)&&!(u=l.next()).done;)d.push(u.value)}catch(g){f={error:g}}finally{try{u&&!u.done&&(r=l.return)&&r.call(l)}finally{if(f)throw f.error}}return d}function mp(){for(var o=[],a=0;a<arguments.length;a++)o=o.concat(mu(arguments[a]));return o}function yp(){for(var o=0,a=0,r=arguments.length;a<r;a++)o+=arguments[a].length;for(var l=Array(o),u=0,a=0;a<r;a++)for(var d=arguments[a],f=0,g=d.length;f<g;f++,u++)l[u]=d[f];return l}function vp(o,a,r){if(r||arguments.length===2)for(var l=0,u=a.length,d;l<u;l++)(d||!(l in a))&&(d||(d=Array.prototype.slice.call(a,0,l)),d[l]=a[l]);return o.concat(d||Array.prototype.slice.call(a))}function Ki(o){return this instanceof Ki?(this.v=o,this):new Ki(o)}function bp(o,a,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var l=r.apply(o,a||[]),u,d=[];return u=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),g("next"),g("throw"),g("return",f),u[Symbol.asyncIterator]=function(){return this},u;function f(_){return function(w){return Promise.resolve(w).then(_,x)}}function g(_,w){l[_]&&(u[_]=function(A){return new Promise(function(R,T){d.push([_,A,R,T])>1||p(_,A)})},w&&(u[_]=w(u[_])))}function p(_,w){try{m(l[_](w))}catch(A){S(d[0][3],A)}}function m(_){_.value instanceof Ki?Promise.resolve(_.value.v).then(b,x):S(d[0][2],_)}function b(_){p("next",_)}function x(_){p("throw",_)}function S(_,w){_(w),d.shift(),d.length&&p(d[0][0],d[0][1])}}function _p(o){var a,r;return a={},l("next"),l("throw",function(u){throw u}),l("return"),a[Symbol.iterator]=function(){return this},a;function l(u,d){a[u]=o[u]?function(f){return(r=!r)?{value:Ki(o[u](f)),done:!1}:d?d(f):f}:d}}function xp(o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=o[Symbol.asyncIterator],r;return a?a.call(o):(o=typeof bl=="function"?bl(o):o[Symbol.iterator](),r={},l("next"),l("throw"),l("return"),r[Symbol.asyncIterator]=function(){return this},r);function l(d){r[d]=o[d]&&function(f){return new Promise(function(g,p){f=o[d](f),u(g,p,f.done,f.value)})}}function u(d,f,g,p){Promise.resolve(p).then(function(m){d({value:m,done:g})},f)}}function jp(o,a){return Object.defineProperty?Object.defineProperty(o,"raw",{value:a}):o.raw=a,o}var Sv=Object.create?(function(o,a){Object.defineProperty(o,"default",{enumerable:!0,value:a})}):function(o,a){o.default=a},au=function(o){return au=Object.getOwnPropertyNames||function(a){var r=[];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(r[r.length]=l);return r},au(o)};function Sp(o){if(o&&o.__esModule)return o;var a={};if(o!=null)for(var r=au(o),l=0;l<r.length;l++)r[l]!=="default"&&Sl(a,o,r[l]);return Sv(a,o),a}function wp(o){return o&&o.__esModule?o:{default:o}}function Ep(o,a,r,l){if(r==="a"&&!l)throw new TypeError("Private accessor was defined without a getter");if(typeof a=="function"?o!==a||!l:!a.has(o))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?l:r==="a"?l.call(o):l?l.value:a.get(o)}function Tp(o,a,r,l,u){if(l==="m")throw new TypeError("Private method is not writable");if(l==="a"&&!u)throw new TypeError("Private accessor was defined without a setter");if(typeof a=="function"?o!==a||!u:!a.has(o))throw new TypeError("Cannot write private member to an object whose class did not declare it");return l==="a"?u.call(o,r):u?u.value=r:a.set(o,r),r}function Cp(o,a){if(a===null||typeof a!="object"&&typeof a!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof o=="function"?a===o:o.has(a)}function Ap(o,a,r){if(a!=null){if(typeof a!="object"&&typeof a!="function")throw new TypeError("Object expected.");var l,u;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");l=a[Symbol.asyncDispose]}if(l===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");l=a[Symbol.dispose],r&&(u=l)}if(typeof l!="function")throw new TypeError("Object not disposable.");u&&(l=function(){try{u.call(this)}catch(d){return Promise.reject(d)}}),o.stack.push({value:a,dispose:l,async:r})}else r&&o.stack.push({async:!0});return a}var wv=typeof SuppressedError=="function"?SuppressedError:function(o,a,r){var l=new Error(r);return l.name="SuppressedError",l.error=o,l.suppressed=a,l};function Op(o){function a(d){o.error=o.hasError?new wv(d,o.error,"An error was suppressed during disposal."):d,o.hasError=!0}var r,l=0;function u(){for(;r=o.stack.pop();)try{if(!r.async&&l===1)return l=0,o.stack.push(r),Promise.resolve().then(u);if(r.dispose){var d=r.dispose.call(r.value);if(r.async)return l|=2,Promise.resolve(d).then(u,function(f){return a(f),u()})}else l|=1}catch(f){a(f)}if(l===1)return o.hasError?Promise.reject(o.error):Promise.resolve();if(o.hasError)throw o.error}return u()}function Rp(o,a){return typeof o=="string"&&/^\.\.?\//.test(o)?o.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,l,u,d,f){return l?a?".jsx":".js":u&&(!d||!f)?r:u+d+"."+f.toLowerCase()+"js"}):o}const Ev={__extends:sp,__assign:vl,__rest:Yi,__decorate:lp,__param:op,__esDecorate:cp,__runInitializers:up,__propKey:dp,__setFunctionName:hp,__metadata:fp,__awaiter:be,__generator:gp,__createBinding:Sl,__exportStar:pp,__values:bl,__read:mu,__spread:mp,__spreadArrays:yp,__spreadArray:vp,__await:Ki,__asyncGenerator:bp,__asyncDelegator:_p,__asyncValues:xp,__makeTemplateObject:jp,__importStar:Sp,__importDefault:wp,__classPrivateFieldGet:Ep,__classPrivateFieldSet:Tp,__classPrivateFieldIn:Cp,__addDisposableResource:Ap,__disposeResources:Op,__rewriteRelativeImportExtension:Rp},Tv=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:Ap,get __assign(){return vl},__asyncDelegator:_p,__asyncGenerator:bp,__asyncValues:xp,__await:Ki,__awaiter:be,__classPrivateFieldGet:Ep,__classPrivateFieldIn:Cp,__classPrivateFieldSet:Tp,__createBinding:Sl,__decorate:lp,__disposeResources:Op,__esDecorate:cp,__exportStar:pp,__extends:sp,__generator:gp,__importDefault:wp,__importStar:Sp,__makeTemplateObject:jp,__metadata:fp,__param:op,__propKey:dp,__read:mu,__rest:Yi,__rewriteRelativeImportExtension:Rp,__runInitializers:up,__setFunctionName:hp,__spread:mp,__spreadArray:vp,__spreadArrays:yp,__values:bl,default:Ev},Symbol.toStringTag,{value:"Module"})),Cv=o=>o?(...a)=>o(...a):(...a)=>fetch(...a);class yu extends Error{constructor(a,r="FunctionsError",l){super(a),this.name=r,this.context=l}}class Av extends yu{constructor(a){super("Failed to send a request to the Edge Function","FunctionsFetchError",a)}}class Cg extends yu{constructor(a){super("Relay Error invoking the Edge Function","FunctionsRelayError",a)}}class Ag extends yu{constructor(a){super("Edge Function returned a non-2xx status code","FunctionsHttpError",a)}}var iu;(function(o){o.Any="any",o.ApNortheast1="ap-northeast-1",o.ApNortheast2="ap-northeast-2",o.ApSouth1="ap-south-1",o.ApSoutheast1="ap-southeast-1",o.ApSoutheast2="ap-southeast-2",o.CaCentral1="ca-central-1",o.EuCentral1="eu-central-1",o.EuWest1="eu-west-1",o.EuWest2="eu-west-2",o.EuWest3="eu-west-3",o.SaEast1="sa-east-1",o.UsEast1="us-east-1",o.UsWest1="us-west-1",o.UsWest2="us-west-2"})(iu||(iu={}));class Ov{constructor(a,{headers:r={},customFetch:l,region:u=iu.Any}={}){this.url=a,this.headers=r,this.region=u,this.fetch=Cv(l)}setAuth(a){this.headers.Authorization=`Bearer ${a}`}invoke(a){return be(this,arguments,void 0,function*(r,l={}){var u;let d,f;try{const{headers:g,method:p,body:m,signal:b,timeout:x}=l;let S={},{region:_}=l;_||(_=this.region);const w=new URL(`${this.url}/${r}`);_&&_!=="any"&&(S["x-region"]=_,w.searchParams.set("forceFunctionRegion",_));let A;m&&(g&&!Object.prototype.hasOwnProperty.call(g,"Content-Type")||!g)?typeof Blob<"u"&&m instanceof Blob||m instanceof ArrayBuffer?(S["Content-Type"]="application/octet-stream",A=m):typeof m=="string"?(S["Content-Type"]="text/plain",A=m):typeof FormData<"u"&&m instanceof FormData?A=m:(S["Content-Type"]="application/json",A=JSON.stringify(m)):A=m;let R=b;x&&(f=new AbortController,d=setTimeout(()=>f.abort(),x),b?(R=f.signal,b.addEventListener("abort",()=>f.abort())):R=f.signal);const T=yield this.fetch(w.toString(),{method:p||"POST",headers:Object.assign(Object.assign(Object.assign({},S),this.headers),g),body:A,signal:R}).catch(C=>{throw new Av(C)}),I=T.headers.get("x-relay-error");if(I&&I==="true")throw new Cg(T);if(!T.ok)throw new Ag(T);let M=((u=T.headers.get("Content-Type"))!==null&&u!==void 0?u:"text/plain").split(";")[0].trim(),J;return M==="application/json"?J=yield T.json():M==="application/octet-stream"||M==="application/pdf"?J=yield T.blob():M==="text/event-stream"?J=T:M==="multipart/form-data"?J=yield T.formData():J=yield T.text(),{data:J,error:null,response:T}}catch(g){return{data:null,error:g,response:g instanceof Ag||g instanceof Cg?g.context:void 0}}finally{d&&clearTimeout(d)}})}}var Nt={};const Ji=fv(Tv);var cl={},ul={},dl={},hl={},fl={},gl={},Og;function Np(){if(Og)return gl;Og=1,Object.defineProperty(gl,"__esModule",{value:!0});class o extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return gl.default=o,gl}var Rg;function Up(){if(Rg)return fl;Rg=1,Object.defineProperty(fl,"__esModule",{value:!0});const a=Ji.__importDefault(Np());class r{constructor(u){var d,f;this.shouldThrowOnError=!1,this.method=u.method,this.url=u.url,this.headers=new Headers(u.headers),this.schema=u.schema,this.body=u.body,this.shouldThrowOnError=(d=u.shouldThrowOnError)!==null&&d!==void 0?d:!1,this.signal=u.signal,this.isMaybeSingle=(f=u.isMaybeSingle)!==null&&f!==void 0?f:!1,u.fetch?this.fetch=u.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(u,d){return this.headers=new Headers(this.headers),this.headers.set(u,d),this}then(u,d){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const f=this.fetch;let g=f(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async p=>{var m,b,x,S;let _=null,w=null,A=null,R=p.status,T=p.statusText;if(p.ok){if(this.method!=="HEAD"){const C=await p.text();C===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((m=this.headers.get("Accept"))===null||m===void 0)&&m.includes("application/vnd.pgrst.plan+text"))?w=C:w=JSON.parse(C))}const M=(b=this.headers.get("Prefer"))===null||b===void 0?void 0:b.match(/count=(exact|planned|estimated)/),J=(x=p.headers.get("content-range"))===null||x===void 0?void 0:x.split("/");M&&J&&J.length>1&&(A=parseInt(J[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(w)&&(w.length>1?(_={code:"PGRST116",details:`Results contain ${w.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},w=null,A=null,R=406,T="Not Acceptable"):w.length===1?w=w[0]:w=null)}else{const M=await p.text();try{_=JSON.parse(M),Array.isArray(_)&&p.status===404&&(w=[],_=null,R=200,T="OK")}catch{p.status===404&&M===""?(R=204,T="No Content"):_={message:M}}if(_&&this.isMaybeSingle&&(!((S=_?.details)===null||S===void 0)&&S.includes("0 rows"))&&(_=null,R=200,T="OK"),_&&this.shouldThrowOnError)throw new a.default(_)}return{error:_,data:w,count:A,status:R,statusText:T}});return this.shouldThrowOnError||(g=g.catch(p=>{var m,b,x;return{error:{message:`${(m=p?.name)!==null&&m!==void 0?m:"FetchError"}: ${p?.message}`,details:`${(b=p?.stack)!==null&&b!==void 0?b:""}`,hint:"",code:`${(x=p?.code)!==null&&x!==void 0?x:""}`},data:null,count:null,status:0,statusText:""}})),g.then(u,d)}returns(){return this}overrideTypes(){return this}}return fl.default=r,fl}var Ng;function kp(){if(Ng)return hl;Ng=1,Object.defineProperty(hl,"__esModule",{value:!0});const a=Ji.__importDefault(Up());class r extends a.default{select(u){let d=!1;const f=(u??"*").split("").map(g=>/\s/.test(g)&&!d?"":(g==='"'&&(d=!d),g)).join("");return this.url.searchParams.set("select",f),this.headers.append("Prefer","return=representation"),this}order(u,{ascending:d=!0,nullsFirst:f,foreignTable:g,referencedTable:p=g}={}){const m=p?`${p}.order`:"order",b=this.url.searchParams.get(m);return this.url.searchParams.set(m,`${b?`${b},`:""}${u}.${d?"asc":"desc"}${f===void 0?"":f?".nullsfirst":".nullslast"}`),this}limit(u,{foreignTable:d,referencedTable:f=d}={}){const g=typeof f>"u"?"limit":`${f}.limit`;return this.url.searchParams.set(g,`${u}`),this}range(u,d,{foreignTable:f,referencedTable:g=f}={}){const p=typeof g>"u"?"offset":`${g}.offset`,m=typeof g>"u"?"limit":`${g}.limit`;return this.url.searchParams.set(p,`${u}`),this.url.searchParams.set(m,`${d-u+1}`),this}abortSignal(u){return this.signal=u,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:u=!1,verbose:d=!1,settings:f=!1,buffers:g=!1,wal:p=!1,format:m="text"}={}){var b;const x=[u?"analyze":null,d?"verbose":null,f?"settings":null,g?"buffers":null,p?"wal":null].filter(Boolean).join("|"),S=(b=this.headers.get("Accept"))!==null&&b!==void 0?b:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${m}; for="${S}"; options=${x};`),m==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(u){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${u}`),this}}return hl.default=r,hl}var Ug;function vu(){if(Ug)return dl;Ug=1,Object.defineProperty(dl,"__esModule",{value:!0});const a=Ji.__importDefault(kp()),r=new RegExp("[,()]");class l extends a.default{eq(d,f){return this.url.searchParams.append(d,`eq.${f}`),this}neq(d,f){return this.url.searchParams.append(d,`neq.${f}`),this}gt(d,f){return this.url.searchParams.append(d,`gt.${f}`),this}gte(d,f){return this.url.searchParams.append(d,`gte.${f}`),this}lt(d,f){return this.url.searchParams.append(d,`lt.${f}`),this}lte(d,f){return this.url.searchParams.append(d,`lte.${f}`),this}like(d,f){return this.url.searchParams.append(d,`like.${f}`),this}likeAllOf(d,f){return this.url.searchParams.append(d,`like(all).{${f.join(",")}}`),this}likeAnyOf(d,f){return this.url.searchParams.append(d,`like(any).{${f.join(",")}}`),this}ilike(d,f){return this.url.searchParams.append(d,`ilike.${f}`),this}ilikeAllOf(d,f){return this.url.searchParams.append(d,`ilike(all).{${f.join(",")}}`),this}ilikeAnyOf(d,f){return this.url.searchParams.append(d,`ilike(any).{${f.join(",")}}`),this}is(d,f){return this.url.searchParams.append(d,`is.${f}`),this}in(d,f){const g=Array.from(new Set(f)).map(p=>typeof p=="string"&&r.test(p)?`"${p}"`:`${p}`).join(",");return this.url.searchParams.append(d,`in.(${g})`),this}contains(d,f){return typeof f=="string"?this.url.searchParams.append(d,`cs.${f}`):Array.isArray(f)?this.url.searchParams.append(d,`cs.{${f.join(",")}}`):this.url.searchParams.append(d,`cs.${JSON.stringify(f)}`),this}containedBy(d,f){return typeof f=="string"?this.url.searchParams.append(d,`cd.${f}`):Array.isArray(f)?this.url.searchParams.append(d,`cd.{${f.join(",")}}`):this.url.searchParams.append(d,`cd.${JSON.stringify(f)}`),this}rangeGt(d,f){return this.url.searchParams.append(d,`sr.${f}`),this}rangeGte(d,f){return this.url.searchParams.append(d,`nxl.${f}`),this}rangeLt(d,f){return this.url.searchParams.append(d,`sl.${f}`),this}rangeLte(d,f){return this.url.searchParams.append(d,`nxr.${f}`),this}rangeAdjacent(d,f){return this.url.searchParams.append(d,`adj.${f}`),this}overlaps(d,f){return typeof f=="string"?this.url.searchParams.append(d,`ov.${f}`):this.url.searchParams.append(d,`ov.{${f.join(",")}}`),this}textSearch(d,f,{config:g,type:p}={}){let m="";p==="plain"?m="pl":p==="phrase"?m="ph":p==="websearch"&&(m="w");const b=g===void 0?"":`(${g})`;return this.url.searchParams.append(d,`${m}fts${b}.${f}`),this}match(d){return Object.entries(d).forEach(([f,g])=>{this.url.searchParams.append(f,`eq.${g}`)}),this}not(d,f,g){return this.url.searchParams.append(d,`not.${f}.${g}`),this}or(d,{foreignTable:f,referencedTable:g=f}={}){const p=g?`${g}.or`:"or";return this.url.searchParams.append(p,`(${d})`),this}filter(d,f,g){return this.url.searchParams.append(d,`${f}.${g}`),this}}return dl.default=l,dl}var kg;function Dp(){if(kg)return ul;kg=1,Object.defineProperty(ul,"__esModule",{value:!0});const a=Ji.__importDefault(vu());class r{constructor(u,{headers:d={},schema:f,fetch:g}){this.url=u,this.headers=new Headers(d),this.schema=f,this.fetch=g}select(u,d){const{head:f=!1,count:g}=d??{},p=f?"HEAD":"GET";let m=!1;const b=(u??"*").split("").map(x=>/\s/.test(x)&&!m?"":(x==='"'&&(m=!m),x)).join("");return this.url.searchParams.set("select",b),g&&this.headers.append("Prefer",`count=${g}`),new a.default({method:p,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(u,{count:d,defaultToNull:f=!0}={}){var g;const p="POST";if(d&&this.headers.append("Prefer",`count=${d}`),f||this.headers.append("Prefer","missing=default"),Array.isArray(u)){const m=u.reduce((b,x)=>b.concat(Object.keys(x)),[]);if(m.length>0){const b=[...new Set(m)].map(x=>`"${x}"`);this.url.searchParams.set("columns",b.join(","))}}return new a.default({method:p,url:this.url,headers:this.headers,schema:this.schema,body:u,fetch:(g=this.fetch)!==null&&g!==void 0?g:fetch})}upsert(u,{onConflict:d,ignoreDuplicates:f=!1,count:g,defaultToNull:p=!0}={}){var m;const b="POST";if(this.headers.append("Prefer",`resolution=${f?"ignore":"merge"}-duplicates`),d!==void 0&&this.url.searchParams.set("on_conflict",d),g&&this.headers.append("Prefer",`count=${g}`),p||this.headers.append("Prefer","missing=default"),Array.isArray(u)){const x=u.reduce((S,_)=>S.concat(Object.keys(_)),[]);if(x.length>0){const S=[...new Set(x)].map(_=>`"${_}"`);this.url.searchParams.set("columns",S.join(","))}}return new a.default({method:b,url:this.url,headers:this.headers,schema:this.schema,body:u,fetch:(m=this.fetch)!==null&&m!==void 0?m:fetch})}update(u,{count:d}={}){var f;const g="PATCH";return d&&this.headers.append("Prefer",`count=${d}`),new a.default({method:g,url:this.url,headers:this.headers,schema:this.schema,body:u,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}delete({count:u}={}){var d;const f="DELETE";return u&&this.headers.append("Prefer",`count=${u}`),new a.default({method:f,url:this.url,headers:this.headers,schema:this.schema,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}}return ul.default=r,ul}var Dg;function Rv(){if(Dg)return cl;Dg=1,Object.defineProperty(cl,"__esModule",{value:!0});const o=Ji,a=o.__importDefault(Dp()),r=o.__importDefault(vu());class l{constructor(d,{headers:f={},schema:g,fetch:p}={}){this.url=d,this.headers=new Headers(f),this.schemaName=g,this.fetch=p}from(d){const f=new URL(`${this.url}/${d}`);return new a.default(f,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(d){return new l(this.url,{headers:this.headers,schema:d,fetch:this.fetch})}rpc(d,f={},{head:g=!1,get:p=!1,count:m}={}){var b;let x;const S=new URL(`${this.url}/rpc/${d}`);let _;g||p?(x=g?"HEAD":"GET",Object.entries(f).filter(([A,R])=>R!==void 0).map(([A,R])=>[A,Array.isArray(R)?`{${R.join(",")}}`:`${R}`]).forEach(([A,R])=>{S.searchParams.append(A,R)})):(x="POST",_=f);const w=new Headers(this.headers);return m&&w.set("Prefer",`count=${m}`),new r.default({method:x,url:S,headers:w,schema:this.schemaName,body:_,fetch:(b=this.fetch)!==null&&b!==void 0?b:fetch})}}return cl.default=l,cl}var zg;function Nv(){if(zg)return Nt;zg=1,Object.defineProperty(Nt,"__esModule",{value:!0}),Nt.PostgrestError=Nt.PostgrestBuilder=Nt.PostgrestTransformBuilder=Nt.PostgrestFilterBuilder=Nt.PostgrestQueryBuilder=Nt.PostgrestClient=void 0;const o=Ji,a=o.__importDefault(Rv());Nt.PostgrestClient=a.default;const r=o.__importDefault(Dp());Nt.PostgrestQueryBuilder=r.default;const l=o.__importDefault(vu());Nt.PostgrestFilterBuilder=l.default;const u=o.__importDefault(kp());Nt.PostgrestTransformBuilder=u.default;const d=o.__importDefault(Up());Nt.PostgrestBuilder=d.default;const f=o.__importDefault(Np());return Nt.PostgrestError=f.default,Nt.default={PostgrestClient:a.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:l.default,PostgrestTransformBuilder:u.default,PostgrestBuilder:d.default,PostgrestError:f.default},Nt}var zp=Nv();const Bp=ap(zp),Uv=hv({__proto__:null,default:Bp},[zp]),{PostgrestClient:kv,PostgrestQueryBuilder:Z_,PostgrestFilterBuilder:F_,PostgrestTransformBuilder:W_,PostgrestBuilder:ex,PostgrestError:tx}=Bp||Uv;class Dv{static detectEnvironment(){var a;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((a=navigator.userAgent)===null||a===void 0)&&a.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const l=r.node,u=parseInt(l.replace(/^v/,"").split(".")[0]);return u>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${u} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${u} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const a=this.detectEnvironment();if(a.constructor)return a.constructor;let r=a.error||"WebSocket not supported in this environment.";throw a.workaround&&(r+=`

Suggested solution: ${a.workaround}`),new Error(r)}static createWebSocket(a,r){const l=this.getWebSocketConstructor();return new l(a,r)}static isWebSocketSupported(){try{const a=this.detectEnvironment();return a.type==="native"||a.type==="ws"}catch{return!1}}}const zv="2.81.1",Bv=`realtime-js/${zv}`,Mp="1.0.0",Mv="2.0.0",Bg=Mp,ru=1e4,Lv=1e3,qv=100;var Ya;(function(o){o[o.connecting=0]="connecting",o[o.open=1]="open",o[o.closing=2]="closing",o[o.closed=3]="closed"})(Ya||(Ya={}));var bt;(function(o){o.closed="closed",o.errored="errored",o.joined="joined",o.joining="joining",o.leaving="leaving"})(bt||(bt={}));var fn;(function(o){o.close="phx_close",o.error="phx_error",o.join="phx_join",o.reply="phx_reply",o.leave="phx_leave",o.access_token="access_token"})(fn||(fn={}));var su;(function(o){o.websocket="websocket"})(su||(su={}));var Ja;(function(o){o.Connecting="connecting",o.Open="open",o.Closing="closing",o.Closed="closed"})(Ja||(Ja={}));class Hv{constructor(){this.HEADER_LENGTH=1,this.META_LENGTH=4,this.USER_BROADCAST_PUSH_META_LENGTH=5,this.KINDS={push:0,reply:1,broadcast:2,userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST="broadcast"}encode(a,r){if(this._isArrayBuffer(a.payload))return r(this._binaryEncodePush(a));if(a.event===this.BROADCAST&&!(a.payload instanceof ArrayBuffer)&&typeof a.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(a));let l=[a.join_ref,a.ref,a.topic,a.event,a.payload];return r(JSON.stringify(l))}_binaryEncodePush(a){const{join_ref:r,ref:l,event:u,topic:d,payload:f}=a,g=this.META_LENGTH+r.length+l.length+d.length+u.length,p=new ArrayBuffer(this.HEADER_LENGTH+g);let m=new DataView(p),b=0;m.setUint8(b++,this.KINDS.push),m.setUint8(b++,r.length),m.setUint8(b++,l.length),m.setUint8(b++,d.length),m.setUint8(b++,u.length),Array.from(r,S=>m.setUint8(b++,S.charCodeAt(0))),Array.from(l,S=>m.setUint8(b++,S.charCodeAt(0))),Array.from(d,S=>m.setUint8(b++,S.charCodeAt(0))),Array.from(u,S=>m.setUint8(b++,S.charCodeAt(0)));var x=new Uint8Array(p.byteLength+f.byteLength);return x.set(new Uint8Array(p),0),x.set(new Uint8Array(f),p.byteLength),x.buffer}_binaryEncodeUserBroadcastPush(a){var r;return this._isArrayBuffer((r=a.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(a):this._encodeJsonUserBroadcastPush(a)}_encodeBinaryUserBroadcastPush(a){var r,l;const{join_ref:u,ref:d,topic:f}=a,g=a.payload.event,p=(l=(r=a.payload)===null||r===void 0?void 0:r.payload)!==null&&l!==void 0?l:new ArrayBuffer(0),m=this.USER_BROADCAST_PUSH_META_LENGTH+u.length+d.length+f.length+g.length,b=new ArrayBuffer(this.HEADER_LENGTH+m);let x=new DataView(b),S=0;x.setUint8(S++,this.KINDS.userBroadcastPush),x.setUint8(S++,u.length),x.setUint8(S++,d.length),x.setUint8(S++,f.length),x.setUint8(S++,g.length),x.setUint8(S++,this.BINARY_ENCODING),Array.from(u,w=>x.setUint8(S++,w.charCodeAt(0))),Array.from(d,w=>x.setUint8(S++,w.charCodeAt(0))),Array.from(f,w=>x.setUint8(S++,w.charCodeAt(0))),Array.from(g,w=>x.setUint8(S++,w.charCodeAt(0)));var _=new Uint8Array(b.byteLength+p.byteLength);return _.set(new Uint8Array(b),0),_.set(new Uint8Array(p),b.byteLength),_.buffer}_encodeJsonUserBroadcastPush(a){var r,l;const{join_ref:u,ref:d,topic:f}=a,g=a.payload.event,p=(l=(r=a.payload)===null||r===void 0?void 0:r.payload)!==null&&l!==void 0?l:{},b=new TextEncoder().encode(JSON.stringify(p)).buffer,x=this.USER_BROADCAST_PUSH_META_LENGTH+u.length+d.length+f.length+g.length,S=new ArrayBuffer(this.HEADER_LENGTH+x);let _=new DataView(S),w=0;_.setUint8(w++,this.KINDS.userBroadcastPush),_.setUint8(w++,u.length),_.setUint8(w++,d.length),_.setUint8(w++,f.length),_.setUint8(w++,g.length),_.setUint8(w++,this.JSON_ENCODING),Array.from(u,R=>_.setUint8(w++,R.charCodeAt(0))),Array.from(d,R=>_.setUint8(w++,R.charCodeAt(0))),Array.from(f,R=>_.setUint8(w++,R.charCodeAt(0))),Array.from(g,R=>_.setUint8(w++,R.charCodeAt(0)));var A=new Uint8Array(S.byteLength+b.byteLength);return A.set(new Uint8Array(S),0),A.set(new Uint8Array(b),S.byteLength),A.buffer}decode(a,r){if(this._isArrayBuffer(a)){let l=this._binaryDecode(a);return r(l)}if(typeof a=="string"){const l=JSON.parse(a),[u,d,f,g,p]=l;return r({join_ref:u,ref:d,topic:f,event:g,payload:p})}return r({})}_binaryDecode(a){const r=new DataView(a),l=r.getUint8(0),u=new TextDecoder;switch(l){case this.KINDS.push:return this._decodePush(a,r,u);case this.KINDS.reply:return this._decodeReply(a,r,u);case this.KINDS.broadcast:return this._decodeBroadcast(a,r,u);case this.KINDS.userBroadcast:return this._decodeUserBroadcast(a,r,u)}}_decodePush(a,r,l){const u=r.getUint8(1),d=r.getUint8(2),f=r.getUint8(3);let g=this.HEADER_LENGTH+this.META_LENGTH-1;const p=l.decode(a.slice(g,g+u));g=g+u;const m=l.decode(a.slice(g,g+d));g=g+d;const b=l.decode(a.slice(g,g+f));g=g+f;const x=JSON.parse(l.decode(a.slice(g,a.byteLength)));return{join_ref:p,ref:null,topic:m,event:b,payload:x}}_decodeReply(a,r,l){const u=r.getUint8(1),d=r.getUint8(2),f=r.getUint8(3),g=r.getUint8(4);let p=this.HEADER_LENGTH+this.META_LENGTH;const m=l.decode(a.slice(p,p+u));p=p+u;const b=l.decode(a.slice(p,p+d));p=p+d;const x=l.decode(a.slice(p,p+f));p=p+f;const S=l.decode(a.slice(p,p+g));p=p+g;const _=JSON.parse(l.decode(a.slice(p,a.byteLength))),w={status:S,response:_};return{join_ref:m,ref:b,topic:x,event:fn.reply,payload:w}}_decodeBroadcast(a,r,l){const u=r.getUint8(1),d=r.getUint8(2);let f=this.HEADER_LENGTH+2;const g=l.decode(a.slice(f,f+u));f=f+u;const p=l.decode(a.slice(f,f+d));f=f+d;const m=JSON.parse(l.decode(a.slice(f,a.byteLength)));return{join_ref:null,ref:null,topic:g,event:p,payload:m}}_decodeUserBroadcast(a,r,l){const u=r.getUint8(1),d=r.getUint8(2),f=r.getUint8(3),g=r.getUint8(4);let p=this.HEADER_LENGTH+4;const m=l.decode(a.slice(p,p+u));p=p+u;const b=l.decode(a.slice(p,p+d));p=p+d;const x=l.decode(a.slice(p,p+f));p=p+f;const S=a.slice(p,a.byteLength),_=g===this.JSON_ENCODING?JSON.parse(l.decode(S)):S,w={type:this.BROADCAST,event:b,payload:_};return f>0&&(w.meta=JSON.parse(x)),{join_ref:null,ref:null,topic:m,event:this.BROADCAST,payload:w}}_isArrayBuffer(a){var r;return a instanceof ArrayBuffer||((r=a?.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}}class Lp{constructor(a,r){this.callback=a,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=a,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var We;(function(o){o.abstime="abstime",o.bool="bool",o.date="date",o.daterange="daterange",o.float4="float4",o.float8="float8",o.int2="int2",o.int4="int4",o.int4range="int4range",o.int8="int8",o.int8range="int8range",o.json="json",o.jsonb="jsonb",o.money="money",o.numeric="numeric",o.oid="oid",o.reltime="reltime",o.text="text",o.time="time",o.timestamp="timestamp",o.timestamptz="timestamptz",o.timetz="timetz",o.tsrange="tsrange",o.tstzrange="tstzrange"})(We||(We={}));const Mg=(o,a,r={})=>{var l;const u=(l=r.skipTypes)!==null&&l!==void 0?l:[];return a?Object.keys(a).reduce((d,f)=>(d[f]=Iv(f,o,a,u),d),{}):{}},Iv=(o,a,r,l)=>{const u=a.find(g=>g.name===o),d=u?.type,f=r[o];return d&&!l.includes(d)?qp(d,f):lu(f)},qp=(o,a)=>{if(o.charAt(0)==="_"){const r=o.slice(1,o.length);return Pv(a,r)}switch(o){case We.bool:return Vv(a);case We.float4:case We.float8:case We.int2:case We.int4:case We.int8:case We.numeric:case We.oid:return $v(a);case We.json:case We.jsonb:return Gv(a);case We.timestamp:return Kv(a);case We.abstime:case We.date:case We.daterange:case We.int4range:case We.int8range:case We.money:case We.reltime:case We.text:case We.time:case We.timestamptz:case We.timetz:case We.tsrange:case We.tstzrange:return lu(a);default:return lu(a)}},lu=o=>o,Vv=o=>{switch(o){case"t":return!0;case"f":return!1;default:return o}},$v=o=>{if(typeof o=="string"){const a=parseFloat(o);if(!Number.isNaN(a))return a}return o},Gv=o=>{if(typeof o=="string")try{return JSON.parse(o)}catch(a){return console.log(`JSON parse error: ${a}`),o}return o},Pv=(o,a)=>{if(typeof o!="string")return o;const r=o.length-1,l=o[r];if(o[0]==="{"&&l==="}"){let d;const f=o.slice(1,r);try{d=JSON.parse("["+f+"]")}catch{d=f?f.split(","):[]}return d.map(g=>qp(a,g))}return o},Kv=o=>typeof o=="string"?o.replace(" ","T"):o,Hp=o=>{const a=new URL(o);return a.protocol=a.protocol.replace(/^ws/i,"http"),a.pathname=a.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),a.pathname===""||a.pathname==="/"?a.pathname="/api/broadcast":a.pathname=a.pathname+"/api/broadcast",a.href};class Kc{constructor(a,r,l={},u=ru){this.channel=a,this.event=r,this.payload=l,this.timeout=u,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(a){this.timeout=a,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(a){this.payload=Object.assign(Object.assign({},this.payload),a)}receive(a,r){var l;return this._hasReceived(a)&&r((l=this.receivedResp)===null||l===void 0?void 0:l.response),this.recHooks.push({status:a,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const a=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},a),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(a,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:a,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:a,response:r}){this.recHooks.filter(l=>l.status===a).forEach(l=>l.callback(r))}_hasReceived(a){return this.receivedResp&&this.receivedResp.status===a}}var Lg;(function(o){o.SYNC="sync",o.JOIN="join",o.LEAVE="leave"})(Lg||(Lg={}));class Gr{constructor(a,r){this.channel=a,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const l=r?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(l.state,{},u=>{const{onJoin:d,onLeave:f,onSync:g}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Gr.syncState(this.state,u,d,f),this.pendingDiffs.forEach(p=>{this.state=Gr.syncDiff(this.state,p,d,f)}),this.pendingDiffs=[],g()}),this.channel._on(l.diff,{},u=>{const{onJoin:d,onLeave:f,onSync:g}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(u):(this.state=Gr.syncDiff(this.state,u,d,f),g())}),this.onJoin((u,d,f)=>{this.channel._trigger("presence",{event:"join",key:u,currentPresences:d,newPresences:f})}),this.onLeave((u,d,f)=>{this.channel._trigger("presence",{event:"leave",key:u,currentPresences:d,leftPresences:f})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(a,r,l,u){const d=this.cloneDeep(a),f=this.transformState(r),g={},p={};return this.map(d,(m,b)=>{f[m]||(p[m]=b)}),this.map(f,(m,b)=>{const x=d[m];if(x){const S=b.map(R=>R.presence_ref),_=x.map(R=>R.presence_ref),w=b.filter(R=>_.indexOf(R.presence_ref)<0),A=x.filter(R=>S.indexOf(R.presence_ref)<0);w.length>0&&(g[m]=w),A.length>0&&(p[m]=A)}else g[m]=b}),this.syncDiff(d,{joins:g,leaves:p},l,u)}static syncDiff(a,r,l,u){const{joins:d,leaves:f}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return l||(l=()=>{}),u||(u=()=>{}),this.map(d,(g,p)=>{var m;const b=(m=a[g])!==null&&m!==void 0?m:[];if(a[g]=this.cloneDeep(p),b.length>0){const x=a[g].map(_=>_.presence_ref),S=b.filter(_=>x.indexOf(_.presence_ref)<0);a[g].unshift(...S)}l(g,b,p)}),this.map(f,(g,p)=>{let m=a[g];if(!m)return;const b=p.map(x=>x.presence_ref);m=m.filter(x=>b.indexOf(x.presence_ref)<0),a[g]=m,u(g,m,p),m.length===0&&delete a[g]}),a}static map(a,r){return Object.getOwnPropertyNames(a).map(l=>r(l,a[l]))}static transformState(a){return a=this.cloneDeep(a),Object.getOwnPropertyNames(a).reduce((r,l)=>{const u=a[l];return"metas"in u?r[l]=u.metas.map(d=>(d.presence_ref=d.phx_ref,delete d.phx_ref,delete d.phx_ref_prev,d)):r[l]=u,r},{})}static cloneDeep(a){return JSON.parse(JSON.stringify(a))}onJoin(a){this.caller.onJoin=a}onLeave(a){this.caller.onLeave=a}onSync(a){this.caller.onSync=a}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var qg;(function(o){o.ALL="*",o.INSERT="INSERT",o.UPDATE="UPDATE",o.DELETE="DELETE"})(qg||(qg={}));var Pr;(function(o){o.BROADCAST="broadcast",o.PRESENCE="presence",o.POSTGRES_CHANGES="postgres_changes",o.SYSTEM="system"})(Pr||(Pr={}));var Yn;(function(o){o.SUBSCRIBED="SUBSCRIBED",o.TIMED_OUT="TIMED_OUT",o.CLOSED="CLOSED",o.CHANNEL_ERROR="CHANNEL_ERROR"})(Yn||(Yn={}));class bu{constructor(a,r={config:{}},l){var u,d;if(this.topic=a,this.params=r,this.socket=l,this.bindings={},this.state=bt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=a.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Kc(this,fn.join,this.params,this.timeout),this.rejoinTimer=new Lp(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=bt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(f=>f.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=bt.closed,this.socket._remove(this)}),this._onError(f=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,f),this.state=bt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=bt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",f=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,f),this.state=bt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(fn.reply,{},(f,g)=>{this._trigger(this._replyEventName(g),f)}),this.presence=new Gr(this),this.broadcastEndpointURL=Hp(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((d=(u=this.params.config)===null||u===void 0?void 0:u.broadcast)===null||d===void 0)&&d.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(a,r=this.timeout){var l,u,d;if(this.socket.isConnected()||this.socket.connect(),this.state==bt.closed){const{config:{broadcast:f,presence:g,private:p}}=this.params,m=(u=(l=this.bindings.postgres_changes)===null||l===void 0?void 0:l.map(_=>_.filter))!==null&&u!==void 0?u:[],b=!!this.bindings[Pr.PRESENCE]&&this.bindings[Pr.PRESENCE].length>0||((d=this.params.config.presence)===null||d===void 0?void 0:d.enabled)===!0,x={},S={broadcast:f,presence:Object.assign(Object.assign({},g),{enabled:b}),postgres_changes:m,private:p};this.socket.accessTokenValue&&(x.access_token=this.socket.accessTokenValue),this._onError(_=>a?.(Yn.CHANNEL_ERROR,_)),this._onClose(()=>a?.(Yn.CLOSED)),this.updateJoinPayload(Object.assign({config:S},x)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:_})=>{var w;if(this.socket.setAuth(),_===void 0){a?.(Yn.SUBSCRIBED);return}else{const A=this.bindings.postgres_changes,R=(w=A?.length)!==null&&w!==void 0?w:0,T=[];for(let I=0;I<R;I++){const M=A[I],{filter:{event:J,schema:C,table:z,filter:k}}=M,V=_&&_[I];if(V&&V.event===J&&V.schema===C&&V.table===z&&V.filter===k)T.push(Object.assign(Object.assign({},M),{id:V.id}));else{this.unsubscribe(),this.state=bt.errored,a?.(Yn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=T,a&&a(Yn.SUBSCRIBED);return}}).receive("error",_=>{this.state=bt.errored,a?.(Yn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(_).join(", ")||"error")))}).receive("timeout",()=>{a?.(Yn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(a,r={}){return await this.send({type:"presence",event:"track",payload:a},r.timeout||this.timeout)}async untrack(a={}){return await this.send({type:"presence",event:"untrack"},a)}on(a,r,l){return this.state===bt.joined&&a===Pr.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(a,r,l)}async httpSend(a,r,l={}){var u;const d=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(r==null)return Promise.reject("Payload is required for httpSend()");const f={method:"POST",headers:{Authorization:d,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:r,private:this.private}]})},g=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(u=l.timeout)!==null&&u!==void 0?u:this.timeout);if(g.status===202)return{success:!0};let p=g.statusText;try{const m=await g.json();p=m.error||m.message||p}catch{}return Promise.reject(new Error(p))}async send(a,r={}){var l,u;if(!this._canPush()&&a.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:d,payload:f}=a,p={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:d,payload:f,private:this.private}]})};try{const m=await this._fetchWithTimeout(this.broadcastEndpointURL,p,(l=r.timeout)!==null&&l!==void 0?l:this.timeout);return await((u=m.body)===null||u===void 0?void 0:u.cancel()),m.ok?"ok":"error"}catch(m){return m.name==="AbortError"?"timed out":"error"}}else return new Promise(d=>{var f,g,p;const m=this._push(a.type,a,r.timeout||this.timeout);a.type==="broadcast"&&!(!((p=(g=(f=this.params)===null||f===void 0?void 0:f.config)===null||g===void 0?void 0:g.broadcast)===null||p===void 0)&&p.ack)&&d("ok"),m.receive("ok",()=>d("ok")),m.receive("error",()=>d("error")),m.receive("timeout",()=>d("timed out"))})}updateJoinPayload(a){this.joinPush.updatePayload(a)}unsubscribe(a=this.timeout){this.state=bt.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(fn.close,"leave",this._joinRef())};this.joinPush.destroy();let l=null;return new Promise(u=>{l=new Kc(this,fn.leave,{},a),l.receive("ok",()=>{r(),u("ok")}).receive("timeout",()=>{r(),u("timed out")}).receive("error",()=>{u("error")}),l.send(),this._canPush()||l.trigger("ok",{})}).finally(()=>{l?.destroy()})}teardown(){this.pushBuffer.forEach(a=>a.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=bt.closed,this.bindings={}}async _fetchWithTimeout(a,r,l){const u=new AbortController,d=setTimeout(()=>u.abort(),l),f=await this.socket.fetch(a,Object.assign(Object.assign({},r),{signal:u.signal}));return clearTimeout(d),f}_push(a,r,l=this.timeout){if(!this.joinedOnce)throw`tried to push '${a}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let u=new Kc(this,a,r,l);return this._canPush()?u.send():this._addToPushBuffer(u),u}_addToPushBuffer(a){if(a.startTimeout(),this.pushBuffer.push(a),this.pushBuffer.length>qv){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(a,r,l){return r}_isMember(a){return this.topic===a}_joinRef(){return this.joinPush.ref}_trigger(a,r,l){var u,d;const f=a.toLocaleLowerCase(),{close:g,error:p,leave:m,join:b}=fn;if(l&&[g,p,m,b].indexOf(f)>=0&&l!==this._joinRef())return;let S=this._onMessage(f,r,l);if(r&&!S)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(f)?(u=this.bindings.postgres_changes)===null||u===void 0||u.filter(_=>{var w,A,R;return((w=_.filter)===null||w===void 0?void 0:w.event)==="*"||((R=(A=_.filter)===null||A===void 0?void 0:A.event)===null||R===void 0?void 0:R.toLocaleLowerCase())===f}).map(_=>_.callback(S,l)):(d=this.bindings[f])===null||d===void 0||d.filter(_=>{var w,A,R,T,I,M;if(["broadcast","presence","postgres_changes"].includes(f))if("id"in _){const J=_.id,C=(w=_.filter)===null||w===void 0?void 0:w.event;return J&&((A=r.ids)===null||A===void 0?void 0:A.includes(J))&&(C==="*"||C?.toLocaleLowerCase()===((R=r.data)===null||R===void 0?void 0:R.type.toLocaleLowerCase()))}else{const J=(I=(T=_?.filter)===null||T===void 0?void 0:T.event)===null||I===void 0?void 0:I.toLocaleLowerCase();return J==="*"||J===((M=r?.event)===null||M===void 0?void 0:M.toLocaleLowerCase())}else return _.type.toLocaleLowerCase()===f}).map(_=>{if(typeof S=="object"&&"ids"in S){const w=S.data,{schema:A,table:R,commit_timestamp:T,type:I,errors:M}=w;S=Object.assign(Object.assign({},{schema:A,table:R,commit_timestamp:T,eventType:I,new:{},old:{},errors:M}),this._getPayloadRecords(w))}_.callback(S,l)})}_isClosed(){return this.state===bt.closed}_isJoined(){return this.state===bt.joined}_isJoining(){return this.state===bt.joining}_isLeaving(){return this.state===bt.leaving}_replyEventName(a){return`chan_reply_${a}`}_on(a,r,l){const u=a.toLocaleLowerCase(),d={type:u,filter:r,callback:l};return this.bindings[u]?this.bindings[u].push(d):this.bindings[u]=[d],this}_off(a,r){const l=a.toLocaleLowerCase();return this.bindings[l]&&(this.bindings[l]=this.bindings[l].filter(u=>{var d;return!(((d=u.type)===null||d===void 0?void 0:d.toLocaleLowerCase())===l&&bu.isEqual(u.filter,r))})),this}static isEqual(a,r){if(Object.keys(a).length!==Object.keys(r).length)return!1;for(const l in a)if(a[l]!==r[l])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(a){this._on(fn.close,{},a)}_onError(a){this._on(fn.error,{},r=>a(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(a=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=bt.joining,this.joinPush.resend(a))}_getPayloadRecords(a){const r={new:{},old:{}};return(a.type==="INSERT"||a.type==="UPDATE")&&(r.new=Mg(a.columns,a.record)),(a.type==="UPDATE"||a.type==="DELETE")&&(r.old=Mg(a.columns,a.old_record)),r}}const Yc=()=>{},pl={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Yv=[1e3,2e3,5e3,1e4],Jv=1e4,Qv=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Xv{constructor(a,r){var l;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=ru,this.transport=null,this.heartbeatIntervalMs=pl.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Yc,this.ref=0,this.reconnectTimer=null,this.vsn=Bg,this.logger=Yc,this.conn=null,this.sendBuffer=[],this.serializer=new Hv,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=u=>u?(...d)=>u(...d):(...d)=>fetch(...d),!(!((l=r?.params)===null||l===void 0)&&l.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${a}/${su.websocket}`,this.httpEndpoint=Hp(a),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Dv.createWebSocket(this.endpointURL())}catch(a){this._setConnectionState("disconnected");const r=a.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(a,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const l=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(l),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(a?this.conn.close(a,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(a){const r=await a.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const a=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),a}log(a,r,l){this.logger(a,r,l)}connectionState(){switch(this.conn&&this.conn.readyState){case Ya.connecting:return Ja.Connecting;case Ya.open:return Ja.Open;case Ya.closing:return Ja.Closing;default:return Ja.Closed}}isConnected(){return this.connectionState()===Ja.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(a,r={config:{}}){const l=`realtime:${a}`,u=this.getChannels().find(d=>d.topic===l);if(u)return u;{const d=new bu(`realtime:${a}`,r,this);return this.channels.push(d),d}}push(a){const{topic:r,event:l,payload:u,ref:d}=a,f=()=>{this.encode(a,g=>{var p;(p=this.conn)===null||p===void 0||p.send(g)})};this.log("push",`${r} ${l} (${d})`,u),this.isConnected()?f():this.sendBuffer.push(f)}async setAuth(a=null){this._authPromise=this._performAuth(a);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var a;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(a=this.conn)===null||a===void 0||a.close(Lv,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},pl.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(a){this.heartbeatCallback=a}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(a=>a()),this.sendBuffer=[])}_makeRef(){let a=this.ref+1;return a===this.ref?this.ref=0:this.ref=a,this.ref.toString()}_leaveOpenTopic(a){let r=this.channels.find(l=>l.topic===a&&(l._isJoined()||l._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${a}"`),r.unsubscribe())}_remove(a){this.channels=this.channels.filter(r=>r.topic!==a.topic)}_onConnMessage(a){this.decode(a.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(m){this.log("error","error in heartbeat callback",m)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:l,event:u,payload:d,ref:f}=r,g=f?`(${f})`:"",p=d.status||"";this.log("receive",`${p} ${l} ${u} ${g}`.trim(),d),this.channels.filter(m=>m._isMember(l)).forEach(m=>m._trigger(u,d,f)),this._triggerStateCallbacks("message",r)})}_clearTimer(a){var r;a==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):a==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=a=>this._onConnError(a),this.conn.onmessage=a=>this._onConnMessage(a),this.conn.onclose=a=>this._onConnClose(a))}_teardownConnection(){if(this.conn){if(this.conn.readyState===Ya.open||this.conn.readyState===Ya.connecting)try{this.conn.close()}catch(a){this.log("error","Error closing connection",a)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(a=>a.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const a=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(a),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(a){var r;this._setConnectionState("disconnected"),this.log("transport","close",a),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",a)}_onConnError(a){this._setConnectionState("disconnected"),this.log("transport",`${a}`),this._triggerChanError(),this._triggerStateCallbacks("error",a)}_triggerChanError(){this.channels.forEach(a=>a._trigger(fn.error))}_appendParams(a,r){if(Object.keys(r).length===0)return a;const l=a.match(/\?/)?"&":"?",u=new URLSearchParams(r);return`${a}${l}${u}`}_workerObjectUrl(a){let r;if(a)r=a;else{const l=new Blob([Qv],{type:"application/javascript"});r=URL.createObjectURL(l)}return r}_setConnectionState(a,r=!1){this._connectionState=a,a==="connecting"?this._wasManualDisconnect=!1:a==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(a=null){let r;a?r=a:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(l=>{const u={access_token:r,version:Bv};r&&l.updateJoinPayload(u),l.joinedOnce&&l._isJoined()&&l._push(fn.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(a="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${a}`,r)})}_triggerStateCallbacks(a,r){try{this.stateChangeCallbacks[a].forEach(l=>{try{l(r)}catch(u){this.log("error",`error in ${a} callback`,u)}})}catch(l){this.log("error",`error triggering ${a} callbacks`,l)}}_setupReconnectionTimer(){this.reconnectTimer=new Lp(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},pl.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(a){var r,l,u,d,f,g,p,m,b,x,S,_;switch(this.transport=(r=a?.transport)!==null&&r!==void 0?r:null,this.timeout=(l=a?.timeout)!==null&&l!==void 0?l:ru,this.heartbeatIntervalMs=(u=a?.heartbeatIntervalMs)!==null&&u!==void 0?u:pl.HEARTBEAT_INTERVAL,this.worker=(d=a?.worker)!==null&&d!==void 0?d:!1,this.accessToken=(f=a?.accessToken)!==null&&f!==void 0?f:null,this.heartbeatCallback=(g=a?.heartbeatCallback)!==null&&g!==void 0?g:Yc,this.vsn=(p=a?.vsn)!==null&&p!==void 0?p:Bg,a?.params&&(this.params=a.params),a?.logger&&(this.logger=a.logger),(a?.logLevel||a?.log_level)&&(this.logLevel=a.logLevel||a.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(m=a?.reconnectAfterMs)!==null&&m!==void 0?m:(w=>Yv[w-1]||Jv),this.vsn){case Mp:this.encode=(b=a?.encode)!==null&&b!==void 0?b:((w,A)=>A(JSON.stringify(w))),this.decode=(x=a?.decode)!==null&&x!==void 0?x:((w,A)=>A(JSON.parse(w)));break;case Mv:this.encode=(S=a?.encode)!==null&&S!==void 0?S:this.serializer.encode.bind(this.serializer),this.decode=(_=a?.decode)!==null&&_!==void 0?_:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=a?.workerUrl}}}class _u extends Error{constructor(a){super(a),this.__isStorageError=!0,this.name="StorageError"}}function lt(o){return typeof o=="object"&&o!==null&&"__isStorageError"in o}class Zv extends _u{constructor(a,r,l){super(a),this.name="StorageApiError",this.status=r,this.statusCode=l}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class ou extends _u{constructor(a,r){super(a),this.name="StorageUnknownError",this.originalError=r}}const xu=o=>o?(...a)=>o(...a):(...a)=>fetch(...a),Fv=()=>Response,cu=o=>{if(Array.isArray(o))return o.map(r=>cu(r));if(typeof o=="function"||o!==Object(o))return o;const a={};return Object.entries(o).forEach(([r,l])=>{const u=r.replace(/([-_][a-z])/gi,d=>d.toUpperCase().replace(/[-_]/g,""));a[u]=cu(l)}),a},Wv=o=>{if(typeof o!="object"||o===null)return!1;const a=Object.getPrototypeOf(o);return(a===null||a===Object.prototype||Object.getPrototypeOf(a)===null)&&!(Symbol.toStringTag in o)&&!(Symbol.iterator in o)},Jc=o=>{var a;return o.msg||o.message||o.error_description||(typeof o.error=="string"?o.error:(a=o.error)===null||a===void 0?void 0:a.message)||JSON.stringify(o)},eb=(o,a,r)=>be(void 0,void 0,void 0,function*(){const l=yield Fv();o instanceof l&&!r?.noResolveJson?o.json().then(u=>{const d=o.status||500,f=u?.statusCode||d+"";a(new Zv(Jc(u),d,f))}).catch(u=>{a(new ou(Jc(u),u))}):a(new ou(Jc(o),o))}),tb=(o,a,r,l)=>{const u={method:o,headers:a?.headers||{}};return o==="GET"||!l?u:(Wv(l)?(u.headers=Object.assign({"Content-Type":"application/json"},a?.headers),u.body=JSON.stringify(l)):u.body=l,a?.duplex&&(u.duplex=a.duplex),Object.assign(Object.assign({},u),r))};function Qr(o,a,r,l,u,d){return be(this,void 0,void 0,function*(){return new Promise((f,g)=>{o(r,tb(a,l,u,d)).then(p=>{if(!p.ok)throw p;return l?.noResolveJson?p:p.json()}).then(p=>f(p)).catch(p=>eb(p,g,l))})})}function Kr(o,a,r,l){return be(this,void 0,void 0,function*(){return Qr(o,"GET",a,r,l)})}function Sn(o,a,r,l,u){return be(this,void 0,void 0,function*(){return Qr(o,"POST",a,l,u,r)})}function uu(o,a,r,l,u){return be(this,void 0,void 0,function*(){return Qr(o,"PUT",a,l,u,r)})}function nb(o,a,r,l){return be(this,void 0,void 0,function*(){return Qr(o,"HEAD",a,Object.assign(Object.assign({},r),{noResolveJson:!0}),l)})}function ju(o,a,r,l,u){return be(this,void 0,void 0,function*(){return Qr(o,"DELETE",a,l,u,r)})}class ab{constructor(a,r){this.downloadFn=a,this.shouldThrowOnError=r}then(a,r){return this.execute().then(a,r)}execute(){return be(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(lt(a))return{data:null,error:a};throw a}})}}var Ip;class ib{constructor(a,r){this.downloadFn=a,this.shouldThrowOnError=r,this[Ip]="BlobDownloadBuilder",this.promise=null}asStream(){return new ab(this.downloadFn,this.shouldThrowOnError)}then(a,r){return this.getPromise().then(a,r)}catch(a){return this.getPromise().catch(a)}finally(a){return this.getPromise().finally(a)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return be(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(lt(a))return{data:null,error:a};throw a}})}}Ip=Symbol.toStringTag;const rb={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Hg={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class sb{constructor(a,r={},l,u){this.shouldThrowOnError=!1,this.url=a,this.headers=r,this.bucketId=l,this.fetch=xu(u)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(a,r,l,u){return be(this,void 0,void 0,function*(){try{let d;const f=Object.assign(Object.assign({},Hg),u);let g=Object.assign(Object.assign({},this.headers),a==="POST"&&{"x-upsert":String(f.upsert)});const p=f.metadata;typeof Blob<"u"&&l instanceof Blob?(d=new FormData,d.append("cacheControl",f.cacheControl),p&&d.append("metadata",this.encodeMetadata(p)),d.append("",l)):typeof FormData<"u"&&l instanceof FormData?(d=l,d.has("cacheControl")||d.append("cacheControl",f.cacheControl),p&&!d.has("metadata")&&d.append("metadata",this.encodeMetadata(p))):(d=l,g["cache-control"]=`max-age=${f.cacheControl}`,g["content-type"]=f.contentType,p&&(g["x-metadata"]=this.toBase64(this.encodeMetadata(p))),(typeof ReadableStream<"u"&&d instanceof ReadableStream||d&&typeof d=="object"&&"pipe"in d&&typeof d.pipe=="function")&&!f.duplex&&(f.duplex="half")),u?.headers&&(g=Object.assign(Object.assign({},g),u.headers));const m=this._removeEmptyFolders(r),b=this._getFinalPath(m),x=yield(a=="PUT"?uu:Sn)(this.fetch,`${this.url}/object/${b}`,d,Object.assign({headers:g},f?.duplex?{duplex:f.duplex}:{}));return{data:{path:m,id:x.Id,fullPath:x.Key},error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(lt(d))return{data:null,error:d};throw d}})}upload(a,r,l){return be(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",a,r,l)})}uploadToSignedUrl(a,r,l,u){return be(this,void 0,void 0,function*(){const d=this._removeEmptyFolders(a),f=this._getFinalPath(d),g=new URL(this.url+`/object/upload/sign/${f}`);g.searchParams.set("token",r);try{let p;const m=Object.assign({upsert:Hg.upsert},u),b=Object.assign(Object.assign({},this.headers),{"x-upsert":String(m.upsert)});typeof Blob<"u"&&l instanceof Blob?(p=new FormData,p.append("cacheControl",m.cacheControl),p.append("",l)):typeof FormData<"u"&&l instanceof FormData?(p=l,p.append("cacheControl",m.cacheControl)):(p=l,b["cache-control"]=`max-age=${m.cacheControl}`,b["content-type"]=m.contentType);const x=yield uu(this.fetch,g.toString(),p,{headers:b});return{data:{path:d,fullPath:x.Key},error:null}}catch(p){if(this.shouldThrowOnError)throw p;if(lt(p))return{data:null,error:p};throw p}})}createSignedUploadUrl(a,r){return be(this,void 0,void 0,function*(){try{let l=this._getFinalPath(a);const u=Object.assign({},this.headers);r?.upsert&&(u["x-upsert"]="true");const d=yield Sn(this.fetch,`${this.url}/object/upload/sign/${l}`,{},{headers:u}),f=new URL(this.url+d.url),g=f.searchParams.get("token");if(!g)throw new _u("No token returned by API");return{data:{signedUrl:f.toString(),path:a,token:g},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(lt(l))return{data:null,error:l};throw l}})}update(a,r,l){return be(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",a,r,l)})}move(a,r,l){return be(this,void 0,void 0,function*(){try{return{data:yield Sn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:a,destinationKey:r,destinationBucket:l?.destinationBucket},{headers:this.headers}),error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(lt(u))return{data:null,error:u};throw u}})}copy(a,r,l){return be(this,void 0,void 0,function*(){try{return{data:{path:(yield Sn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:a,destinationKey:r,destinationBucket:l?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(lt(u))return{data:null,error:u};throw u}})}createSignedUrl(a,r,l){return be(this,void 0,void 0,function*(){try{let u=this._getFinalPath(a),d=yield Sn(this.fetch,`${this.url}/object/sign/${u}`,Object.assign({expiresIn:r},l?.transform?{transform:l.transform}:{}),{headers:this.headers});const f=l?.download?`&download=${l.download===!0?"":l.download}`:"";return d={signedUrl:encodeURI(`${this.url}${d.signedURL}${f}`)},{data:d,error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(lt(u))return{data:null,error:u};throw u}})}createSignedUrls(a,r,l){return be(this,void 0,void 0,function*(){try{const u=yield Sn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:a},{headers:this.headers}),d=l?.download?`&download=${l.download===!0?"":l.download}`:"";return{data:u.map(f=>Object.assign(Object.assign({},f),{signedUrl:f.signedURL?encodeURI(`${this.url}${f.signedURL}${d}`):null})),error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(lt(u))return{data:null,error:u};throw u}})}download(a,r){const u=typeof r?.transform<"u"?"render/image/authenticated":"object",d=this.transformOptsToQueryString(r?.transform||{}),f=d?`?${d}`:"",g=this._getFinalPath(a),p=()=>Kr(this.fetch,`${this.url}/${u}/${g}${f}`,{headers:this.headers,noResolveJson:!0});return new ib(p,this.shouldThrowOnError)}info(a){return be(this,void 0,void 0,function*(){const r=this._getFinalPath(a);try{const l=yield Kr(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:cu(l),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(lt(l))return{data:null,error:l};throw l}})}exists(a){return be(this,void 0,void 0,function*(){const r=this._getFinalPath(a);try{return yield nb(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(lt(l)&&l instanceof ou){const u=l.originalError;if([400,404].includes(u?.status))return{data:!1,error:l}}throw l}})}getPublicUrl(a,r){const l=this._getFinalPath(a),u=[],d=r?.download?`download=${r.download===!0?"":r.download}`:"";d!==""&&u.push(d);const g=typeof r?.transform<"u"?"render/image":"object",p=this.transformOptsToQueryString(r?.transform||{});p!==""&&u.push(p);let m=u.join("&");return m!==""&&(m=`?${m}`),{data:{publicUrl:encodeURI(`${this.url}/${g}/public/${l}${m}`)}}}remove(a){return be(this,void 0,void 0,function*(){try{return{data:yield ju(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:a},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(lt(r))return{data:null,error:r};throw r}})}list(a,r,l){return be(this,void 0,void 0,function*(){try{const u=Object.assign(Object.assign(Object.assign({},rb),r),{prefix:a||""});return{data:yield Sn(this.fetch,`${this.url}/object/list/${this.bucketId}`,u,{headers:this.headers},l),error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(lt(u))return{data:null,error:u};throw u}})}listV2(a,r){return be(this,void 0,void 0,function*(){try{const l=Object.assign({},a);return{data:yield Sn(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,l,{headers:this.headers},r),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(lt(l))return{data:null,error:l};throw l}})}encodeMetadata(a){return JSON.stringify(a)}toBase64(a){return typeof Buffer<"u"?Buffer.from(a).toString("base64"):btoa(a)}_getFinalPath(a){return`${this.bucketId}/${a.replace(/^\/+/,"")}`}_removeEmptyFolders(a){return a.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(a){const r=[];return a.width&&r.push(`width=${a.width}`),a.height&&r.push(`height=${a.height}`),a.resize&&r.push(`resize=${a.resize}`),a.format&&r.push(`format=${a.format}`),a.quality&&r.push(`quality=${a.quality}`),r.join("&")}}const Vp="2.81.1",$p={"X-Client-Info":`storage-js/${Vp}`};class lb{constructor(a,r={},l,u){this.shouldThrowOnError=!1;const d=new URL(a);u?.useNewHostname&&/supabase\.(co|in|red)$/.test(d.hostname)&&!d.hostname.includes("storage.supabase.")&&(d.hostname=d.hostname.replace("supabase.","storage.supabase.")),this.url=d.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},$p),r),this.fetch=xu(l)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(a){return be(this,void 0,void 0,function*(){try{const r=this.listBucketOptionsToQueryString(a);return{data:yield Kr(this.fetch,`${this.url}/bucket${r}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(lt(r))return{data:null,error:r};throw r}})}getBucket(a){return be(this,void 0,void 0,function*(){try{return{data:yield Kr(this.fetch,`${this.url}/bucket/${a}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(lt(r))return{data:null,error:r};throw r}})}createBucket(a){return be(this,arguments,void 0,function*(r,l={public:!1}){try{return{data:yield Sn(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:l.type,public:l.public,file_size_limit:l.fileSizeLimit,allowed_mime_types:l.allowedMimeTypes},{headers:this.headers}),error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(lt(u))return{data:null,error:u};throw u}})}updateBucket(a,r){return be(this,void 0,void 0,function*(){try{return{data:yield uu(this.fetch,`${this.url}/bucket/${a}`,{id:a,name:a,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(lt(l))return{data:null,error:l};throw l}})}emptyBucket(a){return be(this,void 0,void 0,function*(){try{return{data:yield Sn(this.fetch,`${this.url}/bucket/${a}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(lt(r))return{data:null,error:r};throw r}})}deleteBucket(a){return be(this,void 0,void 0,function*(){try{return{data:yield ju(this.fetch,`${this.url}/bucket/${a}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(lt(r))return{data:null,error:r};throw r}})}listBucketOptionsToQueryString(a){const r={};return a&&("limit"in a&&(r.limit=String(a.limit)),"offset"in a&&(r.offset=String(a.offset)),a.search&&(r.search=a.search),a.sortColumn&&(r.sortColumn=a.sortColumn),a.sortOrder&&(r.sortOrder=a.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}}class ob{constructor(a,r={},l){this.shouldThrowOnError=!1,this.url=a.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},$p),r),this.fetch=xu(l)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(a){return be(this,void 0,void 0,function*(){try{return{data:yield Sn(this.fetch,`${this.url}/bucket`,{name:a},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(lt(r))return{data:null,error:r};throw r}})}listBuckets(a){return be(this,void 0,void 0,function*(){try{const r=new URLSearchParams;a?.limit!==void 0&&r.set("limit",a.limit.toString()),a?.offset!==void 0&&r.set("offset",a.offset.toString()),a?.sortColumn&&r.set("sortColumn",a.sortColumn),a?.sortOrder&&r.set("sortOrder",a.sortOrder),a?.search&&r.set("search",a.search);const l=r.toString(),u=l?`${this.url}/bucket?${l}`:`${this.url}/bucket`;return{data:yield Kr(this.fetch,u,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(lt(r))return{data:null,error:r};throw r}})}deleteBucket(a){return be(this,void 0,void 0,function*(){try{return{data:yield ju(this.fetch,`${this.url}/bucket/${a}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(lt(r))return{data:null,error:r};throw r}})}}const Su={"X-Client-Info":`storage-js/${Vp}`,"Content-Type":"application/json"};class Gp extends Error{constructor(a){super(a),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Zt(o){return typeof o=="object"&&o!==null&&"__isStorageVectorsError"in o}class Qc extends Gp{constructor(a,r,l){super(a),this.name="StorageVectorsApiError",this.status=r,this.statusCode=l}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class cb extends Gp{constructor(a,r){super(a),this.name="StorageVectorsUnknownError",this.originalError=r}}var Ig;(function(o){o.InternalError="InternalError",o.S3VectorConflictException="S3VectorConflictException",o.S3VectorNotFoundException="S3VectorNotFoundException",o.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",o.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",o.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(Ig||(Ig={}));const wu=o=>o?(...a)=>o(...a):(...a)=>fetch(...a),ub=o=>{if(typeof o!="object"||o===null)return!1;const a=Object.getPrototypeOf(o);return(a===null||a===Object.prototype||Object.getPrototypeOf(a)===null)&&!(Symbol.toStringTag in o)&&!(Symbol.iterator in o)},Vg=o=>o.msg||o.message||o.error_description||o.error||JSON.stringify(o),db=(o,a,r)=>be(void 0,void 0,void 0,function*(){if(o&&typeof o=="object"&&"status"in o&&"ok"in o&&typeof o.status=="number"&&!r?.noResolveJson){const u=o.status||500,d=o;if(typeof d.json=="function")d.json().then(f=>{const g=f?.statusCode||f?.code||u+"";a(new Qc(Vg(f),u,g))}).catch(()=>{const f=u+"",g=d.statusText||`HTTP ${u} error`;a(new Qc(g,u,f))});else{const f=u+"",g=d.statusText||`HTTP ${u} error`;a(new Qc(g,u,f))}}else a(new cb(Vg(o),o))}),hb=(o,a,r,l)=>{const u={method:o,headers:a?.headers||{}};return l?(ub(l)?(u.headers=Object.assign({"Content-Type":"application/json"},a?.headers),u.body=JSON.stringify(l)):u.body=l,Object.assign(Object.assign({},u),r)):u};function fb(o,a,r,l,u,d){return be(this,void 0,void 0,function*(){return new Promise((f,g)=>{o(r,hb(a,l,u,d)).then(p=>{if(!p.ok)throw p;if(l?.noResolveJson)return p;const m=p.headers.get("content-type");return!m||!m.includes("application/json")?{}:p.json()}).then(p=>f(p)).catch(p=>db(p,g,l))})})}function Ft(o,a,r,l,u){return be(this,void 0,void 0,function*(){return fb(o,"POST",a,l,u,r)})}class gb{constructor(a,r={},l){this.shouldThrowOnError=!1,this.url=a.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Su),r),this.fetch=wu(l)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(a){return be(this,void 0,void 0,function*(){try{return{data:(yield Ft(this.fetch,`${this.url}/CreateIndex`,a,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Zt(r))return{data:null,error:r};throw r}})}getIndex(a,r){return be(this,void 0,void 0,function*(){try{return{data:yield Ft(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:a,indexName:r},{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Zt(l))return{data:null,error:l};throw l}})}listIndexes(a){return be(this,void 0,void 0,function*(){try{return{data:yield Ft(this.fetch,`${this.url}/ListIndexes`,a,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Zt(r))return{data:null,error:r};throw r}})}deleteIndex(a,r){return be(this,void 0,void 0,function*(){try{return{data:(yield Ft(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:a,indexName:r},{headers:this.headers}))||{},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Zt(l))return{data:null,error:l};throw l}})}}class pb{constructor(a,r={},l){this.shouldThrowOnError=!1,this.url=a.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Su),r),this.fetch=wu(l)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(a){return be(this,void 0,void 0,function*(){try{if(a.vectors.length<1||a.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Ft(this.fetch,`${this.url}/PutVectors`,a,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Zt(r))return{data:null,error:r};throw r}})}getVectors(a){return be(this,void 0,void 0,function*(){try{return{data:yield Ft(this.fetch,`${this.url}/GetVectors`,a,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Zt(r))return{data:null,error:r};throw r}})}listVectors(a){return be(this,void 0,void 0,function*(){try{if(a.segmentCount!==void 0){if(a.segmentCount<1||a.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(a.segmentIndex!==void 0&&(a.segmentIndex<0||a.segmentIndex>=a.segmentCount))throw new Error(`segmentIndex must be between 0 and ${a.segmentCount-1}`)}return{data:yield Ft(this.fetch,`${this.url}/ListVectors`,a,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Zt(r))return{data:null,error:r};throw r}})}queryVectors(a){return be(this,void 0,void 0,function*(){try{return{data:yield Ft(this.fetch,`${this.url}/QueryVectors`,a,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Zt(r))return{data:null,error:r};throw r}})}deleteVectors(a){return be(this,void 0,void 0,function*(){try{if(a.keys.length<1||a.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Ft(this.fetch,`${this.url}/DeleteVectors`,a,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Zt(r))return{data:null,error:r};throw r}})}}class mb{constructor(a,r={},l){this.shouldThrowOnError=!1,this.url=a.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Su),r),this.fetch=wu(l)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(a){return be(this,void 0,void 0,function*(){try{return{data:(yield Ft(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:a},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Zt(r))return{data:null,error:r};throw r}})}getBucket(a){return be(this,void 0,void 0,function*(){try{return{data:yield Ft(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:a},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Zt(r))return{data:null,error:r};throw r}})}listBuckets(){return be(this,arguments,void 0,function*(a={}){try{return{data:yield Ft(this.fetch,`${this.url}/ListVectorBuckets`,a,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Zt(r))return{data:null,error:r};throw r}})}deleteBucket(a){return be(this,void 0,void 0,function*(){try{return{data:(yield Ft(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:a},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Zt(r))return{data:null,error:r};throw r}})}}class yb extends mb{constructor(a,r={}){super(a,r.headers||{},r.fetch)}from(a){return new vb(this.url,this.headers,a,this.fetch)}}class vb extends gb{constructor(a,r,l,u){super(a,r,u),this.vectorBucketName=l}createIndex(a){const r=Object.create(null,{createIndex:{get:()=>super.createIndex}});return be(this,void 0,void 0,function*(){return r.createIndex.call(this,Object.assign(Object.assign({},a),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const a=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return be(this,arguments,void 0,function*(r={}){return a.listIndexes.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}getIndex(a){const r=Object.create(null,{getIndex:{get:()=>super.getIndex}});return be(this,void 0,void 0,function*(){return r.getIndex.call(this,this.vectorBucketName,a)})}deleteIndex(a){const r=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return be(this,void 0,void 0,function*(){return r.deleteIndex.call(this,this.vectorBucketName,a)})}index(a){return new bb(this.url,this.headers,this.vectorBucketName,a,this.fetch)}}class bb extends pb{constructor(a,r,l,u,d){super(a,r,d),this.vectorBucketName=l,this.indexName=u}putVectors(a){const r=Object.create(null,{putVectors:{get:()=>super.putVectors}});return be(this,void 0,void 0,function*(){return r.putVectors.call(this,Object.assign(Object.assign({},a),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(a){const r=Object.create(null,{getVectors:{get:()=>super.getVectors}});return be(this,void 0,void 0,function*(){return r.getVectors.call(this,Object.assign(Object.assign({},a),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const a=Object.create(null,{listVectors:{get:()=>super.listVectors}});return be(this,arguments,void 0,function*(r={}){return a.listVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(a){const r=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return be(this,void 0,void 0,function*(){return r.queryVectors.call(this,Object.assign(Object.assign({},a),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(a){const r=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return be(this,void 0,void 0,function*(){return r.deleteVectors.call(this,Object.assign(Object.assign({},a),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class _b extends lb{constructor(a,r={},l,u){super(a,r,l,u)}from(a){return new sb(this.url,this.headers,a,this.fetch)}get vectors(){return new yb(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new ob(this.url+"/iceberg",this.headers,this.fetch)}}const xb="2.81.1";let $r="";typeof Deno<"u"?$r="deno":typeof document<"u"?$r="web":typeof navigator<"u"&&navigator.product==="ReactNative"?$r="react-native":$r="node";const jb={"X-Client-Info":`supabase-js-${$r}/${xb}`},Sb={headers:jb},wb={schema:"public"},Eb={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Tb={},Cb=o=>o?(...a)=>o(...a):(...a)=>fetch(...a),Ab=()=>Headers,Ob=(o,a,r)=>{const l=Cb(r),u=Ab();return async(d,f)=>{var g;const p=(g=await a())!==null&&g!==void 0?g:o;let m=new u(f?.headers);return m.has("apikey")||m.set("apikey",o),m.has("Authorization")||m.set("Authorization",`Bearer ${p}`),l(d,Object.assign(Object.assign({},f),{headers:m}))}};function Rb(o){return o.endsWith("/")?o:o+"/"}function Nb(o,a){var r,l;const{db:u,auth:d,realtime:f,global:g}=o,{db:p,auth:m,realtime:b,global:x}=a,S={db:Object.assign(Object.assign({},p),u),auth:Object.assign(Object.assign({},m),d),realtime:Object.assign(Object.assign({},b),f),storage:{},global:Object.assign(Object.assign(Object.assign({},x),g),{headers:Object.assign(Object.assign({},(r=x?.headers)!==null&&r!==void 0?r:{}),(l=g?.headers)!==null&&l!==void 0?l:{})}),accessToken:async()=>""};return o.accessToken?S.accessToken=o.accessToken:delete S.accessToken,S}function Ub(o){const a=o?.trim();if(!a)throw new Error("supabaseUrl is required.");if(!a.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Rb(a))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Pp="2.81.1",$i=30*1e3,du=3,Xc=du*$i,kb="http://localhost:9999",Db="supabase.auth.token",zb={"X-Client-Info":`gotrue-js/${Pp}`},hu="X-Supabase-Api-Version",Kp={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Bb=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Mb=600*1e3;class Yr extends Error{constructor(a,r,l){super(a),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=l}}function xe(o){return typeof o=="object"&&o!==null&&"__isAuthError"in o}class Lb extends Yr{constructor(a,r,l){super(a,r,l),this.name="AuthApiError",this.status=r,this.code=l}}function qb(o){return xe(o)&&o.name==="AuthApiError"}class Qa extends Yr{constructor(a,r){super(a),this.name="AuthUnknownError",this.originalError=r}}class Sa extends Yr{constructor(a,r,l,u){super(a,l,u),this.name=r,this.status=l}}class xn extends Sa{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Hb(o){return xe(o)&&o.name==="AuthSessionMissingError"}class Li extends Sa{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ml extends Sa{constructor(a){super(a,"AuthInvalidCredentialsError",400,void 0)}}class yl extends Sa{constructor(a,r=null){super(a,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Ib(o){return xe(o)&&o.name==="AuthImplicitGrantRedirectError"}class $g extends Sa{constructor(a,r=null){super(a,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class fu extends Sa{constructor(a,r){super(a,"AuthRetryableFetchError",r,void 0)}}function Zc(o){return xe(o)&&o.name==="AuthRetryableFetchError"}class Gg extends Sa{constructor(a,r,l){super(a,"AuthWeakPasswordError",r,"weak_password"),this.reasons=l}}class gu extends Sa{constructor(a){super(a,"AuthInvalidJwtError",400,"invalid_jwt")}}const _l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Pg=` 	
\r=`.split(""),Vb=(()=>{const o=new Array(128);for(let a=0;a<o.length;a+=1)o[a]=-1;for(let a=0;a<Pg.length;a+=1)o[Pg[a].charCodeAt(0)]=-2;for(let a=0;a<_l.length;a+=1)o[_l[a].charCodeAt(0)]=a;return o})();function Kg(o,a,r){if(o!==null)for(a.queue=a.queue<<8|o,a.queuedBits+=8;a.queuedBits>=6;){const l=a.queue>>a.queuedBits-6&63;r(_l[l]),a.queuedBits-=6}else if(a.queuedBits>0)for(a.queue=a.queue<<6-a.queuedBits,a.queuedBits=6;a.queuedBits>=6;){const l=a.queue>>a.queuedBits-6&63;r(_l[l]),a.queuedBits-=6}}function Yp(o,a,r){const l=Vb[o];if(l>-1)for(a.queue=a.queue<<6|l,a.queuedBits+=6;a.queuedBits>=8;)r(a.queue>>a.queuedBits-8&255),a.queuedBits-=8;else{if(l===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(o)}"`)}}function Yg(o){const a=[],r=f=>{a.push(String.fromCodePoint(f))},l={utf8seq:0,codepoint:0},u={queue:0,queuedBits:0},d=f=>{Pb(f,l,r)};for(let f=0;f<o.length;f+=1)Yp(o.charCodeAt(f),u,d);return a.join("")}function $b(o,a){if(o<=127){a(o);return}else if(o<=2047){a(192|o>>6),a(128|o&63);return}else if(o<=65535){a(224|o>>12),a(128|o>>6&63),a(128|o&63);return}else if(o<=1114111){a(240|o>>18),a(128|o>>12&63),a(128|o>>6&63),a(128|o&63);return}throw new Error(`Unrecognized Unicode codepoint: ${o.toString(16)}`)}function Gb(o,a){for(let r=0;r<o.length;r+=1){let l=o.charCodeAt(r);if(l>55295&&l<=56319){const u=(l-55296)*1024&65535;l=(o.charCodeAt(r+1)-56320&65535|u)+65536,r+=1}$b(l,a)}}function Pb(o,a,r){if(a.utf8seq===0){if(o<=127){r(o);return}for(let l=1;l<6;l+=1)if((o>>7-l&1)===0){a.utf8seq=l;break}if(a.utf8seq===2)a.codepoint=o&31;else if(a.utf8seq===3)a.codepoint=o&15;else if(a.utf8seq===4)a.codepoint=o&7;else throw new Error("Invalid UTF-8 sequence");a.utf8seq-=1}else if(a.utf8seq>0){if(o<=127)throw new Error("Invalid UTF-8 sequence");a.codepoint=a.codepoint<<6|o&63,a.utf8seq-=1,a.utf8seq===0&&r(a.codepoint)}}function Pi(o){const a=[],r={queue:0,queuedBits:0},l=u=>{a.push(u)};for(let u=0;u<o.length;u+=1)Yp(o.charCodeAt(u),r,l);return new Uint8Array(a)}function Kb(o){const a=[];return Gb(o,r=>a.push(r)),new Uint8Array(a)}function Xa(o){const a=[],r={queue:0,queuedBits:0},l=u=>{a.push(u)};return o.forEach(u=>Kg(u,r,l)),Kg(null,r,l),a.join("")}function Yb(o){return Math.round(Date.now()/1e3)+o}function Jb(){return Symbol("auth-callback")}const At=()=>typeof window<"u"&&typeof document<"u",$a={tested:!1,writable:!1},Jp=()=>{if(!At())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if($a.tested)return $a.writable;const o=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(o,o),globalThis.localStorage.removeItem(o),$a.tested=!0,$a.writable=!0}catch{$a.tested=!0,$a.writable=!1}return $a.writable};function Qb(o){const a={},r=new URL(o);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((u,d)=>{a[d]=u})}catch{}return r.searchParams.forEach((l,u)=>{a[u]=l}),a}const Qp=o=>o?(...a)=>o(...a):(...a)=>fetch(...a),Xb=o=>typeof o=="object"&&o!==null&&"status"in o&&"ok"in o&&"json"in o&&typeof o.json=="function",Gi=async(o,a,r)=>{await o.setItem(a,JSON.stringify(r))},Ga=async(o,a)=>{const r=await o.getItem(a);if(!r)return null;try{return JSON.parse(r)}catch{return r}},ba=async(o,a)=>{await o.removeItem(a)};class wl{constructor(){this.promise=new wl.promiseConstructor((a,r)=>{this.resolve=a,this.reject=r})}}wl.promiseConstructor=Promise;function Fc(o){const a=o.split(".");if(a.length!==3)throw new gu("Invalid JWT structure");for(let l=0;l<a.length;l++)if(!Bb.test(a[l]))throw new gu("JWT not in base64url format");return{header:JSON.parse(Yg(a[0])),payload:JSON.parse(Yg(a[1])),signature:Pi(a[2]),raw:{header:a[0],payload:a[1]}}}async function Zb(o){return await new Promise(a=>{setTimeout(()=>a(null),o)})}function Fb(o,a){return new Promise((l,u)=>{(async()=>{for(let d=0;d<1/0;d++)try{const f=await o(d);if(!a(d,null,f)){l(f);return}}catch(f){if(!a(d,f)){u(f);return}}})()})}function Wb(o){return("0"+o.toString(16)).substr(-2)}function e0(){const a=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",l=r.length;let u="";for(let d=0;d<56;d++)u+=r.charAt(Math.floor(Math.random()*l));return u}return crypto.getRandomValues(a),Array.from(a,Wb).join("")}async function t0(o){const r=new TextEncoder().encode(o),l=await crypto.subtle.digest("SHA-256",r),u=new Uint8Array(l);return Array.from(u).map(d=>String.fromCharCode(d)).join("")}async function n0(o){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),o;const r=await t0(o);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function qi(o,a,r=!1){const l=e0();let u=l;r&&(u+="/PASSWORD_RECOVERY"),await Gi(o,`${a}-code-verifier`,u);const d=await n0(l);return[d,l===d?"plain":"s256"]}const a0=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function i0(o){const a=o.headers.get(hu);if(!a||!a.match(a0))return null;try{return new Date(`${a}T00:00:00.0Z`)}catch{return null}}function r0(o){if(!o)throw new Error("Missing exp claim");const a=Math.floor(Date.now()/1e3);if(o<=a)throw new Error("JWT has expired")}function s0(o){switch(o){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const l0=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Hi(o){if(!l0.test(o))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Wc(){const o={};return new Proxy(o,{get:(a,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const l=r.toString();if(l==="Symbol(Symbol.toPrimitive)"||l==="Symbol(Symbol.toStringTag)"||l==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(a,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(a,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function o0(o,a){return new Proxy(o,{get:(r,l,u)=>{if(l==="__isInsecureUserWarningProxy")return!0;if(typeof l=="symbol"){const d=l.toString();if(d==="Symbol(Symbol.toPrimitive)"||d==="Symbol(Symbol.toStringTag)"||d==="Symbol(util.inspect.custom)"||d==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,l,u)}return!a.value&&typeof l=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a.value=!0),Reflect.get(r,l,u)}})}function Jg(o){return JSON.parse(JSON.stringify(o))}const Ka=o=>o.msg||o.message||o.error_description||o.error||JSON.stringify(o),c0=[502,503,504];async function Qg(o){var a;if(!Xb(o))throw new fu(Ka(o),0);if(c0.includes(o.status))throw new fu(Ka(o),o.status);let r;try{r=await o.json()}catch(d){throw new Qa(Ka(d),d)}let l;const u=i0(o);if(u&&u.getTime()>=Kp["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?l=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(l=r.error_code),l){if(l==="weak_password")throw new Gg(Ka(r),o.status,((a=r.weak_password)===null||a===void 0?void 0:a.reasons)||[]);if(l==="session_not_found")throw new xn}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((d,f)=>d&&typeof f=="string",!0))throw new Gg(Ka(r),o.status,r.weak_password.reasons);throw new Lb(Ka(r),o.status||500,l)}const u0=(o,a,r,l)=>{const u={method:o,headers:a?.headers||{}};return o==="GET"?u:(u.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},a?.headers),u.body=JSON.stringify(l),Object.assign(Object.assign({},u),r))};async function we(o,a,r,l){var u;const d=Object.assign({},l?.headers);d[hu]||(d[hu]=Kp["2024-01-01"].name),l?.jwt&&(d.Authorization=`Bearer ${l.jwt}`);const f=(u=l?.query)!==null&&u!==void 0?u:{};l?.redirectTo&&(f.redirect_to=l.redirectTo);const g=Object.keys(f).length?"?"+new URLSearchParams(f).toString():"",p=await d0(o,a,r+g,{headers:d,noResolveJson:l?.noResolveJson},{},l?.body);return l?.xform?l?.xform(p):{data:Object.assign({},p),error:null}}async function d0(o,a,r,l,u,d){const f=u0(a,l,u,d);let g;try{g=await o(r,Object.assign({},f))}catch(p){throw console.error(p),new fu(Ka(p),0)}if(g.ok||await Qg(g),l?.noResolveJson)return g;try{return await g.json()}catch(p){await Qg(p)}}function jn(o){var a;let r=null;g0(o)&&(r=Object.assign({},o),o.expires_at||(r.expires_at=Yb(o.expires_in)));const l=(a=o.user)!==null&&a!==void 0?a:o;return{data:{session:r,user:l},error:null}}function Xg(o){const a=jn(o);return!a.error&&o.weak_password&&typeof o.weak_password=="object"&&Array.isArray(o.weak_password.reasons)&&o.weak_password.reasons.length&&o.weak_password.message&&typeof o.weak_password.message=="string"&&o.weak_password.reasons.reduce((r,l)=>r&&typeof l=="string",!0)&&(a.data.weak_password=o.weak_password),a}function ja(o){var a;return{data:{user:(a=o.user)!==null&&a!==void 0?a:o},error:null}}function h0(o){return{data:o,error:null}}function f0(o){const{action_link:a,email_otp:r,hashed_token:l,redirect_to:u,verification_type:d}=o,f=Yi(o,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),g={action_link:a,email_otp:r,hashed_token:l,redirect_to:u,verification_type:d},p=Object.assign({},f);return{data:{properties:g,user:p},error:null}}function Zg(o){return o}function g0(o){return o.access_token&&o.refresh_token&&o.expires_in}const eu=["global","local","others"];class p0{constructor({url:a="",headers:r={},fetch:l}){this.url=a,this.headers=r,this.fetch=Qp(l),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(a,r=eu[0]){if(eu.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${eu.join(", ")}`);try{return await we(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:a,noResolveJson:!0}),{data:null,error:null}}catch(l){if(xe(l))return{data:null,error:l};throw l}}async inviteUserByEmail(a,r={}){try{return await we(this.fetch,"POST",`${this.url}/invite`,{body:{email:a,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:ja})}catch(l){if(xe(l))return{data:{user:null},error:l};throw l}}async generateLink(a){try{const{options:r}=a,l=Yi(a,["options"]),u=Object.assign(Object.assign({},l),r);return"newEmail"in l&&(u.new_email=l?.newEmail,delete u.newEmail),await we(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:u,headers:this.headers,xform:f0,redirectTo:r?.redirectTo})}catch(r){if(xe(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(a){try{return await we(this.fetch,"POST",`${this.url}/admin/users`,{body:a,headers:this.headers,xform:ja})}catch(r){if(xe(r))return{data:{user:null},error:r};throw r}}async listUsers(a){var r,l,u,d,f,g,p;try{const m={nextPage:null,lastPage:0,total:0},b=await we(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(l=(r=a?.page)===null||r===void 0?void 0:r.toString())!==null&&l!==void 0?l:"",per_page:(d=(u=a?.perPage)===null||u===void 0?void 0:u.toString())!==null&&d!==void 0?d:""},xform:Zg});if(b.error)throw b.error;const x=await b.json(),S=(f=b.headers.get("x-total-count"))!==null&&f!==void 0?f:0,_=(p=(g=b.headers.get("link"))===null||g===void 0?void 0:g.split(","))!==null&&p!==void 0?p:[];return _.length>0&&(_.forEach(w=>{const A=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),R=JSON.parse(w.split(";")[1].split("=")[1]);m[`${R}Page`]=A}),m.total=parseInt(S)),{data:Object.assign(Object.assign({},x),m),error:null}}catch(m){if(xe(m))return{data:{users:[]},error:m};throw m}}async getUserById(a){Hi(a);try{return await we(this.fetch,"GET",`${this.url}/admin/users/${a}`,{headers:this.headers,xform:ja})}catch(r){if(xe(r))return{data:{user:null},error:r};throw r}}async updateUserById(a,r){Hi(a);try{return await we(this.fetch,"PUT",`${this.url}/admin/users/${a}`,{body:r,headers:this.headers,xform:ja})}catch(l){if(xe(l))return{data:{user:null},error:l};throw l}}async deleteUser(a,r=!1){Hi(a);try{return await we(this.fetch,"DELETE",`${this.url}/admin/users/${a}`,{headers:this.headers,body:{should_soft_delete:r},xform:ja})}catch(l){if(xe(l))return{data:{user:null},error:l};throw l}}async _listFactors(a){Hi(a.userId);try{const{data:r,error:l}=await we(this.fetch,"GET",`${this.url}/admin/users/${a.userId}/factors`,{headers:this.headers,xform:u=>({data:{factors:u},error:null})});return{data:r,error:l}}catch(r){if(xe(r))return{data:null,error:r};throw r}}async _deleteFactor(a){Hi(a.userId),Hi(a.id);try{return{data:await we(this.fetch,"DELETE",`${this.url}/admin/users/${a.userId}/factors/${a.id}`,{headers:this.headers}),error:null}}catch(r){if(xe(r))return{data:null,error:r};throw r}}async _listOAuthClients(a){var r,l,u,d,f,g,p;try{const m={nextPage:null,lastPage:0,total:0},b=await we(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(l=(r=a?.page)===null||r===void 0?void 0:r.toString())!==null&&l!==void 0?l:"",per_page:(d=(u=a?.perPage)===null||u===void 0?void 0:u.toString())!==null&&d!==void 0?d:""},xform:Zg});if(b.error)throw b.error;const x=await b.json(),S=(f=b.headers.get("x-total-count"))!==null&&f!==void 0?f:0,_=(p=(g=b.headers.get("link"))===null||g===void 0?void 0:g.split(","))!==null&&p!==void 0?p:[];return _.length>0&&(_.forEach(w=>{const A=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),R=JSON.parse(w.split(";")[1].split("=")[1]);m[`${R}Page`]=A}),m.total=parseInt(S)),{data:Object.assign(Object.assign({},x),m),error:null}}catch(m){if(xe(m))return{data:{clients:[]},error:m};throw m}}async _createOAuthClient(a){try{return await we(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:a,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(xe(r))return{data:null,error:r};throw r}}async _getOAuthClient(a){try{return await we(this.fetch,"GET",`${this.url}/admin/oauth/clients/${a}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(xe(r))return{data:null,error:r};throw r}}async _updateOAuthClient(a,r){try{return await we(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${a}`,{body:r,headers:this.headers,xform:l=>({data:l,error:null})})}catch(l){if(xe(l))return{data:null,error:l};throw l}}async _deleteOAuthClient(a){try{return await we(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${a}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(xe(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(a){try{return await we(this.fetch,"POST",`${this.url}/admin/oauth/clients/${a}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(xe(r))return{data:null,error:r};throw r}}}function Fg(o={}){return{getItem:a=>o[a]||null,setItem:(a,r)=>{o[a]=r},removeItem:a=>{delete o[a]}}}const Ii={debug:!!(globalThis&&Jp()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Xp extends Error{constructor(a){super(a),this.isAcquireTimeout=!0}}class m0 extends Xp{}async function y0(o,a,r){Ii.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",o,a);const l=new globalThis.AbortController;return a>0&&setTimeout(()=>{l.abort(),Ii.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",o)},a),await Promise.resolve().then(()=>globalThis.navigator.locks.request(o,a===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:l.signal},async u=>{if(u){Ii.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",o,u.name);try{return await r()}finally{Ii.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",o,u.name)}}else{if(a===0)throw Ii.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",o),new m0(`Acquiring an exclusive Navigator LockManager lock "${o}" immediately failed`);if(Ii.debug)try{const d=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(d,null,"  "))}catch(d){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",d)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function v0(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Zp(o){if(!/^0x[a-fA-F0-9]{40}$/.test(o))throw new Error(`@supabase/auth-js: Address "${o}" is invalid.`);return o.toLowerCase()}function b0(o){return parseInt(o,16)}function _0(o){const a=new TextEncoder().encode(o);return"0x"+Array.from(a,l=>l.toString(16).padStart(2,"0")).join("")}function x0(o){var a;const{chainId:r,domain:l,expirationTime:u,issuedAt:d=new Date,nonce:f,notBefore:g,requestId:p,resources:m,scheme:b,uri:x,version:S}=o;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!l)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(f&&f.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${f}`);if(!x)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(S!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${S}`);if(!((a=o.statement)===null||a===void 0)&&a.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${o.statement}`)}const _=Zp(o.address),w=b?`${b}://${l}`:l,A=o.statement?`${o.statement}
`:"",R=`${w} wants you to sign in with your Ethereum account:
${_}

${A}`;let T=`URI: ${x}
Version: ${S}
Chain ID: ${r}${f?`
Nonce: ${f}`:""}
Issued At: ${d.toISOString()}`;if(u&&(T+=`
Expiration Time: ${u.toISOString()}`),g&&(T+=`
Not Before: ${g.toISOString()}`),p&&(T+=`
Request ID: ${p}`),m){let I=`
Resources:`;for(const M of m){if(!M||typeof M!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${M}`);I+=`
- ${M}`}T+=I}return`${R}
${T}`}class mt extends Error{constructor({message:a,code:r,cause:l,name:u}){var d;super(a,{cause:l}),this.__isWebAuthnError=!0,this.name=(d=u??(l instanceof Error?l.name:void 0))!==null&&d!==void 0?d:"Unknown Error",this.code=r}}class xl extends mt{constructor(a,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:a}),this.name="WebAuthnUnknownError",this.originalError=r}}function j0({error:o,options:a}){var r,l,u;const{publicKey:d}=a;if(!d)throw Error("options was missing required publicKey property");if(o.name==="AbortError"){if(a.signal instanceof AbortSignal)return new mt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:o})}else if(o.name==="ConstraintError"){if(((r=d.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new mt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:o});if(a.mediation==="conditional"&&((l=d.authenticatorSelection)===null||l===void 0?void 0:l.userVerification)==="required")return new mt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:o});if(((u=d.authenticatorSelection)===null||u===void 0?void 0:u.userVerification)==="required")return new mt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:o})}else{if(o.name==="InvalidStateError")return new mt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:o});if(o.name==="NotAllowedError")return new mt({message:o.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:o});if(o.name==="NotSupportedError")return d.pubKeyCredParams.filter(g=>g.type==="public-key").length===0?new mt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:o}):new mt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:o});if(o.name==="SecurityError"){const f=window.location.hostname;if(Fp(f)){if(d.rp.id!==f)return new mt({message:`The RP ID "${d.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:o})}else return new mt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:o})}else if(o.name==="TypeError"){if(d.user.id.byteLength<1||d.user.id.byteLength>64)return new mt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:o})}else if(o.name==="UnknownError")return new mt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:o})}return new mt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:o})}function S0({error:o,options:a}){const{publicKey:r}=a;if(!r)throw Error("options was missing required publicKey property");if(o.name==="AbortError"){if(a.signal instanceof AbortSignal)return new mt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:o})}else{if(o.name==="NotAllowedError")return new mt({message:o.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:o});if(o.name==="SecurityError"){const l=window.location.hostname;if(Fp(l)){if(r.rpId!==l)return new mt({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:o})}else return new mt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:o})}else if(o.name==="UnknownError")return new mt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:o})}return new mt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:o})}class w0{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const a=new AbortController;return this.controller=a,a.signal}cancelCeremony(){if(this.controller){const a=new Error("Manually cancelling existing WebAuthn API call");a.name="AbortError",this.controller.abort(a),this.controller=void 0}}}const E0=new w0;function T0(o){if(!o)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(o);const{challenge:a,user:r,excludeCredentials:l}=o,u=Yi(o,["challenge","user","excludeCredentials"]),d=Pi(a).buffer,f=Object.assign(Object.assign({},r),{id:Pi(r.id).buffer}),g=Object.assign(Object.assign({},u),{challenge:d,user:f});if(l&&l.length>0){g.excludeCredentials=new Array(l.length);for(let p=0;p<l.length;p++){const m=l[p];g.excludeCredentials[p]=Object.assign(Object.assign({},m),{id:Pi(m.id).buffer,type:m.type||"public-key",transports:m.transports})}}return g}function C0(o){if(!o)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(o);const{challenge:a,allowCredentials:r}=o,l=Yi(o,["challenge","allowCredentials"]),u=Pi(a).buffer,d=Object.assign(Object.assign({},l),{challenge:u});if(r&&r.length>0){d.allowCredentials=new Array(r.length);for(let f=0;f<r.length;f++){const g=r[f];d.allowCredentials[f]=Object.assign(Object.assign({},g),{id:Pi(g.id).buffer,type:g.type||"public-key",transports:g.transports})}}return d}function A0(o){var a;if("toJSON"in o&&typeof o.toJSON=="function")return o.toJSON();const r=o;return{id:o.id,rawId:o.id,response:{attestationObject:Xa(new Uint8Array(o.response.attestationObject)),clientDataJSON:Xa(new Uint8Array(o.response.clientDataJSON))},type:"public-key",clientExtensionResults:o.getClientExtensionResults(),authenticatorAttachment:(a=r.authenticatorAttachment)!==null&&a!==void 0?a:void 0}}function O0(o){var a;if("toJSON"in o&&typeof o.toJSON=="function")return o.toJSON();const r=o,l=o.getClientExtensionResults(),u=o.response;return{id:o.id,rawId:o.id,response:{authenticatorData:Xa(new Uint8Array(u.authenticatorData)),clientDataJSON:Xa(new Uint8Array(u.clientDataJSON)),signature:Xa(new Uint8Array(u.signature)),userHandle:u.userHandle?Xa(new Uint8Array(u.userHandle)):void 0},type:"public-key",clientExtensionResults:l,authenticatorAttachment:(a=r.authenticatorAttachment)!==null&&a!==void 0?a:void 0}}function Fp(o){return o==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(o)}function Wg(){var o,a;return!!(At()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((o=navigator?.credentials)===null||o===void 0?void 0:o.create)=="function"&&typeof((a=navigator?.credentials)===null||a===void 0?void 0:a.get)=="function")}async function R0(o){try{const a=await navigator.credentials.create(o);return a?a instanceof PublicKeyCredential?{data:a,error:null}:{data:null,error:new xl("Browser returned unexpected credential type",a)}:{data:null,error:new xl("Empty credential response",a)}}catch(a){return{data:null,error:j0({error:a,options:o})}}}async function N0(o){try{const a=await navigator.credentials.get(o);return a?a instanceof PublicKeyCredential?{data:a,error:null}:{data:null,error:new xl("Browser returned unexpected credential type",a)}:{data:null,error:new xl("Empty credential response",a)}}catch(a){return{data:null,error:S0({error:a,options:o})}}}const U0={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},k0={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function jl(...o){const a=u=>u!==null&&typeof u=="object"&&!Array.isArray(u),r=u=>u instanceof ArrayBuffer||ArrayBuffer.isView(u),l={};for(const u of o)if(u)for(const d in u){const f=u[d];if(f!==void 0)if(Array.isArray(f))l[d]=f;else if(r(f))l[d]=f;else if(a(f)){const g=l[d];a(g)?l[d]=jl(g,f):l[d]=jl(f)}else l[d]=f}return l}function D0(o,a){return jl(U0,o,a||{})}function z0(o,a){return jl(k0,o,a||{})}class B0{constructor(a){this.client=a,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(a){return this.client.mfa.enroll(Object.assign(Object.assign({},a),{factorType:"webauthn"}))}async _challenge({factorId:a,webauthn:r,friendlyName:l,signal:u},d){try{const{data:f,error:g}=await this.client.mfa.challenge({factorId:a,webauthn:r});if(!f)return{data:null,error:g};const p=u??E0.createNewAbortSignal();if(f.webauthn.type==="create"){const{user:m}=f.webauthn.credential_options.publicKey;m.name||(m.name=`${m.id}:${l}`),m.displayName||(m.displayName=m.name)}switch(f.webauthn.type){case"create":{const m=D0(f.webauthn.credential_options.publicKey,d?.create),{data:b,error:x}=await R0({publicKey:m,signal:p});return b?{data:{factorId:a,challengeId:f.id,webauthn:{type:f.webauthn.type,credential_response:b}},error:null}:{data:null,error:x}}case"request":{const m=z0(f.webauthn.credential_options.publicKey,d?.request),{data:b,error:x}=await N0(Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:m,signal:p}));return b?{data:{factorId:a,challengeId:f.id,webauthn:{type:f.webauthn.type,credential_response:b}},error:null}:{data:null,error:x}}}}catch(f){return xe(f)?{data:null,error:f}:{data:null,error:new Qa("Unexpected error in challenge",f)}}}async _verify({challengeId:a,factorId:r,webauthn:l}){return this.client.mfa.verify({factorId:r,challengeId:a,webauthn:l})}async _authenticate({factorId:a,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:l=typeof window<"u"?[window.location.origin]:void 0,signal:u}={}},d){if(!r)return{data:null,error:new Yr("rpId is required for WebAuthn authentication")};try{if(!Wg())return{data:null,error:new Qa("Browser does not support WebAuthn",null)};const{data:f,error:g}=await this.challenge({factorId:a,webauthn:{rpId:r,rpOrigins:l},signal:u},{request:d});if(!f)return{data:null,error:g};const{webauthn:p}=f;return this._verify({factorId:a,challengeId:f.challengeId,webauthn:{type:p.type,rpId:r,rpOrigins:l,credential_response:p.credential_response}})}catch(f){return xe(f)?{data:null,error:f}:{data:null,error:new Qa("Unexpected error in authenticate",f)}}}async _register({friendlyName:a,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:l=typeof window<"u"?[window.location.origin]:void 0,signal:u}={}},d){if(!r)return{data:null,error:new Yr("rpId is required for WebAuthn registration")};try{if(!Wg())return{data:null,error:new Qa("Browser does not support WebAuthn",null)};const{data:f,error:g}=await this._enroll({friendlyName:a});if(!f)return await this.client.mfa.listFactors().then(b=>{var x;return(x=b.data)===null||x===void 0?void 0:x.all.find(S=>S.factor_type==="webauthn"&&S.friendly_name===a&&S.status!=="unverified")}).then(b=>b?this.client.mfa.unenroll({factorId:b?.id}):void 0),{data:null,error:g};const{data:p,error:m}=await this._challenge({factorId:f.id,friendlyName:f.friendly_name,webauthn:{rpId:r,rpOrigins:l},signal:u},{create:d});return p?this._verify({factorId:f.id,challengeId:p.challengeId,webauthn:{rpId:r,rpOrigins:l,type:p.webauthn.type,credential_response:p.webauthn.credential_response}}):{data:null,error:m}}catch(f){return xe(f)?{data:null,error:f}:{data:null,error:new Qa("Unexpected error in register",f)}}}}v0();const M0={url:kb,storageKey:Db,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:zb,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function ep(o,a,r){return await r()}const Vi={};class Jr{get jwks(){var a,r;return(r=(a=Vi[this.storageKey])===null||a===void 0?void 0:a.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(a){Vi[this.storageKey]=Object.assign(Object.assign({},Vi[this.storageKey]),{jwks:a})}get jwks_cached_at(){var a,r;return(r=(a=Vi[this.storageKey])===null||a===void 0?void 0:a.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(a){Vi[this.storageKey]=Object.assign(Object.assign({},Vi[this.storageKey]),{cachedAt:a})}constructor(a){var r,l,u;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const d=Object.assign(Object.assign({},M0),a);if(this.storageKey=d.storageKey,this.instanceID=(r=Jr.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,Jr.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!d.debug,typeof d.debug=="function"&&(this.logger=d.debug),this.instanceID>0&&At()){const f=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(f),this.logDebugMessages&&console.trace(f)}if(this.persistSession=d.persistSession,this.autoRefreshToken=d.autoRefreshToken,this.admin=new p0({url:d.url,headers:d.headers,fetch:d.fetch}),this.url=d.url,this.headers=d.headers,this.fetch=Qp(d.fetch),this.lock=d.lock||ep,this.detectSessionInUrl=d.detectSessionInUrl,this.flowType=d.flowType,this.hasCustomAuthorizationHeader=d.hasCustomAuthorizationHeader,this.throwOnError=d.throwOnError,d.lock?this.lock=d.lock:At()&&(!((l=globalThis?.navigator)===null||l===void 0)&&l.locks)?this.lock=y0:this.lock=ep,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new B0(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(d.storage?this.storage=d.storage:Jp()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Fg(this.memoryStorage)),d.userStorage&&(this.userStorage=d.userStorage)):(this.memoryStorage={},this.storage=Fg(this.memoryStorage)),At()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(f){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",f)}(u=this.broadcastChannel)===null||u===void 0||u.addEventListener("message",async f=>{this._debug("received broadcast notification from other tab or client",f),await this._notifyAllSubscribers(f.data.event,f.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(a){if(this.throwOnError&&a&&a.error)throw a.error;return a}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Pp}) ${new Date().toISOString()}`}_debug(...a){return this.logDebugMessages&&this.logger(this._logPrefix(),...a),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var a;try{let r={},l="none";if(At()&&(r=Qb(window.location.href),this._isImplicitGrantCallback(r)?l="implicit":await this._isPKCECallback(r)&&(l="pkce")),At()&&this.detectSessionInUrl&&l!=="none"){const{data:u,error:d}=await this._getSessionFromURL(r,l);if(d){if(this._debug("#_initialize()","error detecting session from URL",d),Ib(d)){const p=(a=d.details)===null||a===void 0?void 0:a.code;if(p==="identity_already_exists"||p==="identity_not_found"||p==="single_identity_not_deletable")return{error:d}}return await this._removeSession(),{error:d}}const{session:f,redirectType:g}=u;return this._debug("#_initialize()","detected session in URL",f,"redirect type",g),await this._saveSession(f),setTimeout(async()=>{g==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",f):await this._notifyAllSubscribers("SIGNED_IN",f)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return xe(r)?this._returnResult({error:r}):this._returnResult({error:new Qa("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(a){var r,l,u;try{const d=await we(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(l=(r=a?.options)===null||r===void 0?void 0:r.data)!==null&&l!==void 0?l:{},gotrue_meta_security:{captcha_token:(u=a?.options)===null||u===void 0?void 0:u.captchaToken}},xform:jn}),{data:f,error:g}=d;if(g||!f)return this._returnResult({data:{user:null,session:null},error:g});const p=f.session,m=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",p)),this._returnResult({data:{user:m,session:p},error:null})}catch(d){if(xe(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}}async signUp(a){var r,l,u;try{let d;if("email"in a){const{email:b,password:x,options:S}=a;let _=null,w=null;this.flowType==="pkce"&&([_,w]=await qi(this.storage,this.storageKey)),d=await we(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:S?.emailRedirectTo,body:{email:b,password:x,data:(r=S?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:S?.captchaToken},code_challenge:_,code_challenge_method:w},xform:jn})}else if("phone"in a){const{phone:b,password:x,options:S}=a;d=await we(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:b,password:x,data:(l=S?.data)!==null&&l!==void 0?l:{},channel:(u=S?.channel)!==null&&u!==void 0?u:"sms",gotrue_meta_security:{captcha_token:S?.captchaToken}},xform:jn})}else throw new ml("You must provide either an email or phone number and a password");const{data:f,error:g}=d;if(g||!f)return this._returnResult({data:{user:null,session:null},error:g});const p=f.session,m=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",p)),this._returnResult({data:{user:m,session:p},error:null})}catch(d){if(xe(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}}async signInWithPassword(a){try{let r;if("email"in a){const{email:d,password:f,options:g}=a;r=await we(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:d,password:f,gotrue_meta_security:{captcha_token:g?.captchaToken}},xform:Xg})}else if("phone"in a){const{phone:d,password:f,options:g}=a;r=await we(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:d,password:f,gotrue_meta_security:{captcha_token:g?.captchaToken}},xform:Xg})}else throw new ml("You must provide either an email or phone number and a password");const{data:l,error:u}=r;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!l||!l.session||!l.user){const d=new Li;return this._returnResult({data:{user:null,session:null},error:d})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:Object.assign({user:l.user,session:l.session},l.weak_password?{weakPassword:l.weak_password}:null),error:u})}catch(r){if(xe(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(a){var r,l,u,d;return await this._handleProviderSignIn(a.provider,{redirectTo:(r=a.options)===null||r===void 0?void 0:r.redirectTo,scopes:(l=a.options)===null||l===void 0?void 0:l.scopes,queryParams:(u=a.options)===null||u===void 0?void 0:u.queryParams,skipBrowserRedirect:(d=a.options)===null||d===void 0?void 0:d.skipBrowserRedirect})}async exchangeCodeForSession(a){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(a))}async signInWithWeb3(a){const{chain:r}=a;switch(r){case"ethereum":return await this.signInWithEthereum(a);case"solana":return await this.signInWithSolana(a);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(a){var r,l,u,d,f,g,p,m,b,x,S;let _,w;if("message"in a)_=a.message,w=a.signature;else{const{chain:A,wallet:R,statement:T,options:I}=a;let M;if(At())if(typeof R=="object")M=R;else{const le=window;if("ethereum"in le&&typeof le.ethereum=="object"&&"request"in le.ethereum&&typeof le.ethereum.request=="function")M=le.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof R!="object"||!I?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");M=R}const J=new URL((r=I?.url)!==null&&r!==void 0?r:window.location.href),C=await M.request({method:"eth_requestAccounts"}).then(le=>le).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!C||C.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const z=Zp(C[0]);let k=(l=I?.signInWithEthereum)===null||l===void 0?void 0:l.chainId;if(!k){const le=await M.request({method:"eth_chainId"});k=b0(le)}const V={domain:J.host,address:z,statement:T,uri:J.href,version:"1",chainId:k,nonce:(u=I?.signInWithEthereum)===null||u===void 0?void 0:u.nonce,issuedAt:(f=(d=I?.signInWithEthereum)===null||d===void 0?void 0:d.issuedAt)!==null&&f!==void 0?f:new Date,expirationTime:(g=I?.signInWithEthereum)===null||g===void 0?void 0:g.expirationTime,notBefore:(p=I?.signInWithEthereum)===null||p===void 0?void 0:p.notBefore,requestId:(m=I?.signInWithEthereum)===null||m===void 0?void 0:m.requestId,resources:(b=I?.signInWithEthereum)===null||b===void 0?void 0:b.resources};_=x0(V),w=await M.request({method:"personal_sign",params:[_0(_),z]})}try{const{data:A,error:R}=await we(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:_,signature:w},!((x=a.options)===null||x===void 0)&&x.captchaToken?{gotrue_meta_security:{captcha_token:(S=a.options)===null||S===void 0?void 0:S.captchaToken}}:null),xform:jn});if(R)throw R;if(!A||!A.session||!A.user){const T=new Li;return this._returnResult({data:{user:null,session:null},error:T})}return A.session&&(await this._saveSession(A.session),await this._notifyAllSubscribers("SIGNED_IN",A.session)),this._returnResult({data:Object.assign({},A),error:R})}catch(A){if(xe(A))return this._returnResult({data:{user:null,session:null},error:A});throw A}}async signInWithSolana(a){var r,l,u,d,f,g,p,m,b,x,S,_;let w,A;if("message"in a)w=a.message,A=a.signature;else{const{chain:R,wallet:T,statement:I,options:M}=a;let J;if(At())if(typeof T=="object")J=T;else{const z=window;if("solana"in z&&typeof z.solana=="object"&&("signIn"in z.solana&&typeof z.solana.signIn=="function"||"signMessage"in z.solana&&typeof z.solana.signMessage=="function"))J=z.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof T!="object"||!M?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");J=T}const C=new URL((r=M?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in J&&J.signIn){const z=await J.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},M?.signInWithSolana),{version:"1",domain:C.host,uri:C.href}),I?{statement:I}:null));let k;if(Array.isArray(z)&&z[0]&&typeof z[0]=="object")k=z[0];else if(z&&typeof z=="object"&&"signedMessage"in z&&"signature"in z)k=z;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in k&&"signature"in k&&(typeof k.signedMessage=="string"||k.signedMessage instanceof Uint8Array)&&k.signature instanceof Uint8Array)w=typeof k.signedMessage=="string"?k.signedMessage:new TextDecoder().decode(k.signedMessage),A=k.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in J)||typeof J.signMessage!="function"||!("publicKey"in J)||typeof J!="object"||!J.publicKey||!("toBase58"in J.publicKey)||typeof J.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");w=[`${C.host} wants you to sign in with your Solana account:`,J.publicKey.toBase58(),...I?["",I,""]:[""],"Version: 1",`URI: ${C.href}`,`Issued At: ${(u=(l=M?.signInWithSolana)===null||l===void 0?void 0:l.issuedAt)!==null&&u!==void 0?u:new Date().toISOString()}`,...!((d=M?.signInWithSolana)===null||d===void 0)&&d.notBefore?[`Not Before: ${M.signInWithSolana.notBefore}`]:[],...!((f=M?.signInWithSolana)===null||f===void 0)&&f.expirationTime?[`Expiration Time: ${M.signInWithSolana.expirationTime}`]:[],...!((g=M?.signInWithSolana)===null||g===void 0)&&g.chainId?[`Chain ID: ${M.signInWithSolana.chainId}`]:[],...!((p=M?.signInWithSolana)===null||p===void 0)&&p.nonce?[`Nonce: ${M.signInWithSolana.nonce}`]:[],...!((m=M?.signInWithSolana)===null||m===void 0)&&m.requestId?[`Request ID: ${M.signInWithSolana.requestId}`]:[],...!((x=(b=M?.signInWithSolana)===null||b===void 0?void 0:b.resources)===null||x===void 0)&&x.length?["Resources",...M.signInWithSolana.resources.map(k=>`- ${k}`)]:[]].join(`
`);const z=await J.signMessage(new TextEncoder().encode(w),"utf8");if(!z||!(z instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");A=z}}try{const{data:R,error:T}=await we(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:w,signature:Xa(A)},!((S=a.options)===null||S===void 0)&&S.captchaToken?{gotrue_meta_security:{captcha_token:(_=a.options)===null||_===void 0?void 0:_.captchaToken}}:null),xform:jn});if(T)throw T;if(!R||!R.session||!R.user){const I=new Li;return this._returnResult({data:{user:null,session:null},error:I})}return R.session&&(await this._saveSession(R.session),await this._notifyAllSubscribers("SIGNED_IN",R.session)),this._returnResult({data:Object.assign({},R),error:T})}catch(R){if(xe(R))return this._returnResult({data:{user:null,session:null},error:R});throw R}}async _exchangeCodeForSession(a){const r=await Ga(this.storage,`${this.storageKey}-code-verifier`),[l,u]=(r??"").split("/");try{const{data:d,error:f}=await we(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:a,code_verifier:l},xform:jn});if(await ba(this.storage,`${this.storageKey}-code-verifier`),f)throw f;if(!d||!d.session||!d.user){const g=new Li;return this._returnResult({data:{user:null,session:null,redirectType:null},error:g})}return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),this._returnResult({data:Object.assign(Object.assign({},d),{redirectType:u??null}),error:f})}catch(d){if(xe(d))return this._returnResult({data:{user:null,session:null,redirectType:null},error:d});throw d}}async signInWithIdToken(a){try{const{options:r,provider:l,token:u,access_token:d,nonce:f}=a,g=await we(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:l,id_token:u,access_token:d,nonce:f,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:jn}),{data:p,error:m}=g;if(m)return this._returnResult({data:{user:null,session:null},error:m});if(!p||!p.session||!p.user){const b=new Li;return this._returnResult({data:{user:null,session:null},error:b})}return p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),this._returnResult({data:p,error:m})}catch(r){if(xe(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(a){var r,l,u,d,f;try{if("email"in a){const{email:g,options:p}=a;let m=null,b=null;this.flowType==="pkce"&&([m,b]=await qi(this.storage,this.storageKey));const{error:x}=await we(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:g,data:(r=p?.data)!==null&&r!==void 0?r:{},create_user:(l=p?.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:p?.captchaToken},code_challenge:m,code_challenge_method:b},redirectTo:p?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:x})}if("phone"in a){const{phone:g,options:p}=a,{data:m,error:b}=await we(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:g,data:(u=p?.data)!==null&&u!==void 0?u:{},create_user:(d=p?.shouldCreateUser)!==null&&d!==void 0?d:!0,gotrue_meta_security:{captcha_token:p?.captchaToken},channel:(f=p?.channel)!==null&&f!==void 0?f:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:m?.message_id},error:b})}throw new ml("You must provide either an email or phone number.")}catch(g){if(xe(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}}async verifyOtp(a){var r,l;try{let u,d;"options"in a&&(u=(r=a.options)===null||r===void 0?void 0:r.redirectTo,d=(l=a.options)===null||l===void 0?void 0:l.captchaToken);const{data:f,error:g}=await we(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},a),{gotrue_meta_security:{captcha_token:d}}),redirectTo:u,xform:jn});if(g)throw g;if(!f)throw new Error("An error occurred on token verification.");const p=f.session,m=f.user;return p?.access_token&&(await this._saveSession(p),await this._notifyAllSubscribers(a.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",p)),this._returnResult({data:{user:m,session:p},error:null})}catch(u){if(xe(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async signInWithSSO(a){var r,l,u,d,f;try{let g=null,p=null;this.flowType==="pkce"&&([g,p]=await qi(this.storage,this.storageKey));const m=await we(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in a?{provider_id:a.providerId}:null),"domain"in a?{domain:a.domain}:null),{redirect_to:(l=(r=a.options)===null||r===void 0?void 0:r.redirectTo)!==null&&l!==void 0?l:void 0}),!((u=a?.options)===null||u===void 0)&&u.captchaToken?{gotrue_meta_security:{captcha_token:a.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:g,code_challenge_method:p}),headers:this.headers,xform:h0});return!((d=m.data)===null||d===void 0)&&d.url&&At()&&!(!((f=a.options)===null||f===void 0)&&f.skipBrowserRedirect)&&window.location.assign(m.data.url),this._returnResult(m)}catch(g){if(xe(g))return this._returnResult({data:null,error:g});throw g}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async a=>{const{data:{session:r},error:l}=a;if(l)throw l;if(!r)throw new xn;const{error:u}=await we(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:u})})}catch(a){if(xe(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async resend(a){try{const r=`${this.url}/resend`;if("email"in a){const{email:l,type:u,options:d}=a,{error:f}=await we(this.fetch,"POST",r,{headers:this.headers,body:{email:l,type:u,gotrue_meta_security:{captcha_token:d?.captchaToken}},redirectTo:d?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:f})}else if("phone"in a){const{phone:l,type:u,options:d}=a,{data:f,error:g}=await we(this.fetch,"POST",r,{headers:this.headers,body:{phone:l,type:u,gotrue_meta_security:{captcha_token:d?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:f?.message_id},error:g})}throw new ml("You must provide either an email or phone number and a type")}catch(r){if(xe(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(a,r){this._debug("#_acquireLock","begin",a);try{if(this.lockAcquired){const l=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),u=(async()=>(await l,await r()))();return this.pendingInLock.push((async()=>{try{await u}catch{}})()),u}return await this.lock(`lock:${this.storageKey}`,a,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const l=r();for(this.pendingInLock.push((async()=>{try{await l}catch{}})()),await l;this.pendingInLock.length;){const u=[...this.pendingInLock];await Promise.all(u),this.pendingInLock.splice(0,u.length)}return await l}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(a){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await a(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let a=null;const r=await Ga(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?a=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!a)return{data:{session:null},error:null};const l=a.expires_at?a.expires_at*1e3-Date.now()<Xc:!1;if(this._debug("#__loadSession()",`session has${l?"":" not"} expired`,"expires_at",a.expires_at),!l){if(this.userStorage){const f=await Ga(this.userStorage,this.storageKey+"-user");f?.user?a.user=f.user:a.user=Wc()}if(this.storage.isServer&&a.user&&!a.user.__isUserNotAvailableProxy){const f={value:this.suppressGetSessionWarning};a.user=o0(a.user,f),f.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:a},error:null}}const{data:u,error:d}=await this._callRefreshToken(a.refresh_token);return d?this._returnResult({data:{session:null},error:d}):this._returnResult({data:{session:u},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(a){return a?await this._getUser(a):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(a){try{return a?await we(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:a,xform:ja}):await this._useSession(async r=>{var l,u,d;const{data:f,error:g}=r;if(g)throw g;return!(!((l=f.session)===null||l===void 0)&&l.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new xn}:await we(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(d=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0,xform:ja})})}catch(r){if(xe(r))return Hb(r)&&(await this._removeSession(),await ba(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(a,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(a,r))}async _updateUser(a,r={}){try{return await this._useSession(async l=>{const{data:u,error:d}=l;if(d)throw d;if(!u.session)throw new xn;const f=u.session;let g=null,p=null;this.flowType==="pkce"&&a.email!=null&&([g,p]=await qi(this.storage,this.storageKey));const{data:m,error:b}=await we(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},a),{code_challenge:g,code_challenge_method:p}),jwt:f.access_token,xform:ja});if(b)throw b;return f.user=m.user,await this._saveSession(f),await this._notifyAllSubscribers("USER_UPDATED",f),this._returnResult({data:{user:f.user},error:null})})}catch(l){if(xe(l))return this._returnResult({data:{user:null},error:l});throw l}}async setSession(a){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(a))}async _setSession(a){try{if(!a.access_token||!a.refresh_token)throw new xn;const r=Date.now()/1e3;let l=r,u=!0,d=null;const{payload:f}=Fc(a.access_token);if(f.exp&&(l=f.exp,u=l<=r),u){const{data:g,error:p}=await this._callRefreshToken(a.refresh_token);if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!g)return{data:{user:null,session:null},error:null};d=g}else{const{data:g,error:p}=await this._getUser(a.access_token);if(p)throw p;d={access_token:a.access_token,refresh_token:a.refresh_token,user:g.user,token_type:"bearer",expires_in:l-r,expires_at:l},await this._saveSession(d),await this._notifyAllSubscribers("SIGNED_IN",d)}return this._returnResult({data:{user:d.user,session:d},error:null})}catch(r){if(xe(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(a){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(a))}async _refreshSession(a){try{return await this._useSession(async r=>{var l;if(!a){const{data:f,error:g}=r;if(g)throw g;a=(l=f.session)!==null&&l!==void 0?l:void 0}if(!a?.refresh_token)throw new xn;const{data:u,error:d}=await this._callRefreshToken(a.refresh_token);return d?this._returnResult({data:{user:null,session:null},error:d}):u?this._returnResult({data:{user:u.user,session:u},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(xe(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(a,r){try{if(!At())throw new yl("No browser detected.");if(a.error||a.error_description||a.error_code)throw new yl(a.error_description||"Error in URL with unspecified error_description",{error:a.error||"unspecified_error",code:a.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new $g("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new yl("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!a.code)throw new $g("No code detected.");const{data:I,error:M}=await this._exchangeCodeForSession(a.code);if(M)throw M;const J=new URL(window.location.href);return J.searchParams.delete("code"),window.history.replaceState(window.history.state,"",J.toString()),{data:{session:I.session,redirectType:null},error:null}}const{provider_token:l,provider_refresh_token:u,access_token:d,refresh_token:f,expires_in:g,expires_at:p,token_type:m}=a;if(!d||!g||!f||!m)throw new yl("No session defined in URL");const b=Math.round(Date.now()/1e3),x=parseInt(g);let S=b+x;p&&(S=parseInt(p));const _=S-b;_*1e3<=$i&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${_}s, should have been closer to ${x}s`);const w=S-x;b-w>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",w,S,b):b-w<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",w,S,b);const{data:A,error:R}=await this._getUser(d);if(R)throw R;const T={provider_token:l,provider_refresh_token:u,access_token:d,expires_in:x,expires_at:S,refresh_token:f,token_type:m,user:A.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:T,redirectType:a.type},error:null})}catch(l){if(xe(l))return this._returnResult({data:{session:null,redirectType:null},error:l});throw l}}_isImplicitGrantCallback(a){return!!(a.access_token||a.error_description)}async _isPKCECallback(a){const r=await Ga(this.storage,`${this.storageKey}-code-verifier`);return!!(a.code&&r)}async signOut(a={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(a))}async _signOut({scope:a}={scope:"global"}){return await this._useSession(async r=>{var l;const{data:u,error:d}=r;if(d)return this._returnResult({error:d});const f=(l=u.session)===null||l===void 0?void 0:l.access_token;if(f){const{error:g}=await this.admin.signOut(f,a);if(g&&!(qb(g)&&(g.status===404||g.status===401||g.status===403)))return this._returnResult({error:g})}return a!=="others"&&(await this._removeSession(),await ba(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(a){const r=Jb(),l={id:r,callback:a,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,l),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:l}}}async _emitInitialSession(a){return await this._useSession(async r=>{var l,u;try{const{data:{session:d},error:f}=r;if(f)throw f;await((l=this.stateChangeEmitters.get(a))===null||l===void 0?void 0:l.callback("INITIAL_SESSION",d)),this._debug("INITIAL_SESSION","callback id",a,"session",d)}catch(d){await((u=this.stateChangeEmitters.get(a))===null||u===void 0?void 0:u.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",a,"error",d),console.error(d)}})}async resetPasswordForEmail(a,r={}){let l=null,u=null;this.flowType==="pkce"&&([l,u]=await qi(this.storage,this.storageKey,!0));try{return await we(this.fetch,"POST",`${this.url}/recover`,{body:{email:a,code_challenge:l,code_challenge_method:u,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(d){if(xe(d))return this._returnResult({data:null,error:d});throw d}}async getUserIdentities(){var a;try{const{data:r,error:l}=await this.getUser();if(l)throw l;return this._returnResult({data:{identities:(a=r.user.identities)!==null&&a!==void 0?a:[]},error:null})}catch(r){if(xe(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(a){return"token"in a?this.linkIdentityIdToken(a):this.linkIdentityOAuth(a)}async linkIdentityOAuth(a){var r;try{const{data:l,error:u}=await this._useSession(async d=>{var f,g,p,m,b;const{data:x,error:S}=d;if(S)throw S;const _=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,a.provider,{redirectTo:(f=a.options)===null||f===void 0?void 0:f.redirectTo,scopes:(g=a.options)===null||g===void 0?void 0:g.scopes,queryParams:(p=a.options)===null||p===void 0?void 0:p.queryParams,skipBrowserRedirect:!0});return await we(this.fetch,"GET",_,{headers:this.headers,jwt:(b=(m=x.session)===null||m===void 0?void 0:m.access_token)!==null&&b!==void 0?b:void 0})});if(u)throw u;return At()&&!(!((r=a.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(l?.url),this._returnResult({data:{provider:a.provider,url:l?.url},error:null})}catch(l){if(xe(l))return this._returnResult({data:{provider:a.provider,url:null},error:l});throw l}}async linkIdentityIdToken(a){return await this._useSession(async r=>{var l;try{const{error:u,data:{session:d}}=r;if(u)throw u;const{options:f,provider:g,token:p,access_token:m,nonce:b}=a,x=await we(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(l=d?.access_token)!==null&&l!==void 0?l:void 0,body:{provider:g,id_token:p,access_token:m,nonce:b,link_identity:!0,gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:jn}),{data:S,error:_}=x;return _?this._returnResult({data:{user:null,session:null},error:_}):!S||!S.session||!S.user?this._returnResult({data:{user:null,session:null},error:new Li}):(S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("USER_UPDATED",S.session)),this._returnResult({data:S,error:_}))}catch(u){if(xe(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}})}async unlinkIdentity(a){try{return await this._useSession(async r=>{var l,u;const{data:d,error:f}=r;if(f)throw f;return await we(this.fetch,"DELETE",`${this.url}/user/identities/${a.identity_id}`,{headers:this.headers,jwt:(u=(l=d.session)===null||l===void 0?void 0:l.access_token)!==null&&u!==void 0?u:void 0})})}catch(r){if(xe(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(a){const r=`#_refreshAccessToken(${a.substring(0,5)}...)`;this._debug(r,"begin");try{const l=Date.now();return await Fb(async u=>(u>0&&await Zb(200*Math.pow(2,u-1)),this._debug(r,"refreshing attempt",u),await we(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:a},headers:this.headers,xform:jn})),(u,d)=>{const f=200*Math.pow(2,u);return d&&Zc(d)&&Date.now()+f-l<$i})}catch(l){if(this._debug(r,"error",l),xe(l))return this._returnResult({data:{session:null,user:null},error:l});throw l}finally{this._debug(r,"end")}}_isValidSession(a){return typeof a=="object"&&a!==null&&"access_token"in a&&"refresh_token"in a&&"expires_at"in a}async _handleProviderSignIn(a,r){const l=await this._getUrlForProvider(`${this.url}/authorize`,a,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",a,"options",r,"url",l),At()&&!r.skipBrowserRedirect&&window.location.assign(l),{data:{provider:a,url:l},error:null}}async _recoverAndRefresh(){var a,r;const l="#_recoverAndRefresh()";this._debug(l,"begin");try{const u=await Ga(this.storage,this.storageKey);if(u&&this.userStorage){let f=await Ga(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!f&&(f={user:u.user},await Gi(this.userStorage,this.storageKey+"-user",f)),u.user=(a=f?.user)!==null&&a!==void 0?a:Wc()}else if(u&&!u.user&&!u.user){const f=await Ga(this.storage,this.storageKey+"-user");f&&f?.user?(u.user=f.user,await ba(this.storage,this.storageKey+"-user"),await Gi(this.storage,this.storageKey,u)):u.user=Wc()}if(this._debug(l,"session from storage",u),!this._isValidSession(u)){this._debug(l,"session is not valid"),u!==null&&await this._removeSession();return}const d=((r=u.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Xc;if(this._debug(l,`session has${d?"":" not"} expired with margin of ${Xc}s`),d){if(this.autoRefreshToken&&u.refresh_token){const{error:f}=await this._callRefreshToken(u.refresh_token);f&&(console.error(f),Zc(f)||(this._debug(l,"refresh failed with a non-retryable error, removing the session",f),await this._removeSession()))}}else if(u.user&&u.user.__isUserNotAvailableProxy===!0)try{const{data:f,error:g}=await this._getUser(u.access_token);!g&&f?.user?(u.user=f.user,await this._saveSession(u),await this._notifyAllSubscribers("SIGNED_IN",u)):this._debug(l,"could not get user data, skipping SIGNED_IN notification")}catch(f){console.error("Error getting user data:",f),this._debug(l,"error getting user data, skipping SIGNED_IN notification",f)}else await this._notifyAllSubscribers("SIGNED_IN",u)}catch(u){this._debug(l,"error",u),console.error(u);return}finally{this._debug(l,"end")}}async _callRefreshToken(a){var r,l;if(!a)throw new xn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const u=`#_callRefreshToken(${a.substring(0,5)}...)`;this._debug(u,"begin");try{this.refreshingDeferred=new wl;const{data:d,error:f}=await this._refreshAccessToken(a);if(f)throw f;if(!d.session)throw new xn;await this._saveSession(d.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",d.session);const g={data:d.session,error:null};return this.refreshingDeferred.resolve(g),g}catch(d){if(this._debug(u,"error",d),xe(d)){const f={data:null,error:d};return Zc(d)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(f),f}throw(l=this.refreshingDeferred)===null||l===void 0||l.reject(d),d}finally{this.refreshingDeferred=null,this._debug(u,"end")}}async _notifyAllSubscribers(a,r,l=!0){const u=`#_notifyAllSubscribers(${a})`;this._debug(u,"begin",r,`broadcast = ${l}`);try{this.broadcastChannel&&l&&this.broadcastChannel.postMessage({event:a,session:r});const d=[],f=Array.from(this.stateChangeEmitters.values()).map(async g=>{try{await g.callback(a,r)}catch(p){d.push(p)}});if(await Promise.all(f),d.length>0){for(let g=0;g<d.length;g+=1)console.error(d[g]);throw d[0]}}finally{this._debug(u,"end")}}async _saveSession(a){this._debug("#_saveSession()",a),this.suppressGetSessionWarning=!0;const r=Object.assign({},a),l=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!l&&r.user&&await Gi(this.userStorage,this.storageKey+"-user",{user:r.user});const u=Object.assign({},r);delete u.user;const d=Jg(u);await Gi(this.storage,this.storageKey,d)}else{const u=Jg(r);await Gi(this.storage,this.storageKey,u)}}async _removeSession(){this._debug("#_removeSession()"),await ba(this.storage,this.storageKey),await ba(this.storage,this.storageKey+"-code-verifier"),await ba(this.storage,this.storageKey+"-user"),this.userStorage&&await ba(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const a=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{a&&At()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",a)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const a=setInterval(()=>this._autoRefreshTokenTick(),$i);this.autoRefreshTicker=a,a&&typeof a=="object"&&typeof a.unref=="function"?a.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(a),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const a=this.autoRefreshTicker;this.autoRefreshTicker=null,a&&clearInterval(a)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const a=Date.now();try{return await this._useSession(async r=>{const{data:{session:l}}=r;if(!l||!l.refresh_token||!l.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const u=Math.floor((l.expires_at*1e3-a)/$i);this._debug("#_autoRefreshTokenTick()",`access token expires in ${u} ticks, a tick lasts ${$i}ms, refresh threshold is ${du} ticks`),u<=du&&await this._callRefreshToken(l.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(a){if(a.isAcquireTimeout||a instanceof Xp)this._debug("auto refresh token tick lock not available");else throw a}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!At()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(a){console.error("_handleVisibilityChange",a)}}async _onVisibilityChanged(a){const r=`#_onVisibilityChanged(${a})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),a||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(a,r,l){const u=[`provider=${encodeURIComponent(r)}`];if(l?.redirectTo&&u.push(`redirect_to=${encodeURIComponent(l.redirectTo)}`),l?.scopes&&u.push(`scopes=${encodeURIComponent(l.scopes)}`),this.flowType==="pkce"){const[d,f]=await qi(this.storage,this.storageKey),g=new URLSearchParams({code_challenge:`${encodeURIComponent(d)}`,code_challenge_method:`${encodeURIComponent(f)}`});u.push(g.toString())}if(l?.queryParams){const d=new URLSearchParams(l.queryParams);u.push(d.toString())}return l?.skipBrowserRedirect&&u.push(`skip_http_redirect=${l.skipBrowserRedirect}`),`${a}?${u.join("&")}`}async _unenroll(a){try{return await this._useSession(async r=>{var l;const{data:u,error:d}=r;return d?this._returnResult({data:null,error:d}):await we(this.fetch,"DELETE",`${this.url}/factors/${a.factorId}`,{headers:this.headers,jwt:(l=u?.session)===null||l===void 0?void 0:l.access_token})})}catch(r){if(xe(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(a){try{return await this._useSession(async r=>{var l,u;const{data:d,error:f}=r;if(f)return this._returnResult({data:null,error:f});const g=Object.assign({friendly_name:a.friendlyName,factor_type:a.factorType},a.factorType==="phone"?{phone:a.phone}:a.factorType==="totp"?{issuer:a.issuer}:{}),{data:p,error:m}=await we(this.fetch,"POST",`${this.url}/factors`,{body:g,headers:this.headers,jwt:(l=d?.session)===null||l===void 0?void 0:l.access_token});return m?this._returnResult({data:null,error:m}):(a.factorType==="totp"&&p.type==="totp"&&(!((u=p?.totp)===null||u===void 0)&&u.qr_code)&&(p.totp.qr_code=`data:image/svg+xml;utf-8,${p.totp.qr_code}`),this._returnResult({data:p,error:null}))})}catch(r){if(xe(r))return this._returnResult({data:null,error:r});throw r}}async _verify(a){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var l;const{data:u,error:d}=r;if(d)return this._returnResult({data:null,error:d});const f=Object.assign({challenge_id:a.challengeId},"webauthn"in a?{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_response:a.webauthn.type==="create"?A0(a.webauthn.credential_response):O0(a.webauthn.credential_response)})}:{code:a.code}),{data:g,error:p}=await we(this.fetch,"POST",`${this.url}/factors/${a.factorId}/verify`,{body:f,headers:this.headers,jwt:(l=u?.session)===null||l===void 0?void 0:l.access_token});return p?this._returnResult({data:null,error:p}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+g.expires_in},g)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",g),this._returnResult({data:g,error:p}))})}catch(r){if(xe(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(a){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var l;const{data:u,error:d}=r;if(d)return this._returnResult({data:null,error:d});const f=await we(this.fetch,"POST",`${this.url}/factors/${a.factorId}/challenge`,{body:a,headers:this.headers,jwt:(l=u?.session)===null||l===void 0?void 0:l.access_token});if(f.error)return f;const{data:g}=f;if(g.type!=="webauthn")return{data:g,error:null};switch(g.webauthn.type){case"create":return{data:Object.assign(Object.assign({},g),{webauthn:Object.assign(Object.assign({},g.webauthn),{credential_options:Object.assign(Object.assign({},g.webauthn.credential_options),{publicKey:T0(g.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},g),{webauthn:Object.assign(Object.assign({},g.webauthn),{credential_options:Object.assign(Object.assign({},g.webauthn.credential_options),{publicKey:C0(g.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(xe(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(a){const{data:r,error:l}=await this._challenge({factorId:a.factorId});return l?this._returnResult({data:null,error:l}):await this._verify({factorId:a.factorId,challengeId:r.id,code:a.code})}async _listFactors(){var a;const{data:{user:r},error:l}=await this.getUser();if(l)return{data:null,error:l};const u={all:[],phone:[],totp:[],webauthn:[]};for(const d of(a=r?.factors)!==null&&a!==void 0?a:[])u.all.push(d),d.status==="verified"&&u[d.factor_type].push(d);return{data:u,error:null}}async _getAuthenticatorAssuranceLevel(){var a,r;const{data:{session:l},error:u}=await this.getSession();if(u)return this._returnResult({data:null,error:u});if(!l)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:d}=Fc(l.access_token);let f=null;d.aal&&(f=d.aal);let g=f;((r=(a=l.user.factors)===null||a===void 0?void 0:a.filter(b=>b.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(g="aal2");const m=d.amr||[];return{data:{currentLevel:f,nextLevel:g,currentAuthenticationMethods:m},error:null}}async _getAuthorizationDetails(a){try{return await this._useSession(async r=>{const{data:{session:l},error:u}=r;return u?this._returnResult({data:null,error:u}):l?await we(this.fetch,"GET",`${this.url}/oauth/authorizations/${a}`,{headers:this.headers,jwt:l.access_token,xform:d=>({data:d,error:null})}):this._returnResult({data:null,error:new xn})})}catch(r){if(xe(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(a,r){try{return await this._useSession(async l=>{const{data:{session:u},error:d}=l;if(d)return this._returnResult({data:null,error:d});if(!u)return this._returnResult({data:null,error:new xn});const f=await we(this.fetch,"POST",`${this.url}/oauth/authorizations/${a}/consent`,{headers:this.headers,jwt:u.access_token,body:{action:"approve"},xform:g=>({data:g,error:null})});return f.data&&f.data.redirect_url&&At()&&!r?.skipBrowserRedirect&&window.location.assign(f.data.redirect_url),f})}catch(l){if(xe(l))return this._returnResult({data:null,error:l});throw l}}async _denyAuthorization(a,r){try{return await this._useSession(async l=>{const{data:{session:u},error:d}=l;if(d)return this._returnResult({data:null,error:d});if(!u)return this._returnResult({data:null,error:new xn});const f=await we(this.fetch,"POST",`${this.url}/oauth/authorizations/${a}/consent`,{headers:this.headers,jwt:u.access_token,body:{action:"deny"},xform:g=>({data:g,error:null})});return f.data&&f.data.redirect_url&&At()&&!r?.skipBrowserRedirect&&window.location.assign(f.data.redirect_url),f})}catch(l){if(xe(l))return this._returnResult({data:null,error:l});throw l}}async fetchJwk(a,r={keys:[]}){let l=r.keys.find(g=>g.kid===a);if(l)return l;const u=Date.now();if(l=this.jwks.keys.find(g=>g.kid===a),l&&this.jwks_cached_at+Mb>u)return l;const{data:d,error:f}=await we(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(f)throw f;return!d.keys||d.keys.length===0||(this.jwks=d,this.jwks_cached_at=u,l=d.keys.find(g=>g.kid===a),!l)?null:l}async getClaims(a,r={}){try{let l=a;if(!l){const{data:_,error:w}=await this.getSession();if(w||!_.session)return this._returnResult({data:null,error:w});l=_.session.access_token}const{header:u,payload:d,signature:f,raw:{header:g,payload:p}}=Fc(l);r?.allowExpired||r0(d.exp);const m=!u.alg||u.alg.startsWith("HS")||!u.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(u.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!m){const{error:_}=await this.getUser(l);if(_)throw _;return{data:{claims:d,header:u,signature:f},error:null}}const b=s0(u.alg),x=await crypto.subtle.importKey("jwk",m,b,!0,["verify"]);if(!await crypto.subtle.verify(b,x,f,Kb(`${g}.${p}`)))throw new gu("Invalid JWT signature");return{data:{claims:d,header:u,signature:f},error:null}}catch(l){if(xe(l))return this._returnResult({data:null,error:l});throw l}}}Jr.nextInstanceID={};const L0=Jr;class q0 extends L0{constructor(a){super(a)}}class H0{constructor(a,r,l){var u,d,f;this.supabaseUrl=a,this.supabaseKey=r;const g=Ub(a);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",g),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",g),this.storageUrl=new URL("storage/v1",g),this.functionsUrl=new URL("functions/v1",g);const p=`sb-${g.hostname.split(".")[0]}-auth-token`,m={db:wb,realtime:Tb,auth:Object.assign(Object.assign({},Eb),{storageKey:p}),global:Sb},b=Nb(l??{},m);this.storageKey=(u=b.auth.storageKey)!==null&&u!==void 0?u:"",this.headers=(d=b.global.headers)!==null&&d!==void 0?d:{},b.accessToken?(this.accessToken=b.accessToken,this.auth=new Proxy({},{get:(x,S)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(S)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((f=b.auth)!==null&&f!==void 0?f:{},this.headers,b.global.fetch),this.fetch=Ob(r,this._getAccessToken.bind(this),b.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},b.realtime)),this.accessToken&&this.accessToken().then(x=>this.realtime.setAuth(x)).catch(x=>console.warn("Failed to set initial Realtime auth token:",x)),this.rest=new kv(new URL("rest/v1",g).href,{headers:this.headers,schema:b.db.schema,fetch:this.fetch}),this.storage=new _b(this.storageUrl.href,this.headers,this.fetch,l?.storage),b.accessToken||this._listenForAuthEvents()}get functions(){return new Ov(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(a){return this.rest.from(a)}schema(a){return this.rest.schema(a)}rpc(a,r={},l={head:!1,get:!1,count:void 0}){return this.rest.rpc(a,r,l)}channel(a,r={config:{}}){return this.realtime.channel(a,r)}getChannels(){return this.realtime.getChannels()}removeChannel(a){return this.realtime.removeChannel(a)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var a,r;if(this.accessToken)return await this.accessToken();const{data:l}=await this.auth.getSession();return(r=(a=l.session)===null||a===void 0?void 0:a.access_token)!==null&&r!==void 0?r:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:a,persistSession:r,detectSessionInUrl:l,storage:u,userStorage:d,storageKey:f,flowType:g,lock:p,debug:m,throwOnError:b},x,S){const _={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new q0({url:this.authUrl.href,headers:Object.assign(Object.assign({},_),x),storageKey:f,autoRefreshToken:a,persistSession:r,detectSessionInUrl:l,storage:u,userStorage:d,flowType:g,lock:p,debug:m,throwOnError:b,fetch:S,hasCustomAuthorizationHeader:Object.keys(this.headers).some(w=>w.toLowerCase()==="authorization")})}_initRealtimeClient(a){return new Xv(this.realtimeUrl.href,Object.assign(Object.assign({},a),{params:Object.assign({apikey:this.supabaseKey},a?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,l)=>{this._handleTokenChanged(r,"CLIENT",l?.access_token)})}_handleTokenChanged(a,r,l){(a==="TOKEN_REFRESHED"||a==="SIGNED_IN")&&this.changedAccessToken!==l?(this.changedAccessToken=l,this.realtime.setAuth(l)):a==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const I0=(o,a,r)=>new H0(o,a,r);function V0(){if(typeof window<"u"||typeof process>"u")return!1;const o=process.version;if(o==null)return!1;const a=o.match(/^v(\d+)\./);return a?parseInt(a[1],10)<=18:!1}V0()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const $0="https://sqwqlvsjtimallidxrsz.supabase.co",G0="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNxd3FsdnNqdGltYWxsaWR4cnN6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM0MjM4NTYsImV4cCI6MjA3ODk5OTg1Nn0.5s_2Dz76gha9Zb-0RPzJ_vBz-TTP6zHrNyAugBpxnEQ",ce=I0($0,G0,{auth:{persistSession:!1}}),gn=Object.freeze(Object.defineProperty({__proto__:null,default:ce,supabase:ce},Symbol.toStringTag,{value:"Module"}));function P0({onLogin:o}){const[a,r]=j.useState(""),[l,u]=j.useState(""),[d,f]=j.useState(null);async function g(p){p.preventDefault(),f(null);try{const{data:m,error:b}=await ce.from("users").select("id, username, password, role").eq("username",a).limit(1).single();if(b){f("Error al consultar el servicio de autenticacin"),console.error("Supabase error:",b),b?.code==="42703"&&console.warn("La consulta solicita una columna inexistente en la tabla `users`. Verifica el DDL y ajusta `.select(...)` segn las columnas reales.");return}if(!m){f("Credenciales invlidas");return}const x=m;x.password===l?(localStorage.setItem("user",JSON.stringify({id:x.id,username:x.username,role:x.role})),f("Inicio de sesin correcto"),typeof o=="function"&&o()):f("Credenciales invlidas")}catch(m){f(m.message||"Error al consultar la base de datos")}}return s.jsx("div",{className:"login-root",children:s.jsxs("div",{className:"login-card",role:"region","aria-label":"login panel",children:[s.jsx("h3",{className:"login-title",children:"Bienvenido a SET"}),s.jsx("div",{className:"login-sub",children:"Inicia sesin con tu cuenta"}),s.jsxs("div",{className:"login-inner",children:[s.jsxs("form",{onSubmit:g,children:[s.jsxs("div",{className:"form-field",children:[s.jsx("label",{htmlFor:"username",children:"Usuario"}),s.jsx("input",{id:"username",className:"input",value:a,onChange:p=>r(p.target.value),placeholder:"usuario",required:!0,autoComplete:"username"})]}),s.jsxs("div",{className:"form-field",children:[s.jsx("label",{htmlFor:"password",children:"Contrasea"}),s.jsx("input",{id:"password",className:"input",type:"password",value:l,onChange:p=>u(p.target.value),placeholder:"contrasea",required:!0,autoComplete:"current-password"})]}),s.jsx("div",{children:s.jsx("button",{className:"btn-primary",type:"submit",children:"Entrar"})})]}),d&&s.jsx("p",{style:{marginTop:12},children:d}),s.jsxs("div",{className:"login-foot",children:["Credenciales de prueba: ",s.jsx("span",{className:"hint",children:"admin / admin"})]})]})]})})}function K0({onBack:o}){return s.jsxs("div",{style:{padding:20,maxWidth:900,margin:"24px auto"},children:[s.jsxs("header",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:12},children:[s.jsx("h2",{style:{margin:0},children:"Devolucin de Caja"}),s.jsx("button",{onClick:o,className:"btn-opaque",style:{padding:"8px 12px"},children:"Volver"})]}),s.jsxs("section",{style:{background:"white",padding:16,borderRadius:8,boxShadow:"0 1px 6px rgba(2,6,23,0.06)"},children:[s.jsx("p",{children:"Esta vista servir para gestionar devoluciones en la caja. Aqu podrs registrar y revisar devoluciones realizadas."}),s.jsx("p",{style:{color:"#6b7280"},children:"Contenido placeholder  implementar lgica de devoluciones segn requisitos."})]})]})}function Y0({onBack:o}){const[a,r]=j.useState([]),[l,u]=j.useState(!0),[d,f]=j.useState(""),[g,p]=j.useState(""),[m,b]=j.useState(""),[x,S]=j.useState(()=>new Date().toISOString().slice(0,16)),[_,w]=j.useState(()=>{try{const T=localStorage.getItem("user");if(T)return JSON.parse(T).username||"usuario"}catch{}return"usuario"});j.useEffect(()=>{fetch("/data-base/ingreso-de-efectivo.json").then(T=>T.json()).then(T=>{const I=T&&Array.isArray(T.ingresos)?T.ingresos:[],M=localStorage.getItem("ingresosEfectivo");let J=[];try{M&&(J=JSON.parse(M))}catch{}const C=[...I,...J];r(C)}).catch(()=>{const T=localStorage.getItem("ingresosEfectivo");try{T&&r(JSON.parse(T))}catch{r([])}}).finally(()=>u(!1))},[]);function A(T){localStorage.setItem("ingresosEfectivo",JSON.stringify(T))}function R(T){if(T.preventDefault(),!g||m===""||Number(m)<=0)return alert("Complete motivo y monto vlido");const I=a.length?Math.max(...a.map(C=>C.id))+1:1,M={id:I,factura:d||`F-${I}`,motivo:g,monto:Number(m),fechaHora:new Date(x).toISOString(),usuario:_},J=[...a,M];r(J),A(J),f(""),p(""),b(""),S(new Date().toISOString().slice(0,16))}return s.jsxs("div",{style:{padding:20,maxWidth:1e3,margin:"24px auto"},children:[s.jsxs("header",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:12},children:[s.jsx("h2",{style:{margin:0},children:"Ingreso de Efectivo"}),s.jsx("button",{onClick:o,className:"btn-opaque",style:{padding:"8px 12px"},children:"Volver"})]}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 420px",gap:16},children:[s.jsxs("section",{style:{background:"white",padding:16,borderRadius:8,boxShadow:"0 1px 6px rgba(2,6,23,0.06)"},children:[s.jsx("h3",{style:{marginTop:0},children:"Registros de Ingresos"}),l?s.jsx("p",{children:"Cargando..."}):s.jsx("div",{style:{overflowX:"auto"},children:s.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[s.jsx("thead",{style:{background:"#f1f5f9"},children:s.jsxs("tr",{children:[s.jsx("th",{style:{textAlign:"left",padding:8},children:"Factura"}),s.jsx("th",{style:{textAlign:"left",padding:8},children:"Motivo"}),s.jsx("th",{style:{textAlign:"right",padding:8},children:"Monto"}),s.jsx("th",{style:{textAlign:"left",padding:8},children:"Fecha y hora"}),s.jsx("th",{style:{textAlign:"left",padding:8},children:"Usuario"})]})}),s.jsx("tbody",{children:a.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:5,style:{padding:18,textAlign:"center",color:"#94a3b8"},children:"No hay registros"})}):a.map(T=>s.jsxs("tr",{style:{borderBottom:"1px solid #e2e8f0"},children:[s.jsx("td",{style:{padding:8},children:T.factura}),s.jsx("td",{style:{padding:8},children:T.motivo}),s.jsxs("td",{style:{padding:8,textAlign:"right"},children:["L",T.monto.toFixed(2)]}),s.jsx("td",{style:{padding:8},children:new Date(T.fechaHora).toLocaleString()}),s.jsx("td",{style:{padding:8},children:T.usuario})]},T.id))})]})})]}),s.jsxs("aside",{style:{background:"white",padding:16,borderRadius:8,boxShadow:"0 1px 6px rgba(2,6,23,0.06)"},children:[s.jsx("h3",{style:{marginTop:0},children:"Nuevo ingreso"}),s.jsxs("form",{onSubmit:R,style:{display:"grid",gap:8},children:[s.jsxs("label",{style:{fontSize:13,color:"#475569"},children:["Factura",s.jsx("input",{value:d,onChange:T=>f(T.target.value),className:"input",style:{marginTop:6}})]}),s.jsxs("label",{style:{fontSize:13,color:"#475569"},children:["Motivo",s.jsx("input",{value:g,onChange:T=>p(T.target.value),className:"input",style:{marginTop:6},required:!0})]}),s.jsxs("label",{style:{fontSize:13,color:"#475569"},children:["Monto",s.jsx("input",{value:m,onChange:T=>b(T.target.value===""?"":Number(T.target.value)),type:"number",step:"0.01",className:"input",style:{marginTop:6},required:!0})]}),s.jsxs("label",{style:{fontSize:13,color:"#475569"},children:["Fecha y hora",s.jsx("input",{value:x,onChange:T=>S(T.target.value),type:"datetime-local",className:"input",style:{marginTop:6}})]}),s.jsxs("label",{style:{fontSize:13,color:"#475569"},children:["Usuario",s.jsx("input",{value:_,onChange:T=>w(T.target.value),className:"input",style:{marginTop:6}})]}),s.jsxs("div",{style:{display:"flex",gap:8,marginTop:6},children:[s.jsx("button",{type:"submit",className:"btn-primary",children:"Agregar"}),s.jsx("button",{type:"button",onClick:()=>{f(""),p(""),b(""),S(new Date().toISOString().slice(0,16))},className:"btn-opaque",style:{background:"transparent",color:"#2563eb"},children:"Limpiar"})]})]})]})]})]})}function J0({onBack:o}){return s.jsxs("div",{style:{padding:20,maxWidth:900,margin:"24px auto"},children:[s.jsxs("header",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:12},children:[s.jsx("h2",{style:{margin:0},children:"Cotizaciones Guardadas"}),s.jsx("button",{onClick:o,className:"btn-opaque",style:{padding:"8px 12px"},children:"Volver"})]}),s.jsxs("section",{style:{background:"white",padding:16,borderRadius:8,boxShadow:"0 1px 6px rgba(2,6,23,0.06)"},children:[s.jsx("p",{children:"Listado de cotizaciones previamente guardadas. Placeholder para ver/editar/cargar cotizaciones."}),s.jsx("p",{style:{color:"#6b7280"},children:"Se puede conectar a almacenamiento local o API para persistencia."})]})]})}function Q0({onBack:o}){return s.jsxs("div",{style:{padding:20,maxWidth:1e3,margin:"24px auto"},children:[s.jsxs("header",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:12},children:[s.jsx("h2",{style:{margin:0},children:"Pedidos en Lnea"}),s.jsx("button",{onClick:o,className:"btn-opaque",style:{padding:"8px 12px"},children:"Volver"})]}),s.jsxs("section",{style:{background:"white",padding:16,borderRadius:8,boxShadow:"0 1px 6px rgba(2,6,23,0.06)"},children:[s.jsx("p",{children:"Aqu se mostrarn los pedidos recibidos por canales en lnea. Placeholder de ejemplo."}),s.jsx("p",{style:{color:"#6b7280"},children:"Integrar con API de pedidos cuando est disponible."})]})]})}function X0({onBack:o}){return s.jsxs("div",{style:{padding:20,maxWidth:900,margin:"24px auto"},children:[s.jsxs("header",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:12},children:[s.jsx("h2",{style:{margin:0},children:"Corte de Caja Parcial"}),s.jsx("button",{onClick:o,className:"btn-opaque",style:{padding:"8px 12px"},children:"Volver"})]}),s.jsxs("section",{style:{background:"white",padding:16,borderRadius:8,boxShadow:"0 1px 6px rgba(2,6,23,0.06)"},children:[s.jsx("p",{children:"Registrar corte parcial de caja. Muestra resumen de ventas desde el ltimo corte."}),s.jsx("p",{style:{color:"#6b7280"},children:"Placeholder: implementar clculo y persistencia de cortes."})]})]})}function Z0({onBack:o}){return s.jsxs("div",{style:{padding:20,maxWidth:900,margin:"24px auto"},children:[s.jsxs("header",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:12},children:[s.jsx("h2",{style:{margin:0},children:"Corte de Caja Total"}),s.jsx("button",{onClick:o,className:"btn-opaque",style:{padding:"8px 12px"},children:"Volver"})]}),s.jsxs("section",{style:{background:"white",padding:16,borderRadius:8,boxShadow:"0 1px 6px rgba(2,6,23,0.06)"},children:[s.jsx("p",{children:"Registrar corte total de caja. Resumen completo del da o periodo seleccionado."}),s.jsx("p",{style:{color:"#6b7280"},children:"Placeholder: implementar reporte y exportacin."})]})]})}function F0({open:o,onClose:a,onSelect:r}){const[l,u]=j.useState(""),[d,f]=j.useState(!1),[g,p]=j.useState([]);return j.useEffect(()=>{if(!o)return;let m=!0;return(async()=>{f(!0);try{const{data:b,error:x}=await ce.from("clientes").select("id,nombre,rtn,telefono,correo_electronico,tipo_cliente,exonerado").order("id",{ascending:!1}).limit(100);if(x)throw x;m&&p(Array.isArray(b)?b:[])}catch(b){console.warn("Error cargando clientes:",b)}finally{m&&f(!1)}})(),()=>{m=!1}},[o]),j.useEffect(()=>{if(!o)return;const m=setTimeout(async()=>{f(!0);try{const b=String(l||"").trim();let x;if(b===""?x=await ce.from("clientes").select("id,nombre,rtn,telefono,correo_electronico,tipo_cliente,exonerado").order("id",{ascending:!1}).limit(100):x=await ce.from("clientes").select("id,nombre,rtn,telefono,correo_electronico,tipo_cliente,exonerado").or(`nombre.ilike.%${b}%,rtn.ilike.%${b}%`).order("id",{ascending:!1}).limit(100),x.error)throw x.error;p(Array.isArray(x.data)?x.data:[])}catch(b){console.warn("Error buscando clientes:",b)}finally{f(!1)}},250);return()=>clearTimeout(m)},[l,o]),o?s.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(2,6,23,0.6)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:99999},children:s.jsxs("div",{style:{width:820,maxWidth:"95%",maxHeight:"80vh",overflow:"auto",background:"white",borderRadius:10,padding:16},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s.jsx("h3",{style:{margin:0},children:"Buscar Cliente"}),s.jsx("button",{onClick:a,className:"btn-opaque",children:"Cerrar"})]}),s.jsxs("div",{style:{marginTop:12,display:"flex",gap:8,alignItems:"center"},children:[s.jsx("input",{value:l,onChange:m=>u(m.target.value),placeholder:"Buscar por nombre o RTN...",style:{flex:1,padding:8,borderRadius:6,border:"1px solid #e2e8f0"}}),s.jsx("div",{style:{minWidth:100,textAlign:"right"},children:d?"Cargando...":`${g.length} encontrados`})]}),s.jsx("div",{style:{marginTop:12},children:s.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[s.jsx("thead",{style:{background:"#f1f5f9"},children:s.jsxs("tr",{children:[s.jsx("th",{style:{textAlign:"left",padding:8},children:"RTN"}),s.jsx("th",{style:{textAlign:"left",padding:8},children:"Nombre / Razn social"}),s.jsx("th",{style:{textAlign:"left",padding:8},children:"Telfono"}),s.jsx("th",{style:{textAlign:"left",padding:8},children:"Correo"}),s.jsx("th",{style:{padding:8}})]})}),s.jsxs("tbody",{children:[g.map(m=>s.jsxs("tr",{style:{borderBottom:"1px solid #eee"},children:[s.jsx("td",{style:{padding:8},children:m.rtn}),s.jsx("td",{style:{padding:8},children:m.nombre}),s.jsx("td",{style:{padding:8},children:m.telefono}),s.jsx("td",{style:{padding:8},children:m.correo_electronico}),s.jsx("td",{style:{padding:8},children:s.jsx("button",{onClick:()=>{r(m),a()},className:"btn-opaque",children:"Seleccionar"})})]},String(m.id))),g.length===0&&!d&&s.jsx("tr",{children:s.jsx("td",{colSpan:5,style:{padding:16,textAlign:"center",color:"#64748b"},children:"No hay clientes"})})]})]})})]})}):null}function W0({onLogout:o}){j.useEffect(()=>{const B=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=B||""}},[]);const[a,r]=j.useState([]),[l,u]=j.useState([]),[d,f]=j.useState(""),[g,p]=j.useState("Todas"),[m,b]=j.useState(.15),[x,S]=j.useState(0),[_,w]=j.useState(0),A=["Todas",...Array.from(new Set(a.map(B=>B.categoria)))],R=a.filter(B=>(String(B.nombre||"").toLowerCase().includes(d.toLowerCase())||String(B.sku||"").toLowerCase().includes(d.toLowerCase()))&&(g==="Todas"||B.categoria===g)),T=l.reduce((B,re)=>B+Number(re.producto.precio||0)*re.cantidad,0);let I=0,M=0,J=0;for(const B of l){const re=Number(B.producto.precio||0)*B.cantidad,ge=!!B.producto.exento,_e=!!B.producto.aplica_impuesto_18,Re=!!B.producto.aplica_impuesto_turistico;if(!ge){if(_e){const $e=re*(x||0);M+=$e}else{const $e=re*(m||0);I+=$e}Re&&(J+=re*(_||0))}}const C=T+I+M+J,z=l.map(B=>{const re=Number(B.producto.precio||0)*B.cantidad,ge=!!B.producto.exento,_e=!!B.producto.aplica_impuesto_18,Re=!!B.producto.aplica_impuesto_turistico;if(ge)return{id:B.producto.id,nombre:B.producto.nombre,price:re,isv:0,imp18:0,tur:0,totalTax:0};const $e=_e?0:re*(m||0),Je=_e?re*(x||0):0,st=Re?re*(_||0):0;return{id:B.producto.id,nombre:B.producto.nombre,price:re,isv:$e,imp18:Je,tur:st,totalTax:$e+Je+st}}),k=B=>{(B.stock??0)<=0||u(re=>re.find(_e=>_e.producto.id===B.id)?re.map(_e=>_e.producto.id===B.id?{..._e,cantidad:_e.cantidad+1}:_e):[...re,{producto:B,cantidad:1}])},V=(B,re)=>{u(ge=>ge.map(_e=>{if(String(_e.producto.id)===String(B)){const Re=_e.cantidad+re;return Re>0?{..._e,cantidad:Re}:_e}return _e}).filter(_e=>_e.cantidad>0))},le=B=>{u(re=>re.filter(ge=>String(ge.producto.id)!==String(B)))},he=()=>u([]),[oe,te]=j.useState(!1),[H,ie]=j.useState("factura"),[pe,D]=j.useState(!1),[L,Z]=j.useState(!1),[ne,ue]=j.useState(""),[E,U]=j.useState(""),G=j.useRef(null),Y=j.useRef(null),[ae,ee]=j.useState("final"),[de,se]=j.useState(""),[fe,Ee]=j.useState(""),[Ne,Te]=j.useState(!1),[Ue,He]=j.useState(!1),_t=async B=>{if(U(B),!B||String(B).trim()===""){ue("");return}try{if(ae==="juridico"){console.debug("handleRTNChange: buscando cliente juridico para RTN=",B);const{data:Re,error:$e}=await ce.from("clientes").select("id,nombre,telefono,correo_electronico,exonerado").eq("rtn",B).eq("tipo_cliente","juridico").maybeSingle();if(console.debug("handleRTNChange: supabase response",{data:Re,error:$e}),!$e&&Re&&Re.nombre){ue(Re.nombre||""),se(Re.telefono||""),Ee(Re.correo_electronico||""),Te(!!Re.exonerado),setTimeout(()=>{try{Y.current?.focus()}catch{}},50);return}else{ue(""),se(""),Ee(""),Te(!1);return}}const re="clientenatural";console.debug("handleRTNChange: buscando clientenatural para RTN=",B);const{data:ge,error:_e}=await ce.from(re).select("nombre").eq("rtn",B).maybeSingle();console.debug("handleRTNChange: supabase response clientenatural",{data:ge,error:_e}),!_e&&ge&&ge.nombre?(ue(ge.nombre||""),setTimeout(()=>{try{Y.current?.focus()}catch{}},50)):ue("")}catch(re){console.warn("Error buscando cliente por RTN:",re)}},Dt=B=>{ie(B),te(!0)},zt=()=>l.map(B=>{const re=`${B.producto.nombre||""}`,ge=Number(B.cantidad||0),_e=Number(B.producto.precio||0).toFixed(2),Re=(ge*Number(B.producto.precio||0)).toFixed(2);return`<tr><td>${re}</td><td style="text-align:center">${ge}</td><td style="text-align:right">L ${_e}</td><td style="text-align:right">L ${Re}</td></tr>`}).join(`
`),Wt=(B,re="factura")=>{const ge=B.cliente||(re==="factura"?"Consumidor Final":"Cotizacin Cliente"),_e=B.rtn||"C/F",Re=B.factura||String(Math.floor(Math.random()*9e5)+1e5),$e=new Date().toLocaleString(),Je=mn(),st=I,ve=M,Ie=J,yt=Je+st+ve+Ie,et=zt(),Ge=re==="factura"?"FACTURA":"COTIZACIN",Ea=re==="factura"?"":'<div style="margin-top:12px;text-align:center;color:#475569">Vlida por 24 horas desde la fecha de emisin.</div>';return`<!DOCTYPE html><html lang="es"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>${Ge}</title><style>
    body{font-family:Arial,Helvetica,sans-serif;font-size:12px;color:#000;margin:20px}
    .factura{max-width:800px;margin:0 auto}
    .header{display:flex;justify-content:space-between;align-items:center}
    .header img{width:180px;height:auto}
    table{width:100%;border-collapse:collapse;margin-top:10px}
    th,td{border:1px solid #000;padding:6px;text-align:left}
    th{background:#eee}
    .right{text-align:right}
    </style></head><body><div class="factura"><div class="header"><div>
    <h2>Solutecc - Punto de Ventas</h2>
    <div>RTN: 00000000000000</div>
    </div><div><h3>${Ge}</h3><div>No: ${Re}</div><div>Fecha: ${$e}</div></div></div>
    <hr/>
    <div><strong>Cliente:</strong> ${ge}</div>
    <div><strong>RTN:</strong> ${_e}</div>
    <table><thead><tr><th>Descripcin</th><th>Cant</th><th>Precio</th><th>Total</th></tr></thead><tbody>
    ${et}
    </tbody></table>
    <div style="margin-top:8px;text-align:right"><div>SubTotal: L ${Je.toFixed(2)}</div><div>ISV (${(m*100).toFixed(2)}%): L ${st.toFixed(2)}</div><div>Impuesto 18%: L ${ve.toFixed(2)}</div><div>Impuesto turstico (${(_*100).toFixed(2)}%): L ${Ie.toFixed(2)}</div><h3>Total: L ${yt.toFixed(2)}</h3></div>
    ${Ea}
    <div style="margin-top:20px;text-align:center"><small>Gracias por su preferencia</small></div>
    </div><script>window.onload=function(){window.print();setTimeout(()=>window.close(),800);}<\/script></body></html>`},mn=()=>l.reduce((B,re)=>B+Number(re.producto.precio||0)*re.cantidad,0),rt=()=>l.reduce((B,re)=>B+(re.producto.exento?0:Number(re.producto.precio||0)*re.cantidad),0),at=()=>{const B=Wt({cliente:"Consumidor Final",rtn:"C/F"},H),re=window.open("","_blank");if(re)re.document.open(),re.document.write(B),re.document.close();else{const ge=window.open("about:blank");ge&&(ge.document.open(),ge.document.write(B),ge.document.close())}H==="factura"&&he(),te(!1)},wa=()=>{ee("normal"),ue(""),U(""),D(!0),te(!1)},El=()=>{ee("juridico"),ue(""),U(""),D(!0),te(!1)};j.useEffect(()=>{pe&&setTimeout(()=>{try{G.current?.focus()}catch{}},80)},[pe]);const Ut=async()=>{try{if(E&&ne){const ge={rtn:E,nombre:ne},{error:_e}=await ce.from("clientenatural").upsert(ge,{onConflict:"rtn"});_e&&console.warn("Error guardando clientenatural:",_e)}}catch(ge){console.warn("Error upsert clientenatural:",ge)}try{if(E&&ne)if(ae==="juridico"){const{data:ge,error:_e}=await ce.from("clientes").select("id").eq("rtn",E).eq("tipo_cliente","juridico").maybeSingle();if(_e&&console.warn("Error buscando cliente juridico:",_e),ge&&ge.id){const{error:Re}=await ce.from("clientes").update({nombre:ne,telefono:de||null,correo_electronico:fe||null,exonerado:Ne}).eq("id",ge.id);Re&&console.warn("Error actualizando cliente juridico:",Re)}else{const{error:Re}=await ce.from("clientes").insert([{nombre:ne,rtn:E,telefono:de||null,correo_electronico:fe||null,tipo_cliente:"juridico",exonerado:Ne}]);Re&&console.warn("Error insertando cliente juridico:",Re)}}else{const ge={rtn:E,nombre:ne},{error:_e}=await ce.from("clientenatural").upsert(ge,{onConflict:"rtn"});_e&&console.warn("Error guardando clientenatural:",_e)}}catch(ge){console.warn("Error upsert cliente:",ge)}const B=Wt({cliente:ne||"Cliente",rtn:E||""},H),re=window.open("","_blank");re&&(re.document.open(),re.document.write(B),re.document.close()),H==="factura"&&he(),D(!1)},Qi=j.useRef(null),[Xi,yn]=j.useState(!1),[en,Bt]=j.useState(null),[Zi,Tl]=j.useState([]),[Cl,An]=j.useState(!1),[Ye,tn]=j.useState(null);j.useEffect(()=>{function B(re){Qi.current&&!Qi.current.contains(re.target)&&yn(!1)}return document.addEventListener("mousedown",B),()=>document.removeEventListener("mousedown",B)},[]),j.useEffect(()=>{fetch("/data-base/inventario.json").then(async B=>{if(!B.ok)return console.warn("inventario.json no disponible, status",B.status),null;const re=B.headers.get("content-type")||"";if(!re.includes("application/json"))return console.warn("inventario.json no es JSON, content-type:",re),null;try{return await B.json()}catch(ge){return console.warn("Error parseando inventario.json:",ge),null}}).then(B=>{B&&Array.isArray(B.items)&&Tl(B.items),console.log("inventario cargado:",B&&B.items?B.items.length:0)}).catch(B=>{console.warn("Error cargando inventario:",B)})},[]),j.useEffect(()=>{let B=!0;return(async()=>{try{const{data:re,error:ge}=await ce.from("inventario").select("id, sku, nombre, categoria, imagen, modelo, descripcion, exento, aplica_impuesto_18, aplica_impuesto_turistico");if(ge)throw ge;const _e=Array.isArray(re)?re:[],Re=_e.map(ve=>String(ve.id));if(Re.length===0){B&&r([]);return}const $e={};try{const{data:ve,error:Ie}=await ce.from("precios").select("producto_id, precio").order("id",{ascending:!1});if(Ie)throw Ie;if(console.debug("PV: precios total rows",Array.isArray(ve)?ve.length:0),Array.isArray(ve))for(const yt of ve){const et=String(yt.producto_id);$e[et]||($e[et]=Number(yt.precio||0))}}catch(ve){console.warn("Error cargando precios en PV:",ve)}let Je={};try{const{data:ve,error:Ie}=await ce.from("registro_de_inventario").select("producto_id, cantidad, tipo_de_movimiento").in("producto_id",Re);if(Ie)throw Ie;const yt=Array.isArray(ve)?ve:[];Je={},Re.forEach(et=>Je[et]=0);for(const et of yt){const Ge=String(et.producto_id),Ea=Number(et.cantidad)||0,Wa=String(et.tipo_de_movimiento||"").toUpperCase();Wa==="ENTRADA"?Je[Ge]=(Je[Ge]||0)+Ea:Wa==="SALIDA"&&(Je[Ge]=(Je[Ge]||0)-Ea)}}catch(ve){console.warn("Error cargando registro_de_inventario en PV:",ve),Je={},Re.forEach(Ie=>Je[Ie]=0)}console.debug("PV: priceMap sample",Object.keys($e).slice(0,5).map(ve=>[ve,$e[ve]]));const st=_e.map(ve=>({id:String(ve.id),sku:ve.sku,nombre:ve.nombre,categoria:ve.categoria,imagen:ve.imagen,precio:$e[String(ve.id)]!==void 0?$e[String(ve.id)]:ve.precio!==void 0?Number(ve.precio):0,exento:ve.exento===!0||String(ve.exento)==="true"||Number(ve.exento)===1||!1,aplica_impuesto_18:ve.aplica_impuesto_18===!0||String(ve.aplica_impuesto_18)==="true"||Number(ve.aplica_impuesto_18)===1||!1,aplica_impuesto_turistico:ve.aplica_impuesto_turistico===!0||String(ve.aplica_impuesto_turistico)==="true"||Number(ve.aplica_impuesto_turistico)===1||!1,stock:Number((Je[String(ve.id)]||0).toFixed(2))}));B&&r(st)}catch(re){console.warn("Error cargando productos desde inventario:",re),B&&r([])}})(),()=>{B=!1}},[]);const[Ot,Al]=j.useState(null),[Xr,Ol]=j.useState(null),[Jn,Za]=j.useState({});j.useEffect(()=>{try{const B=localStorage.getItem("user");if(B){const re=JSON.parse(B);Al(re.username||re.name||null),Ol(re.role||null)}}catch{}},[]),j.useEffect(()=>{let B=!0;return(async()=>{try{const{data:re,error:ge}=await ce.from("impuesto").select("id, impuesto_venta");if(ge)throw ge;if(!re||!Array.isArray(re))return;const _e=st=>{const ve=re.find(et=>Number(et.id)===st);if(!ve)return null;const Ie=ve.impuesto_venta;if(Ie==null)return null;const yt=Number(Ie);return Number.isNaN(yt)?null:yt>1?yt/100:yt},Re=_e(1),$e=_e(2),Je=_e(3);if(B){let st=Re,ve=$e,Ie=Je;try{if((st===null||st===0)&&B){const et=(await ce.from("impuesto").select("impuesto_venta").eq("id",1).maybeSingle())?.data?.impuesto_venta??null,Ge=et==null?null:Number(et);Ge!=null&&!Number.isNaN(Ge)&&(st=Ge>1?Ge/100:Ge)}if((ve===null||ve===0)&&B){const et=(await ce.from("impuesto").select("impuesto_venta").eq("id",2).maybeSingle())?.data?.impuesto_venta??null,Ge=et==null?null:Number(et);Ge!=null&&!Number.isNaN(Ge)&&(ve=Ge>1?Ge/100:Ge)}if((Ie===null||Ie===0)&&B){const et=(await ce.from("impuesto").select("impuesto_venta").eq("id",3).maybeSingle())?.data?.impuesto_venta??null,Ge=et==null?null:Number(et);Ge!=null&&!Number.isNaN(Ge)&&(Ie=Ge>1?Ge/100:Ge)}}catch(yt){console.warn("PV: fallback single-id impuesto fetch failed",yt)}(st===null||st===0)&&(st=.15),(ve===null||ve===0)&&(ve=.18),(Ie===null||Ie===0)&&(Ie=.04),b(st),S(ve),w(Ie),console.debug("PV: impuestos raw rows",re),console.debug("PV: resolved tax rates",{taxRate:st,tax18Rate:ve,taxTouristRate:Ie})}}catch(re){console.warn("Error cargando impuesto en PV:",re)}})(),()=>{B=!1}},[]);const Fa=B=>{console.log("openUbicacion",B,"entradasCount",Zi.length);let re=null;try{re=a.find(_e=>String(_e.sku||"")===String(B)||String(_e.id)===String(B))||null}catch{re=null}if(re){const _e=Number(re.stock??0),Re={id:re.id,producto:re.nombre||"",sku:re.sku||"",imagen:re.imagen||null,descripcion:re.descripcion||"",ubicacion:re.ubicacion||null,cantidad:_e};tn(Re),An(!0);return}const ge=Zi.find(_e=>_e.sku===B)||null;console.log("entrada encontrada",ge),tn(ge),An(!0)};if(j.useEffect(()=>{let B=!0;return(async()=>{try{const re="inventario",ge={};await Promise.all((a||[]).map(async _e=>{const Re=_e.imagen;if(!Re){ge[String(_e.id)]=null;return}const $e=String(Re);if($e.startsWith("http")){ge[String(_e.id)]=$e;return}let Je=$e;const st=String($e).match(/\/storage\/v1\/object\/public\/([^/]+)\/(.*)/);st&&(Je=decodeURIComponent(st[2]));try{const ve=await ce.storage.from(re).getPublicUrl(Je),Ie=ve?.data?.publicUrl||ve?.data?.publicURL||null;if(Ie){ge[String(_e.id)]=Ie;return}}catch{}try{const Ie=(await ce.storage.from(re).createSignedUrl(Je,604800))?.data?.signedUrl??null;ge[String(_e.id)]=Ie}catch{ge[String(_e.id)]=null}})),B&&Za(ge)}catch(re){console.warn("Error resolviendo imgenes en PV",re)}})(),()=>{B=!1}},[a]),en){if(en==="DevolucionCaja")return s.jsx(K0,{onBack:()=>Bt(null)});if(en==="IngresoEfectivo")return s.jsx(Y0,{onBack:()=>Bt(null)});if(en==="CotizacionesGuardadas")return s.jsx(J0,{onBack:()=>Bt(null)});if(en==="PedidosEnLinea")return s.jsx(Q0,{onBack:()=>Bt(null)});if(en==="CorteCajaParcial")return s.jsx(X0,{onBack:()=>Bt(null)});if(en==="CorteCajaTotal")return s.jsx(Z0,{onBack:()=>Bt(null)})}return s.jsxs("div",{style:{minHeight:"100vh",fontFamily:"system-ui, sans-serif",background:"#f8fafc"},children:[s.jsxs("header",{style:{background:"#1e293b",color:"white",padding:"14px 20px",display:"flex",justifyContent:"space-between",alignItems:"center",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",position:"relative"},children:[s.jsx("h1",{style:{margin:0,fontSize:"1.4rem",fontWeight:600},children:"Solutecc  -  Caja"}),s.jsxs("div",{style:{position:"absolute",left:"50%",transform:"translateX(-50%)",textAlign:"center",pointerEvents:"none"},children:[s.jsx("div",{style:{fontSize:"0.95rem",color:"#e2e8f0",fontWeight:500},children:Ot?`${Ot}`:""}),s.jsx("div",{style:{fontSize:"0.8rem",color:"#94a3b8"},children:Xr?`${Xr}`:""})]}),s.jsxs("div",{style:{position:"relative"},ref:Qi,children:[s.jsx("button",{onClick:()=>yn(B=>!B),"aria-expanded":Xi,className:"btn-opaque",style:{padding:"8px 12px",display:"flex",alignItems:"center",gap:8},children:"Menu "}),Xi&&s.jsxs("div",{style:{position:"absolute",right:0,marginTop:8,background:"white",color:"#0b1724",borderRadius:8,boxShadow:"0 8px 24px rgba(2,6,23,0.16)",minWidth:220,zIndex:60,overflow:"hidden"},children:[s.jsx("button",{onClick:o,className:"btn-opaque",style:{width:"100%",background:"transparent",color:"#0b1724",padding:"10px 12px",textAlign:"left"},children:"Cerrar Sesin"}),s.jsx("button",{onClick:()=>{yn(!1),Bt("DevolucionCaja")},className:"btn-opaque",style:{width:"100%",background:"transparent",color:"#0b1724",padding:"10px 12px",textAlign:"left"},children:"Devolucin de caja"}),s.jsx("button",{onClick:()=>{yn(!1),Bt("IngresoEfectivo")},className:"btn-opaque",style:{width:"100%",background:"transparent",color:"#0b1724",padding:"10px 12px",textAlign:"left"},children:"Ingreso de efectivo"}),s.jsx("button",{onClick:()=>{yn(!1),Bt("CotizacionesGuardadas")},className:"btn-opaque",style:{width:"100%",background:"transparent",color:"#0b1724",padding:"10px 12px",textAlign:"left"},children:"Cotizaciones guardadas"}),s.jsx("button",{onClick:()=>{yn(!1),Bt("PedidosEnLinea")},className:"btn-opaque",style:{width:"100%",background:"transparent",color:"#0b1724",padding:"10px 12px",textAlign:"left"},children:"Pedidos en lnea"}),s.jsx("button",{onClick:()=>{yn(!1),Bt("CorteCajaParcial")},className:"btn-opaque",style:{width:"100%",background:"transparent",color:"#0b1724",padding:"10px 12px",textAlign:"left"},children:"Corte de caja parcial"}),s.jsx("button",{onClick:()=>{yn(!1),Bt("CorteCajaTotal")},className:"btn-opaque",style:{width:"100%",background:"transparent",color:"#0b1724",padding:"10px 12px",textAlign:"left"},children:"Corte de caja total"})]})]})]}),s.jsxs("div",{style:{padding:16,maxWidth:1600,margin:"0 auto"},children:[s.jsxs("div",{style:{background:"white",padding:14,borderRadius:10,boxShadow:"0 1px 4px rgba(0,0,0,0.05)",marginBottom:16,display:"flex",gap:12,flexWrap:"wrap",alignItems:"center"},children:[s.jsx("input",{type:"text",placeholder:"Buscar por nombre o SKU...",value:d,onChange:B=>f(B.target.value),style:{flex:1,minWidth:220,padding:"10px 12px",borderRadius:8,border:"1px solid #cbd5e1"}}),s.jsx("select",{value:g,onChange:B=>p(B.target.value),style:{padding:"10px 12px",borderRadius:8,border:"1px solid #cbd5e1",minWidth:140},children:A.map(B=>s.jsx("option",{value:B,children:B},B))})]}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 420px",gap:16},children:[s.jsx("div",{style:{background:"white",borderRadius:10,overflow:"hidden",boxShadow:"0 1px 4px rgba(0,0,0,0.05)",minHeight:"60vh"},children:s.jsx("div",{style:{maxHeight:"70vh",overflowY:"auto"},children:s.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[s.jsx("thead",{style:{background:"#f1f5f9",position:"sticky",top:0,zIndex:10},children:s.jsxs("tr",{children:[s.jsx("th",{style:_a}),s.jsx("th",{style:_a,children:"Imagen"}),s.jsx("th",{style:_a,children:"SKU"}),s.jsx("th",{style:_a,children:"Nombre"}),s.jsx("th",{style:_a,children:"Categora"}),s.jsx("th",{style:_a,children:"Precio"}),s.jsx("th",{style:_a,children:"Stock"}),s.jsx("th",{style:_a,children:"Accin"})]})}),s.jsx("tbody",{children:R.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:7,style:{textAlign:"center",padding:40,color:"#94a3b8",fontSize:"1rem"},children:"No se encontraron productos"})}):R.map(B=>s.jsxs("tr",{style:{borderBottom:"1px solid #e2e8f0"},children:[s.jsx("td",{style:xa,children:s.jsx("button",{type:"button",onClick:()=>Fa(B.sku||""),title:"Ver ubicacin",className:"btn-opaque",style:{padding:6,borderRadius:6},children:""})}),s.jsx("td",{style:xa,children:Jn[String(B.id)]?s.jsx("img",{src:encodeURI(Jn[String(B.id)]),alt:String(B.nombre||""),style:{width:32,height:32,objectFit:"cover"},onError:re=>{re.currentTarget.src=""}}):B.imagen?s.jsx("img",{src:String(B.imagen),alt:String(B.nombre||""),style:{width:32,height:32,objectFit:"cover"},onError:re=>{re.currentTarget.src=""}}):""}),s.jsx("td",{style:xa,children:s.jsx("code",{style:e_,children:B.sku})}),s.jsx("td",{style:xa,children:s.jsx("strong",{children:B.nombre})}),s.jsx("td",{style:xa,children:s.jsx("span",{style:{color:"#64748b"},children:B.categoria})}),s.jsxs("td",{style:xa,children:["L",Number(B.precio||0).toFixed(2)]}),s.jsx("td",{style:xa,children:(()=>{const re=Number(B.stock||0),ge=re>10?"#16a34a":re>0?"#d97706":"#dc2626";return s.jsx("span",{style:{color:ge,fontWeight:600},children:re})})()}),s.jsx("td",{style:xa,children:s.jsx("button",{onClick:()=>k(B),disabled:Number(B.stock||0)===0,className:"btn-opaque",style:{padding:"6px 14px",borderRadius:6,fontSize:"0.8rem"},children:Number(B.stock||0)>0?"Agregar":"Agotado"})})]},B.id))})]})})}),s.jsxs("div",{style:{background:"white",borderRadius:10,padding:16,boxShadow:"0 1px 4px rgba(0,0,0,0.05)",height:"fit-content",position:"sticky",top:16,alignSelf:"start"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:12},children:[s.jsxs("h3",{style:{margin:0,fontSize:"1.1rem",fontWeight:600},children:["Carrito (",l.length,")"]}),l.length>0&&s.jsx("button",{onClick:he,className:"btn-opaque",style:{background:"transparent",color:"#2563eb",fontSize:"0.85rem",padding:"6px 8px"},children:"Vaciar"})]}),l.length>0&&s.jsxs("div",{style:{border:"2px solid #e2e8f0",borderRadius:8,padding:12,marginBottom:16,background:"#f8fafc"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontWeight:500},children:[s.jsx("span",{children:"Subtotal:"}),s.jsxs("span",{children:["L",T.toFixed(2)]})]}),s.jsx("div",{style:{display:"flex",justifyContent:"space-between",color:"#16a34a",fontWeight:500},children:s.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:6},children:[s.jsxs("div",{children:["ISV (",(m*100).toFixed(2),"%): ",s.jsxs("strong",{children:["L",I.toFixed(2)]})]}),s.jsxs("div",{children:["Impuesto 18%: ",s.jsxs("strong",{children:["L",M.toFixed(2)]})]}),s.jsxs("div",{children:["Impuesto turstico (",(_*100).toFixed(2),"%): ",s.jsxs("strong",{children:["L",J.toFixed(2)]})]})]})}),s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"1.25rem",fontWeight:700,marginTop:8,color:"#1e293b"},children:[s.jsx("span",{children:"TOTAL:"}),s.jsxs("span",{children:["L",C.toFixed(2)]})]}),s.jsxs("div",{style:{marginTop:8,fontSize:12,color:"#475569"},children:[s.jsxs("div",{children:["Tax rates: ISV ",(m*100).toFixed(2),"%, 18% ",(x*100).toFixed(2),"%, Tur ",(_*100).toFixed(2),"%"]}),s.jsxs("details",{style:{marginTop:6},children:[s.jsx("summary",{style:{cursor:"pointer"},children:"Ver desglose por tem"}),s.jsx("div",{style:{marginTop:8},children:z.map(B=>s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"4px 0",borderBottom:"1px dashed #eef2ff"},children:[s.jsxs("div",{style:{color:"#0f172a"},children:[B.nombre,"  L",B.price.toFixed(2)]}),s.jsxs("div",{style:{color:"#0f172a"},children:["ISV: L",B.isv.toFixed(2),"  18%: L",B.imp18.toFixed(2),"  Tur: L",B.tur.toFixed(2)]})]},String(B.id)))})]})]}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8,marginTop:16},children:[s.jsx("button",{onClick:()=>Dt("cotizacion"),className:"btn-opaque",children:"Cotizacin"}),s.jsx("button",{onClick:()=>Dt("factura"),className:"btn-opaque",children:"Facturar"})]})]}),l.length===0?s.jsx("div",{style:{textAlign:"center",padding:"40px 0",color:"#94a3b8",fontStyle:"italic"},children:"Carrito vaco"}):s.jsx("div",{style:{maxHeight:"40vh",overflowY:"auto",borderTop:"1px solid #e2e8f0",paddingTop:8},children:l.map(B=>s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 0",borderBottom:"1px dashed #e2e8f0"},children:[s.jsxs("div",{style:{flex:1},children:[s.jsxs("div",{style:{fontWeight:500,fontSize:"0.9rem"},children:["[",B.producto.sku,"] ",B.producto.nombre]}),s.jsxs("div",{style:{fontSize:"0.8rem",color:"#64748b"},children:["L",Number(B.producto.precio||0).toFixed(2)," c/u"]})]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[s.jsx("button",{onClick:()=>V(B.producto.id,-1),style:tu,children:""}),s.jsx("span",{style:{minWidth:28,textAlign:"center",fontWeight:600},children:B.cantidad}),s.jsx("button",{onClick:()=>V(B.producto.id,1),style:tu,children:"+"}),s.jsx("button",{onClick:()=>le(B.producto.id),style:{...tu,background:"#ef4444"},children:""})]})]},B.producto.id))})]})]})]}),Cl&&s.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(2,6,23,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},children:s.jsxs("div",{style:{width:520,maxWidth:"95%",background:"white",borderRadius:10,padding:18,boxShadow:"0 12px 40px rgba(2,6,23,0.3)"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:8},children:[s.jsx("h3",{style:{margin:0},children:Ye?Ye.producto:"Ubicacin"}),s.jsx("button",{onClick:()=>{An(!1),tn(null)},className:"btn-opaque",style:{padding:"6px 10px"},children:"Cerrar"})]}),Ye?s.jsx("div",{children:s.jsxs("div",{style:{display:"flex",gap:12,alignItems:"flex-start"},children:[(()=>{const B=Ye.id?Jn[String(Ye.id)]??Ye.imagen:Ye.imagen;return B?s.jsx("img",{src:encodeURI(String(B)),alt:Ye.producto,style:{width:320,height:200,objectFit:"cover",borderRadius:8,flexShrink:0},onError:re=>{re.currentTarget.src=""}}):s.jsx("div",{style:{width:320,height:200,background:"#f1f5f9",borderRadius:8,display:"flex",alignItems:"center",justifyContent:"center"},children:"Sin imagen"})})(),s.jsxs("div",{style:{flex:1},children:[s.jsxs("p",{style:{margin:"6px 0"},children:[s.jsx("strong",{children:"SKU:"})," ",Ye.sku]}),s.jsxs("p",{style:{margin:"6px 0"},children:[s.jsx("strong",{children:"Descripcin:"})," ",Ye.descripcion]}),s.jsxs("div",{style:{marginTop:8,padding:8,borderRadius:8,background:"#f8fafc"},children:[s.jsxs("p",{style:{margin:0},children:[s.jsx("strong",{children:"Seccin:"})," ",Ye.ubicacion?.seccion]}),s.jsxs("p",{style:{margin:0},children:[s.jsx("strong",{children:"Bloque:"})," ",Ye.ubicacion?.bloque]}),s.jsxs("p",{style:{margin:0},children:[s.jsx("strong",{children:"Estante:"})," ",Ye.ubicacion?.estante]})]}),s.jsx("p",{style:{marginTop:8,color:"#6b7280"},children:s.jsxs("small",{children:["Cantidad: ",Ye.cantidad]})})]})]})}):s.jsx("div",{children:s.jsx("p",{children:"No se encontr informacin de ubicacin para este artculo."})})]})}),oe&&s.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(2,6,23,0.6)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},children:s.jsxs("div",{style:{width:640,maxWidth:"95%",background:"white",borderRadius:12,padding:20,boxShadow:"0 18px 50px rgba(2,6,23,0.35)",display:"flex",gap:16,alignItems:"stretch"},children:[s.jsxs("div",{style:{flex:1},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:8},children:[s.jsx("h3",{style:{margin:0},children:"Seleccionar tipo de cliente"}),s.jsx("button",{onClick:()=>te(!1),className:"btn-opaque",style:{padding:"6px 10px"},children:"Cerrar"})]}),s.jsx("p",{style:{color:"#475569",marginTop:6},children:"Elige si la factura ser para Cliente Final o para un Cliente registrado. Cliente Final genera una factura inmediata lista para imprimir. Cliente Normal permite ingresar datos del cliente."}),s.jsxs("div",{style:{display:"flex",gap:12,marginTop:12},children:[s.jsxs("div",{onClick:at,role:"button",tabIndex:0,style:{flex:1,borderRadius:10,padding:14,cursor:"pointer",boxShadow:"0 6px 18px rgba(2,6,23,0.08)",border:"1px solid #e6edf3",display:"flex",flexDirection:"column",gap:8},children:[s.jsx("div",{style:{fontSize:28},children:""}),s.jsx("div",{style:{fontWeight:700},children:"Cliente Final"}),s.jsx("div",{style:{color:"#64748b",fontSize:13},children:"Factura para consumidor final. No requiere RTN."}),s.jsx("div",{style:{marginTop:8,color:"#0f172a",fontWeight:700},children:""})]}),s.jsxs("div",{onClick:wa,role:"button",tabIndex:0,style:{flex:1,borderRadius:10,padding:14,cursor:"pointer",boxShadow:"0 6px 18px rgba(2,6,23,0.08)",border:"1px solid #e6edf3",display:"flex",flexDirection:"column",gap:8},children:[s.jsx("div",{style:{fontSize:28},children:""}),s.jsx("div",{style:{fontWeight:700},children:"Cliente Normal"}),s.jsx("div",{style:{color:"#64748b",fontSize:13},children:"Ingresar nombre y nmero de identificacin (RTN) para la factura."}),s.jsx("div",{style:{marginTop:8,color:"#0f172a",fontWeight:700},children:""})]}),s.jsxs("div",{onClick:El,role:"button",tabIndex:0,style:{flex:1,borderRadius:10,padding:14,cursor:"pointer",boxShadow:"0 6px 18px rgba(2,6,23,0.08)",border:"1px solid #e6edf3",display:"flex",flexDirection:"column",gap:8},children:[s.jsx("div",{style:{fontSize:28},children:""}),s.jsx("div",{style:{fontWeight:700},children:"Cliente Jurdico"}),s.jsx("div",{style:{color:"#64748b",fontSize:13},children:"Ingresar razn social y nmero de identificacin (RTN) para la factura."}),s.jsx("div",{style:{marginTop:8,color:"#0f172a",fontWeight:700},children:""})]})]})]}),s.jsxs("div",{style:{width:220,borderLeft:"1px dashed #e6edf3",paddingLeft:16,display:"flex",flexDirection:"column",gap:8},children:[s.jsx("div",{style:{fontWeight:700},children:"Resumen"}),s.jsxs("div",{style:{color:"#475569"},children:["Items: ",s.jsx("strong",{children:l.length})]}),s.jsxs("div",{style:{color:"#475569"},children:["SubTotal: ",s.jsxs("strong",{children:["L ",mn().toFixed(2)]})]}),s.jsxs("div",{style:{color:"#475569"},children:["ISV (",(m*100).toFixed(2),"%): ",s.jsxs("strong",{children:["L ",(rt()*m).toFixed(2)]})]}),s.jsxs("div",{style:{marginTop:8,fontSize:18,fontWeight:800},children:["Total: L ",(mn()+rt()*m).toFixed(2)]}),s.jsx("div",{style:{marginTop:12,fontSize:12,color:"#94a3b8"},children:"Seleccione una opcin para continuar."})]})]})}),pe&&s.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(2,6,23,0.6)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},children:s.jsxs("div",{style:{width:600,maxWidth:"95%",background:"white",borderRadius:12,padding:20,boxShadow:"0 18px 50px rgba(2,6,23,0.35)"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:8},children:[s.jsx("h3",{style:{margin:0},children:ae==="juridico"?"Datos del Cliente (Jurdico)":"Datos del Cliente"}),s.jsx("button",{onClick:()=>D(!1),className:"btn-opaque",style:{padding:"6px 10px"},children:"Cerrar"})]}),s.jsx("p",{style:{color:"#475569",marginTop:6},children:ae==="juridico"?"Ingrese nmero de identificacin (RTN) y razn social del cliente jurdico. Estos datos se incluirn en la factura.":"Ingrese nmero de identificacin (RTN) y nombre completo del cliente. Estos datos se incluirn en la factura."}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12,marginTop:12},children:[s.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:6},children:[s.jsx("label",{style:{fontSize:13,color:"#334155"},children:"RTN o Identificacin"}),s.jsxs("div",{style:{display:"flex",gap:8},children:[s.jsx("input",{ref:G,value:E,onChange:B=>{_t(B.target.value)},placeholder:"00000000000000",style:{flex:1,padding:10,borderRadius:8,border:"1px solid #e2e8f0"}}),ae==="juridico"&&s.jsx("button",{onClick:()=>Z(!0),className:"btn-opaque",style:{padding:"8px 10px"},children:"Buscar"})]})]}),s.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:6},children:[s.jsx("label",{style:{fontSize:13,color:"#334155"},children:ae==="juridico"?"Razn social":"Nombre completo"}),s.jsx("input",{ref:Y,value:ne,onChange:B=>ue(B.target.value),placeholder:ae==="juridico"?"Razn social de la empresa":"Nombre del cliente",style:{padding:10,borderRadius:8,border:"1px solid #e2e8f0"}})]})]}),s.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:8,marginTop:14},children:[s.jsx(F0,{open:L,onClose:()=>Z(!1),onSelect:B=>{U(B.rtn||""),ue(B.nombre||""),se(B.telefono||""),Ee(B.correo_electronico||""),Te(!!B.exonerado),ee("juridico")}}),s.jsx("button",{onClick:()=>D(!1),className:"btn-opaque",style:{background:"transparent",color:"#111"},children:"Cancelar"}),s.jsx("button",{onClick:()=>He(!0),className:"btn-opaque",style:{background:"transparent",color:"#0b5cff"},children:"Crear cliente"}),s.jsx("button",{onClick:Ut,className:"btn-opaque",disabled:!ne||!E,style:{opacity:!ne||!E?.6:1},children:"Generar Factura"})]})]})}),Ue&&s.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(2,6,23,0.6)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},children:s.jsxs("div",{style:{width:680,maxWidth:"95%",background:"white",borderRadius:12,padding:20,boxShadow:"0 18px 50px rgba(2,6,23,0.35)"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:8},children:[s.jsx("h3",{style:{margin:0},children:"Crear Cliente Jurdico"}),s.jsx("button",{onClick:()=>He(!1),className:"btn-opaque",style:{padding:"6px 10px"},children:"Cerrar"})]}),s.jsxs("p",{style:{color:"#475569",marginTop:6},children:["Complete los datos del cliente jurdico. El campo tipo se fijar a ",s.jsx("strong",{children:"juridico"}),"."]}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12,marginTop:12},children:[s.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:6},children:[s.jsx("label",{style:{fontSize:13,color:"#334155"},children:"RTN"}),s.jsx("input",{value:E,onChange:B=>U(B.target.value),placeholder:"00000000000000",style:{padding:10,borderRadius:8,border:"1px solid #e2e8f0"}})]}),s.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:6},children:[s.jsx("label",{style:{fontSize:13,color:"#334155"},children:"Razn social"}),s.jsx("input",{value:ne,onChange:B=>ue(B.target.value),placeholder:"Razn social",style:{padding:10,borderRadius:8,border:"1px solid #e2e8f0"}})]}),s.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:6},children:[s.jsx("label",{style:{fontSize:13,color:"#334155"},children:"Telfono"}),s.jsx("input",{value:de,onChange:B=>se(B.target.value),placeholder:"Telfono",style:{padding:10,borderRadius:8,border:"1px solid #e2e8f0"}})]}),s.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:6},children:[s.jsx("label",{style:{fontSize:13,color:"#334155"},children:"Correo electrnico"}),s.jsx("input",{value:fe,onChange:B=>Ee(B.target.value),placeholder:"correo@ejemplo.com",style:{padding:10,borderRadius:8,border:"1px solid #e2e8f0"}})]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[s.jsx("input",{id:"exon",type:"checkbox",checked:Ne,onChange:B=>Te(B.target.checked)}),s.jsx("label",{htmlFor:"exon",children:"Exonerado"})]})]}),s.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:8,marginTop:14},children:[s.jsx("button",{onClick:()=>He(!1),className:"btn-opaque",style:{background:"transparent",color:"#111"},children:"Cancelar"}),s.jsx("button",{onClick:async()=>{try{if(!ne||!E)return;const{data:B,error:re}=await ce.from("clientes").select("id").eq("rtn",E).maybeSingle();if(re&&console.warn("Error buscando cliente al crear:",re),B&&B.id){const{error:ge}=await ce.from("clientes").update({nombre:ne,telefono:de||null,correo_electronica:fe||null,tipo_cliente:"juridico",exonerado:Ne}).eq("id",B.id);ge&&console.warn("Error actualizando cliente al crear:",ge)}else{const{error:ge}=await ce.from("clientes").insert([{nombre:ne,rtn:E,telefono:de||null,correo_electronica:fe||null,tipo_cliente:"juridico",exonerado:Ne}]);ge&&console.warn("Error insertando cliente al crear:",ge)}}catch(B){console.warn("Error creando cliente juridico:",B)}He(!1)},className:"btn-opaque",style:{opacity:!ne||!E?.6:1},disabled:!ne||!E,children:"Crear cliente"})]})]})})]})}const _a={padding:"12px 10px",textAlign:"left",fontSize:"0.85rem",fontWeight:600,color:"#475569"},xa={padding:"10px",fontSize:"0.9rem",verticalAlign:"middle"},e_={fontSize:"0.75rem",background:"#e2e8f0",padding:"2px 6px",borderRadius:4,fontFamily:"monospace"},tu={width:26,height:26,borderRadius:6,border:"none",background:"#e2e8f0",fontWeight:"bold",cursor:"pointer",fontSize:"0.9rem"},tp=[{id:"dashboard",label:"Dashboard"},{id:"datos",label:"Datos de mi empresa"},{id:"usuarios",label:"Usuarios / Cajeros",children:[{id:"usuarios_internal",label:"Usuarios Cajeros"},{id:"usuarios_web",label:"Usuarios web (usuarios_web)"}]},{id:"factura",label:"Factura y CAI",children:[{id:"cai",label:"Gestio de CAI por cajas"},{id:"facturas",label:"Facturas (ventas)"},{id:"historial_facturas",label:"Historial de facturas"},{id:"impuestos",label:"Impuestos"}]},{id:"inventario",label:"Inventario",children:[{id:"inventario_productos",label:"Productos (Inventario)"},{id:"precios_productos",label:"Precios de productos"},{id:"precios_historico",label:"Histrico de precios"},{id:"stock",label:"Stock"},{id:"inventario_salidas",label:"Movimiento de Inventario"},{id:"inventario_categorias",label:"Categoras / Marcas (opcional)"}]},{id:"compras",label:"Compras y Proveedores",children:[{id:"compras_main",label:"Compras (compras)"},{id:"compras_detalle",label:"Detalle de Compras (Lneas)"},{id:"proveedores",label:"Proveedores (proveedores)"},{id:"devoluciones_proveedores",label:"Devolucin a Proveedores"}]},{id:"cierres",label:"Cierres de caja",children:[{id:"caja_sesiones",label:"Sesiones de caja (caja_sesiones)"},{id:"caja_movimientos",label:"Movimientos de caja (caja_movimientos)"}]},{id:"pedidos",label:"Pedidos web / Ecommerce",children:[{id:"pedidos_web",label:"Pedidos web (pedidos_web)"},{id:"pedidos_detalle",label:"Detalle de pedidos (pedidos_web_detalle)"},{id:"pagos_web",label:"Pagos web (pagos_web)"}]},{id:"cotizaciones",label:"Cotizaciones",children:[{id:"cotizaciones",label:"Cotizaciones (cotizaciones)"},{id:"cotizaciones_detalle",label:"Detalle de cotizaciones (cotizaciones_detalle)"}]},{id:"reportes",label:"Reportes",children:[{id:"rep_ventas",label:"Ventas (ventas + ventas_detalle)"},{id:"rep_devoluciones",label:"Devoluciones (devoluciones_ventas)"},{id:"rep_ingresos_egresos",label:"Ingresos / Egresos (caja_movimientos)"},{id:"rep_compras",label:"Compras"},{id:"rep_inventario",label:"Inventario"},{id:"rep_export",label:"Exportar reportes generales (PDF / Excel)"}]},{id:"contaduria",label:"Contadura / Libro Diario",children:[{id:"cuentas_contables",label:"Cuentas contables (cuentas_contables)"},{id:"libro_diario",label:"Libro diario (libro_diario)"},{id:"auditoria",label:"Auditora (auditoria)"}]},{id:"salir",label:"Salir"}];function t_({title:o,children:a}){return s.jsxs("div",{style:{padding:18},children:[s.jsx("h2",{style:{marginTop:0},children:o}),s.jsx("div",{style:{marginTop:8,color:"#475569"},children:a})]})}function n_(){const[o,a]=j.useState(null);return j.useEffect(()=>{fetch("/data-base/dashboard-data.json").then(r=>r.json()).then(r=>a(r)).catch(()=>a(null))},[]),s.jsxs("div",{style:{padding:18},children:[s.jsx("h2",{style:{marginTop:0},children:"Dashboard"}),s.jsx("div",{style:{marginTop:8,color:"#475569"},children:o?s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16},children:[s.jsxs("div",{style:{padding:12,borderRadius:8,background:"#fff"},children:[s.jsx("h3",{children:"Ventas (ltimos das)"}),s.jsx("pre",{style:{whiteSpace:"pre-wrap"},children:JSON.stringify(o.sales,null,2)})]}),s.jsxs("div",{style:{padding:12,borderRadius:8,background:"#fff"},children:[s.jsx("h3",{children:"Flujo de caja"}),s.jsx("pre",{style:{whiteSpace:"pre-wrap"},children:JSON.stringify(o.cashflow,null,2)})]}),s.jsxs("div",{style:{padding:12,borderRadius:8,background:"#fff"},children:[s.jsx("h3",{children:"Inventario por categora"}),s.jsx("pre",{style:{whiteSpace:"pre-wrap"},children:JSON.stringify(o.inventory,null,2)})]}),s.jsxs("div",{style:{padding:12,borderRadius:8,background:"#fff"},children:[s.jsx("h3",{children:"Promedios"}),s.jsx("pre",{style:{whiteSpace:"pre-wrap"},children:JSON.stringify(o.averages,null,2)})]})]}):s.jsx("div",{children:"Cargando datos del dashboard..."})})]})}const a_="modulepreload",i_=function(o){return"/"+o},np={},pn=function(a,r,l){let u=Promise.resolve();if(r&&r.length>0){let m=function(b){return Promise.all(b.map(x=>Promise.resolve(x).then(S=>({status:"fulfilled",value:S}),S=>({status:"rejected",reason:S}))))};var f=m;document.getElementsByTagName("link");const g=document.querySelector("meta[property=csp-nonce]"),p=g?.nonce||g?.getAttribute("nonce");u=m(r.map(b=>{if(b=i_(b),b in np)return;np[b]=!0;const x=b.endsWith(".css"),S=x?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${b}"]${S}`))return;const _=document.createElement("link");if(_.rel=x?"stylesheet":a_,x||(_.as="script"),_.crossOrigin="",_.href=b,p&&_.setAttribute("nonce",p),document.head.appendChild(_),x)return new Promise((w,A)=>{_.addEventListener("load",w),_.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${b}`)))})}))}function d(g){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=g,window.dispatchEvent(p),!p.defaultPrevented)throw g}return u.then(g=>{for(const p of g||[])p.status==="rejected"&&d(p.reason);return a().catch(d)})};function Wp({open:o,title:a="Confirmado",message:r="",onClose:l,onCancel:u,confirmLabel:d="Aceptar",cancelLabel:f="Cancelar"}){return o?s.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.4)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},children:s.jsxs("div",{style:{width:420,background:"#fff",borderRadius:8,padding:18,boxShadow:"0 4px 20px rgba(2,6,23,0.2)"},children:[s.jsx("h3",{style:{marginTop:0},children:a}),s.jsx("div",{style:{marginTop:8,color:"#334155"},children:r}),s.jsxs("div",{style:{marginTop:16,display:"flex",justifyContent:"flex-end",gap:8},children:[s.jsx("button",{className:"btn-opaque",onClick:u??l,style:{width:"auto"},children:f}),s.jsx("button",{className:"btn-primary",onClick:l,style:{width:"auto"},children:d})]})]})}):null}function r_(){const[o,a]=j.useState(null),[r,l]=j.useState(!1),[u,d]=j.useState(!1),[f,g]=j.useState({}),[p,m]=j.useState(null),[b,x]=j.useState(!1),[S,_]=j.useState(null),[w,A]=j.useState(!1),[R,T]=j.useState(null),[I,M]=j.useState(null),[J,C]=j.useState(!1),[z,k]=j.useState(""),[V,le]=j.useState(""),[he,oe]=j.useState(null),[te,H]=j.useState(null);j.useEffect(()=>{let U=!0;return(async()=>{l(!0);try{const G=(await pn(async()=>{const{default:ee}=await Promise.resolve().then(()=>gn);return{default:ee}},void 0)).default,{data:Y,error:ae}=await G.from("empresa").select("*").limit(1).single();if(!U)return;if(ae)throw ae;if(Y){a(Y),g(Y);try{localStorage.setItem("companyData",JSON.stringify(Y))}catch{}l(!1);return}}catch(G){console.debug("No se pudo cargar empresa desde Supabase, fallback a JSON/localStorage",G)}try{const G=localStorage.getItem("companyData");if(G){a(JSON.parse(G)),g(JSON.parse(G)),l(!1);return}}catch{}try{const G=await fetch("/data-base/company.json");if(!G.ok)throw new Error("no json");const Y=await G.json();if(!U)return;a(Y),g(Y)}catch{U&&a(null)}finally{U&&l(!1)}})(),()=>{U=!1}},[]),j.useEffect(()=>{o&&g(o)},[o]),j.useEffect(()=>{try{const U=localStorage.getItem("pendingCompanySave");if(U){const G=JSON.parse(U);x(!0),_(G.payload??null),A(!!G.needsLogo)}}catch{}},[]),j.useEffect(()=>{let U=!0;return(async()=>{try{if(!o||!o.logo){U&&oe(null);return}const G=String(o.logo);if(G.startsWith("http")){U&&oe(G);return}const Y=(await pn(async()=>{const{default:Ee}=await Promise.resolve().then(()=>gn);return{default:Ee}},void 0)).default,ae="logo",de=(await Y.storage.from(ae).getPublicUrl(G))?.data?.publicUrl??null;if(de){U&&oe(de);return}const fe=(await Y.storage.from(ae).createSignedUrl(G,3600))?.data?.signedUrl??null;if(fe){U&&oe(fe);return}U&&oe(null)}catch(G){console.warn("Error resolving company logo URL",G),U&&oe(null)}})(),()=>{U=!1}},[o?.logo]),j.useEffect(()=>{let U=!0;return(async()=>{try{if(p){U&&H(p);return}const G=f?.logo;if(!G){U&&H(null);return}const Y=String(G);if(Y.startsWith("http")){U&&H(Y);return}const ae=(await pn(async()=>{const{default:Ne}=await Promise.resolve().then(()=>gn);return{default:Ne}},void 0)).default,ee="logo",se=(await ae.storage.from(ee).getPublicUrl(Y))?.data?.publicUrl??null;if(se){U&&H(se);return}const Ee=(await ae.storage.from(ee).createSignedUrl(Y,3600))?.data?.signedUrl??null;if(Ee){U&&H(Ee);return}U&&H(null)}catch(G){console.warn("Error resolving edit logo URL",G),U&&H(null)}})(),()=>{U=!1}},[f?.logo,p]);function ie(){d(!0),g(o||{})}function pe(){d(!1);try{p&&(URL.revokeObjectURL(p),m(null))}catch{}g(o||{})}function D(U){const{name:G,value:Y}=U.target;g(ae=>({...ae,[G]:Y}))}function L(U){const G=U.target.files?.[0]??null;if(g(Y=>({...Y,logoFile:G})),G)try{const Y=URL.createObjectURL(G);m(Y)}catch{m(null)}else m(null)}function Z(U=!1){const G="logo",Y="https://sqwqlvsjtimallidxrsz.supabase.co";if(U){if(p)return p;const de=f?.logo;if(!de)return"/logo192.png";if(String(de).startsWith("http"))return String(de);let se=String(de);return se.startsWith(`${G}/`)&&(se=se.slice(G.length+1)),`${Y}/storage/v1/object/public/${G}/${encodeURIComponent(se)}`}if(!o)return"/logo192.png";const ae=o.logo;if(!ae)return"/logo192.png";if(String(ae).startsWith("http"))return String(ae);let ee=String(ae);return ee.startsWith(`${G}/`)&&(ee=ee.slice(G.length+1)),`${Y}/storage/v1/object/public/${G}/${encodeURIComponent(ee)}`}async function ne(){try{const U=(await pn(async()=>{const{default:se}=await Promise.resolve().then(()=>gn);return{default:se}},void 0)).default,G={...f||{}};let Y=null;const ae=se=>{if(!se)return null;if(!se.startsWith("http"))return se;const fe=se.match(/\/storage\/v1\/object\/public\/([^/]+)\/(.*)/);return fe?decodeURIComponent(fe[2]):null},ee=o?.logo??null;try{const se=f&&f.logoFile instanceof File?f.logoFile:null,fe="logo";if(se){const Ne=`logo/${G.id??(crypto&&crypto.randomUUID?crypto.randomUUID():String(Date.now()))}/${Date.now()}_${se.name.replace(/[^a-zA-Z0-9.\-_/]/g,"_")}`,Te=await U.storage.from(fe).upload(Ne,se,{upsert:!0});if(Te.error)throw Te.error;const Ue=Te.data?.path??Ne;Y=Ue,G.logo=Ue}}catch(se){console.warn("Logo upload error",se)}try{G.logoFile&&delete G.logoFile}catch{}let de=null;try{if(o&&o.id){const{data:se,error:fe}=await U.from("empresa").update(G).eq("id",o.id).select("*");if(fe)throw fe;de=Array.isArray(se)?se[0]??null:se}else{const{data:se,error:fe}=await U.from("empresa").insert(G).select("*");if(fe)throw fe;de=Array.isArray(se)?se[0]??null:se}try{if(Y){const se=ae(ee);if(se&&se!==Y){const Ee=await U.storage.from("logo").remove([se]);Ee.error&&console.warn("Failed to remove old company logo after DB update",Ee.error)}}}catch(se){console.warn("Error removing old logo after DB success",se)}}catch(se){try{if(Y){const Ee=await U.storage.from("logo").remove([Y]);Ee.error&&console.warn("Failed to remove uploaded logo after DB error",Ee.error)}}catch(fe){console.warn("Error cleaning uploaded logo after DB failure",fe)}throw se}a(de),g(de);try{console.debug("Empresa guardada, logo field:",de?.logo)}catch{}try{M(de?.logo??null)}catch{}try{k("Datos guardados"),le("Los datos de la empresa se guardaron correctamente."),C(!0)}catch{}try{p&&(URL.revokeObjectURL(p),m(null))}catch{}try{localStorage.setItem("companyData",JSON.stringify(de))}catch{}d(!1)}catch(U){console.error("Error guardando empresa en Supabase",U);try{T(U?.message||String(U))}catch{}try{const G={...f||{}};G.logoFile&&delete G.logoFile;const Y=!!(f&&f.logoFile instanceof File);localStorage.setItem("pendingCompanySave",JSON.stringify({payload:G,needsLogo:Y,ts:Date.now()})),x(!0),_(G),A(Y),a(f);try{localStorage.setItem("companyData",JSON.stringify(f))}catch{}d(!1),k("Guardado localmente"),le("Los datos se guardaron localmente porque no se pudo alcanzar Supabase. Puedes reintentar cuando tengas conexin."),C(!0)}catch(G){console.error("Error saving locally",G)}}}async function ue(){const U=S;if(!U){k("Sin pendientes"),le("No hay datos pendientes para enviar"),C(!0);return}try{const G=(await pn(async()=>{const{default:ae}=await Promise.resolve().then(()=>gn);return{default:ae}},void 0)).default;let Y=null;if(U.id){const{data:ae,error:ee}=await G.from("empresa").update(U).eq("id",U.id).select("*");if(ee)throw ee;Y=Array.isArray(ae)?ae[0]??null:ae}else{const{data:ae,error:ee}=await G.from("empresa").insert(U).select("*");if(ee)throw ee;Y=Array.isArray(ae)?ae[0]??null:ae}localStorage.removeItem("pendingCompanySave"),x(!1),_(null),A(!1),a(Y),g(Y),k("Sincronizado"),le("Los datos pendientes se sincronizaron con Supabase correctamente."),C(!0)}catch(G){console.error("Error reenviando datos pendientes",G),k("Error al reenviar"),le("No se pudo reenviar los datos a Supabase: "+(G?.message||String(G))),C(!0)}}function E(){try{localStorage.removeItem("pendingCompanySave"),x(!1),_(null),A(!1),k("Pendiente descartado"),le("El guardado pendiente fue descartado."),C(!0)}catch{}}return s.jsxs("div",{style:{padding:18},children:[s.jsx("h2",{style:{marginTop:0},children:"Datos de mi empresa"}),r?s.jsx("div",{children:"Cargando datos de la empresa..."}):o?s.jsxs("div",{style:{display:"flex",gap:16,alignItems:"flex-start"},children:[s.jsxs("div",{style:{background:"#fff",padding:18,borderRadius:8,minWidth:420,boxShadow:"0 1px 3px rgba(2,6,23,0.06)"},children:[b?s.jsx("div",{style:{background:"#fff7ed",border:"1px solid #fbbf24",padding:8,borderRadius:6,marginBottom:8},children:s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[s.jsxs("div",{style:{flex:1},children:[s.jsx("strong",{children:"Guardado localmente:"})," Los datos no se sincronizaron con Supabase.",R?s.jsxs("div",{style:{fontSize:12,color:"#b91c1c"},children:["Error: ",String(R)]}):null,w?s.jsx("div",{style:{fontSize:12,color:"#92400e"},children:"Nota: el archivo de logo no se incluy y deber subirse de nuevo."}):null]}),s.jsxs("div",{style:{display:"flex",gap:8},children:[s.jsx("button",{className:"btn-primary",onClick:ue,children:"Reintentar guardar en Supabase"}),s.jsx("button",{className:"btn-opaque",onClick:E,children:"Descartar pendiente"})]})]})}):null,I?s.jsxs("div",{style:{marginBottom:8,fontSize:13},children:[s.jsx("strong",{children:"Logo guardado:"}),s.jsxs("div",{style:{marginTop:6},children:[s.jsx("a",{href:Z(!1),target:"_blank",rel:"noopener noreferrer",children:"Abrir logo"}),s.jsx("div",{style:{color:"#374151",fontSize:12},children:String(I)})]})]}):null,s.jsxs("div",{style:{display:"flex",gap:12,alignItems:"center"},children:[s.jsx("div",{style:{width:120,height:60,display:"flex",alignItems:"center",justifyContent:"center",background:"#f1f5f9",borderRadius:6,overflow:"hidden"},children:s.jsx("img",{src:u?te??Z(!0):he??Z(!1),alt:"logo",style:{maxWidth:"100%",maxHeight:"100%",objectFit:"contain"}})}),s.jsx("h3",{style:{marginTop:0},children:o.nombre})]}),s.jsxs("div",{style:{marginTop:8,color:"#334155"},children:[s.jsxs("div",{style:{marginBottom:8},children:[s.jsx("strong",{children:"RTN:"})," ",u?s.jsx("input",{name:"rtn",value:f.rtn||"",onChange:D,className:"input"}):o.rtn]}),s.jsxs("div",{style:{marginBottom:8},children:[s.jsx("strong",{children:"Telfono:"})," ",u?s.jsx("input",{name:"telefono",value:f.telefono||"",onChange:D,className:"input"}):o.telefono]}),s.jsxs("div",{style:{marginBottom:8},children:[s.jsx("strong",{children:"Correo:"})," ",u?s.jsx("input",{name:"email",value:f.email||"",onChange:D,className:"input"}):o.email]}),s.jsxs("div",{style:{marginBottom:8},children:[s.jsx("strong",{children:"Direccin:"})," ",u?s.jsx("textarea",{name:"direccion",value:f.direccion||"",onChange:D,className:"input",style:{minHeight:64}}):o.direccion]}),s.jsxs("div",{style:{marginBottom:8},children:[s.jsx("strong",{children:"Logo (archivo o URL):"}),u?s.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center",marginTop:6},children:[s.jsx("input",{type:"file",accept:"image/*",onChange:L}),s.jsx("input",{name:"logo",value:f.logo||"",onChange:D,className:"input",placeholder:"https://.../logo.png",style:{flex:1}})]}):s.jsx("span",{style:{marginLeft:6},children:o.logo?"URL configurada":"No hay logo"}),u&&p?s.jsxs("div",{style:{marginTop:8},children:[s.jsx("small",{children:"Preview:"}),s.jsx("div",{style:{width:160,height:60,marginTop:6,background:"#fff",border:"1px solid #e6e6e6",display:"flex",alignItems:"center",justifyContent:"center"},children:s.jsx("img",{src:p,alt:"preview",style:{maxWidth:"100%",maxHeight:"100%",objectFit:"contain"}})})]}):null]})]}),s.jsx("div",{style:{marginTop:12,display:"flex",gap:8},children:u?s.jsxs(s.Fragment,{children:[s.jsx("button",{type:"button",onClick:ne,className:"btn-primary",children:"Guardar"}),s.jsx("button",{type:"button",onClick:pe,className:"btn-opaque",children:"Cancelar"})]}):s.jsx(s.Fragment,{children:s.jsx("button",{type:"button",onClick:ie,className:"btn-primary",children:"Actualizar datos"})})})]}),s.jsx("div",{style:{flex:1,minWidth:320},children:s.jsxs("div",{style:{background:"#fff",padding:16,borderRadius:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[s.jsx("div",{style:{width:220,height:90,display:"flex",alignItems:"center",justifyContent:"center",background:"#f1f5f9",borderRadius:8,overflow:"hidden",marginBottom:12},children:s.jsx("img",{src:u?te??Z(!0):he??Z(!1),alt:"logo",style:{maxWidth:"100%",maxHeight:"100%",objectFit:"contain"}})}),s.jsx("h4",{style:{margin:0,marginBottom:8},children:"Detalles rpidos"}),s.jsxs("p",{style:{margin:0},children:["RTN: ",s.jsx("strong",{children:o.rtn})]}),s.jsxs("p",{style:{margin:0},children:["Telfono: ",s.jsx("strong",{children:o.telefono})]}),s.jsxs("p",{style:{marginTop:8},children:["Correo: ",s.jsx("strong",{children:o.email})]}),s.jsxs("p",{style:{marginTop:8},children:["Direccin: ",s.jsx("strong",{children:o.direccion})]})]})})]}):s.jsx("div",{children:"No se encontraron datos de la empresa."}),s.jsx(Wp,{open:J,title:z,message:V,onClose:()=>C(!1)})]})}function s_(){return s.jsxs("div",{style:{padding:18},children:[s.jsx("h2",{style:{marginTop:0},children:"Usuarios web (usuarios_web)"}),s.jsx("div",{style:{marginTop:8,color:"#475569"},children:"Esta vista mostrar los usuarios registrados desde la web. (Placeholder)"})]})}function l_(){const[o,a]=j.useState([]),[r,l]=j.useState(!1),[u,d]=j.useState(null),[f,g]=j.useState(""),[p,m]=j.useState(""),[b,x]=j.useState(""),[S,_]=j.useState(""),[w,A]=j.useState(null),[R,T]=j.useState(""),[I,M]=j.useState(""),[J,C]=j.useState("");async function z(){l(!0),d(null);try{const{data:H,error:ie}=await ce.from("users").select("id, username, role, nombre_usuario").limit(1e3);if(ie)throw ie;a(Array.isArray(H)?H:[])}catch(H){d(H?.message||String(H)),a([])}finally{l(!1)}}async function k(){if(!p)return d("Ingrese un nombre de usuario para crear");if(!b)return d("Ingrese una contrasea para crear");l(!0),d(null);try{const H={username:p,password:b,role:"cajero"};S&&(H.nombre_usuario=S);const{error:ie}=await ce.from("users").insert(H);if(ie)throw ie;m(""),x(""),_(""),await z()}catch(H){d(H?.message||String(H))}finally{l(!1)}}function V(H){A(H.id),T(H.username||""),C(H.nombre_usuario||""),M(""),d(null)}function le(){A(null),T(""),M(""),C(""),d(null)}async function he(){if(w!=null){if(!R)return d("El nombre de usuario no puede estar vaco");l(!0),d(null);try{const H={username:R};I&&(H.password=I),H.nombre_usuario=J||null;const{error:ie}=await ce.from("users").update(H).eq("id",w);if(ie)throw ie;le(),await z()}catch(H){d(H?.message||String(H))}finally{l(!1)}}}async function oe(H,ie){if(ie!=="cajero")return d('Solo se pueden eliminar usuarios con role "cajero"');if(confirm("Eliminar este usuario? Esta accin no se puede deshacer.")){l(!0),d(null);try{const{error:pe}=await ce.from("users").delete().eq("id",H);if(pe)throw pe;await z()}catch(pe){d(pe?.message||String(pe))}finally{l(!1)}}}j.useEffect(()=>{let H=!0;return(async()=>H&&await z())(),()=>{H=!1}},[]);const te=o.filter(H=>{if(!f)return!0;const ie=f.toLowerCase();return(H.username||"").toLowerCase().includes(ie)||(String(H.id)||"").includes(ie)||(H.role||"").toLowerCase().includes(ie)||(H.nombre_usuario||"").toLowerCase().includes(ie)});return s.jsxs("div",{style:{padding:18},children:[s.jsx("h2",{style:{marginTop:0},children:"Usuarios Cajeros"}),s.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center",marginBottom:12,flexWrap:"wrap"},children:[s.jsx("input",{placeholder:"Buscar usuario o rol...",className:"input",value:f,onChange:H=>g(H.target.value),style:{minWidth:220}}),s.jsx("button",{onClick:()=>z(),className:"btn-opaque",children:"Recargar"}),s.jsx("div",{style:{marginLeft:"auto",color:"#64748b"},children:r?"Cargando...":`${te.length} usuarios`}),s.jsx("div",{style:{width:"100%",height:8}}),s.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[s.jsx("input",{placeholder:"Nuevo usuario",className:"input",value:p,onChange:H=>m(H.target.value)}),s.jsx("input",{placeholder:"Nombre",className:"input",value:S,onChange:H=>_(H.target.value)}),s.jsx("input",{placeholder:"Contrasea",className:"input",type:"password",value:b,onChange:H=>x(H.target.value)}),s.jsx("button",{onClick:()=>k(),className:"btn-primary",children:"Crear (role: cajero)"})]})]}),u?s.jsx("div",{style:{color:"red",marginBottom:12},children:u}):s.jsxs("div",{style:{background:"#fff",padding:12,borderRadius:8,overflowX:"auto"},children:[s.jsxs("table",{className:"admin-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"ID"}),s.jsx("th",{children:"Usuario"}),s.jsx("th",{children:"Nombre"}),s.jsx("th",{children:"Rol"})]})}),s.jsx("tbody",{children:te.map(H=>s.jsxs("tr",{children:[s.jsx("td",{style:{width:80},children:H.id}),s.jsx("td",{style:{minWidth:180},children:w===H.id?s.jsx("input",{className:"input",value:R,onChange:ie=>T(ie.target.value)}):H.username||"-"}),s.jsx("td",{style:{minWidth:180},children:w===H.id?s.jsx("input",{className:"input",value:J,onChange:ie=>C(ie.target.value)}):H.nombre_usuario||"-"}),s.jsx("td",{style:{width:220},children:w===H.id?s.jsx("input",{className:"input",placeholder:"Nueva contrasea (opcional)",type:"password",value:I,onChange:ie=>M(ie.target.value)}):H.role||"-"}),s.jsx("td",{style:{whiteSpace:"nowrap"},children:w===H.id?s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>he(),className:"btn-primary",style:{marginRight:6},children:"Guardar"}),s.jsx("button",{onClick:()=>le(),className:"btn-opaque",children:"Cancelar"})]}):s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>V(H),className:"btn-opaque",style:{marginRight:6},children:"Editar"}),H.role==="cajero"?s.jsx("button",{onClick:()=>oe(H.id,H.role),className:"btn-danger",children:"Eliminar"}):s.jsx("button",{className:"btn-opaque",disabled:!0,title:"No se puede eliminar usuarios admin",children:"Eliminar"})]})})]},H.id))})]}),te.length===0&&!r&&s.jsx("div",{style:{padding:12},children:"No se encontraron usuarios."})]})]})}function o_({open:o,onClose:a,row:r,cajeros:l,availableCajeros:u,availableCajas:d,onSave:f}){const[g,p]=j.useState(null),[m,b]=j.useState(null),[x,S]=j.useState(!1),[_,w]=j.useState(null),[A,R]=j.useState(""),[T,I]=j.useState(""),[M,J]=j.useState(""),[C,z]=j.useState(""),[k,V]=j.useState(!1),[le,he]=j.useState(null);if(j.useEffect(()=>{if(!o||!r)return;w(r.caja??null),R(r.cai??""),I(r.rango_de??""),J(r.rango_hasta??""),z(r.fecha_vencimiento??"");const te=r.cajero??null;if(te){const H=l.find(ie=>ie.username===te||ie.nombre_usuario===te);H?(p(H.id),b(null),S(!1)):(p(null),b(te),S(!0))}else p(null),b(null),S(!1);he(null)},[o,r,l]),!o||!r)return null;async function oe(){if(!r){he("Registro invlido");return}if(_!=null&&(_<1||_>5)){he("La caja debe estar entre 1 y 5");return}V(!0),he(null);try{const te={cai:A??null,rango_de:T??null,rango_hasta:M??null,fecha_vencimiento:C??null,caja:_??null};if(g!=null){const H=l.find(ie=>ie.id===g);te.cajero=H?H.username:null}else te.cajero=m??null;await f(r.id,te),a()}catch(te){he(te?.message||String(te))}finally{V(!1)}}return s.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.4)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3},children:s.jsxs("div",{style:{width:720,maxWidth:"95%",background:"#fff",borderRadius:8,padding:16},children:[s.jsxs("h3",{style:{marginTop:0},children:["Editar CAI  ID ",r.id]}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",marginBottom:6},children:"CAI"}),s.jsx("input",{className:"input",value:A,onChange:te=>R(te.target.value)}),s.jsx("label",{style:{display:"block",marginTop:8,marginBottom:6},children:"Rango Desde"}),s.jsx("input",{className:"input",value:T,onChange:te=>I(te.target.value)}),s.jsx("label",{style:{display:"block",marginTop:8,marginBottom:6},children:"Rango Hasta"}),s.jsx("input",{className:"input",value:M,onChange:te=>J(te.target.value)})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",marginBottom:6},children:"Fecha de Vencimiento"}),s.jsx("input",{className:"input",type:"date",value:C,onChange:te=>z(te.target.value)}),s.jsx("label",{style:{display:"block",marginTop:12,marginBottom:6},children:"Cajero"}),s.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[s.jsxs("select",{className:"input",style:{minHeight:36,minWidth:200},value:g!=null?String(g):x?"__custom__":"",onChange:te=>{const H=te.target.value;H===""?(p(null),b(null),S(!1)):H==="__custom__"?(p(null),S(!0)):/^\d+$/.test(H)&&(p(Number(H)),b(null),S(!1))},children:[s.jsx("option",{value:"",children:"-- sin asignar --"}),(u??l).map(te=>s.jsxs("option",{value:String(te.id),children:[te.username,te.nombre_usuario?`  ${te.nombre_usuario}`:""]},te.id)),s.jsx("option",{value:"__custom__",children:"-- personalizado --"})]}),x&&s.jsx("input",{className:"input",placeholder:"Nombre de cajero",value:m??"",onChange:te=>{b(te.target.value),p(null)},style:{minHeight:36}}),s.jsxs("div",{style:{marginLeft:12},children:[s.jsx("label",{style:{display:"block",marginBottom:6},children:"Caja"}),s.jsxs("select",{className:"input",style:{minHeight:36,minWidth:120},value:_??"",onChange:te=>w(te.target.value===""?null:Number(te.target.value)),children:[s.jsx("option",{value:"",children:"-- sin asignar --"}),(d??[1,2,3,4,5]).map(te=>s.jsx("option",{value:te,children:te},te))]})]})]})]})]}),le&&s.jsx("div",{style:{color:"red",marginTop:12},children:le}),s.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:8,marginTop:16},children:[s.jsx("button",{className:"btn-opaque",onClick:a,disabled:k,style:{width:"auto"},children:"Cancelar"}),s.jsx("button",{className:"btn-primary",onClick:oe,disabled:k,style:{width:"auto",padding:"8px 14px"},children:k?"Guardando...":"Guardar"})]})]})})}function c_({open:o,onClose:a,cajeros:r,availableCajeros:l,availableCajas:u,onCreate:d}){const[f,g]=j.useState(null),[p,m]=j.useState(null),[b,x]=j.useState(!1),[S,_]=j.useState(null),[w,A]=j.useState(""),[R,T]=j.useState(""),[I,M]=j.useState(""),[J,C]=j.useState(""),[z,k]=j.useState(!1),[V,le]=j.useState(null);if(!o)return null;async function he(){const oe=[];if(w||oe.push("CAI"),R||oe.push("Rango Desde"),I||oe.push("Rango Hasta"),J||oe.push("Fecha de Vencimiento"),S==null&&oe.push("Caja"),f==null&&!p&&oe.push("Cajero"),oe.length>0){le(`Campos obligatorios faltantes: ${oe.join(", ")}`);return}if(S!=null&&(S<1||S>5)){le("La caja debe estar entre 1 y 5");return}k(!0),le(null);try{const te={cai:w??null,rango_de:R??null,rango_hasta:I??null,fecha_vencimiento:J??null,caja:S??null};if(f!=null){const H=r.find(ie=>ie.id===f);te.cajero=H?H.username:null}else te.cajero=p??null;await d(te),a()}catch(te){le(te?.message||String(te))}finally{k(!1)}}return s.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.4)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3},children:s.jsxs("div",{style:{width:720,maxWidth:"95%",background:"#fff",borderRadius:8,padding:16},children:[s.jsx("h3",{style:{marginTop:0},children:"Agregar CAI"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",marginBottom:6},children:"CAI"}),s.jsx("input",{className:"input",value:w,onChange:oe=>A(oe.target.value)}),s.jsx("label",{style:{display:"block",marginTop:8,marginBottom:6},children:"Rango Desde"}),s.jsx("input",{className:"input",value:R,onChange:oe=>T(oe.target.value)}),s.jsx("label",{style:{display:"block",marginTop:8,marginBottom:6},children:"Rango Hasta"}),s.jsx("input",{className:"input",value:I,onChange:oe=>M(oe.target.value)})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",marginBottom:6},children:"Fecha de Vencimiento"}),s.jsx("input",{className:"input",type:"date",value:J,onChange:oe=>C(oe.target.value)}),s.jsx("label",{style:{display:"block",marginTop:12,marginBottom:6},children:"Cajero"}),s.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[s.jsxs("select",{className:"input",style:{minHeight:36,minWidth:200},value:f!=null?String(f):b?"__custom__":"",onChange:oe=>{const te=oe.target.value;te===""?(g(null),m(null),x(!1)):te==="__custom__"?(g(null),x(!0)):/^\d+$/.test(te)&&(g(Number(te)),m(null),x(!1))},children:[s.jsx("option",{value:"",children:"-- sin asignar --"}),(l??r).map(oe=>s.jsxs("option",{value:String(oe.id),children:[oe.username,oe.nombre_usuario?`  ${oe.nombre_usuario}`:""]},oe.id)),s.jsx("option",{value:"__custom__",children:"-- personalizado --"})]}),b&&s.jsx("input",{className:"input",placeholder:"Nombre de cajero",value:p??"",onChange:oe=>{m(oe.target.value),g(null)},style:{minHeight:36}}),s.jsxs("div",{style:{marginLeft:12},children:[s.jsx("label",{style:{display:"block",marginBottom:6},children:"Caja"}),s.jsxs("select",{className:"input",style:{minHeight:36,minWidth:120},value:S??"",onChange:oe=>_(oe.target.value===""?null:Number(oe.target.value)),children:[s.jsx("option",{value:"",children:"-- sin asignar --"}),(u??[1,2,3,4,5]).map(oe=>s.jsx("option",{value:oe,children:oe},oe))]})]})]})]})]}),V&&s.jsx("div",{style:{color:"red",marginTop:12},children:V}),s.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:8,marginTop:16},children:[s.jsx("button",{className:"btn-opaque",onClick:a,disabled:z,style:{width:"auto"},children:"Cancelar"}),s.jsx("button",{className:"btn-primary",onClick:he,disabled:z,style:{width:"auto",padding:"8px 14px"},children:z?"Creando...":"Crear"})]})]})})}function u_(){const[o,a]=j.useState([]),[r,l]=j.useState(!1),[u,d]=j.useState(null),[f,g]=j.useState([]),[p,m]=j.useState(null),[b,x]=j.useState(!1),[S,_]=j.useState(!1);async function w(){l(!0),d(null);try{const{data:C,error:z}=await ce.from("cai").select("id, cai, rango_de, rango_hasta, fecha_vencimiento, caja, cajero").order("id",{ascending:!0});if(z)throw z;a(Array.isArray(C)?C:[])}catch(C){d(C?.message||String(C)),a([])}finally{l(!1)}}async function A(){try{const{data:C}=await ce.from("users").select("id, username, nombre_usuario").eq("role","cajero").order("username",{ascending:!0});g(Array.isArray(C)?C:[])}catch{}}j.useEffect(()=>{w(),A()},[]);const R=new Set(o.filter(C=>C.cajero).map(C=>String(C.cajero))),T=new Set(o.filter(C=>C.caja!=null).map(C=>Number(C.caja)));function I(C){m(C),x(!0),d(null)}function M(){x(!1),m(null)}async function J(C,z){l(!0),d(null);try{const{error:k}=await ce.from("cai").update(z).eq("id",C);if(k)throw k;await w()}catch(k){throw d(k?.message||String(k)),k}finally{l(!1)}}return s.jsxs("div",{style:{padding:18},children:[s.jsx("h2",{style:{marginTop:0},children:"Gestio de -CAI- por cajas"}),s.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center",marginBottom:12},children:[s.jsx("button",{className:"btn-opaque",onClick:()=>w(),children:"Recargar"}),s.jsx("button",{className:"btn-primary",onClick:()=>_(!0),style:{marginLeft:6},children:"Agregar"}),s.jsx("div",{style:{marginLeft:"auto",color:"#64748b"},children:r?"Cargando...":`${o.length} registros`})]}),u&&s.jsx("div",{style:{color:"red",marginBottom:12},children:u}),s.jsxs("div",{style:{background:"#fff",padding:12,borderRadius:8,overflowX:"auto"},children:[s.jsxs("table",{className:"admin-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"ID"}),s.jsx("th",{children:"CAI"}),s.jsx("th",{children:"Rango Desde"}),s.jsx("th",{children:"Rango Hasta"}),s.jsx("th",{children:"Vencimiento"}),s.jsx("th",{children:"Cajero"}),s.jsx("th",{children:"Caja"}),s.jsx("th",{children:"Acciones"})]})}),s.jsx("tbody",{children:o.map(C=>s.jsxs("tr",{children:[s.jsx("td",{style:{width:80},children:C.id}),s.jsx("td",{style:{minWidth:200},children:C.cai}),s.jsx("td",{children:C.rango_de}),s.jsx("td",{children:C.rango_hasta}),s.jsx("td",{children:C.fecha_vencimiento}),s.jsx("td",{style:{minWidth:180},children:C.cajero||"-"}),s.jsx("td",{style:{width:120},children:C.caja??"-"}),s.jsx("td",{style:{whiteSpace:"nowrap"},children:s.jsx(s.Fragment,{children:s.jsx("button",{onClick:()=>I(C),className:"btn-opaque",style:{marginRight:6},children:"Editar"})})})]},C.id))})]}),o.length===0&&!r&&s.jsx("div",{style:{padding:12},children:"No se encontraron registros."})]}),s.jsx(o_,{open:b,onClose:M,row:p,cajeros:f,availableCajeros:p?f.filter(C=>!R.has(C.username)||C.username===p.cajero):f.filter(C=>!R.has(C.username)),availableCajas:p?[1,2,3,4,5].filter(C=>!T.has(C)||C===p.caja):[1,2,3,4,5].filter(C=>!T.has(C)),onSave:J}),s.jsx(c_,{open:S,onClose:()=>_(!1),cajeros:f,availableCajeros:f.filter(C=>!R.has(C.username)),availableCajas:[1,2,3,4,5].filter(C=>!T.has(C)),onCreate:async C=>{l(!0),d(null);try{const{error:z}=await ce.from("cai").insert(C);if(z)throw z;await w(),_(!1)}catch(z){throw d(z?.message||String(z)),z}finally{l(!1)}}})]})}function d_(){return s.jsxs("div",{style:{padding:18},children:[s.jsx("h2",{style:{marginTop:0},children:"Facturas (ventas)"}),s.jsx("p",{style:{color:"#475569"},children:"Listado de facturas y gestin de ventas. (Placeholder)"})]})}function h_(){return s.jsxs("div",{style:{padding:18},children:[s.jsx("h2",{style:{marginTop:0},children:"Historial de facturas"}),s.jsx("p",{style:{color:"#475569"},children:"Historial de facturas emitidas. (Placeholder)"})]})}var Eu=ip();function f_({open:o,title:a="Confirmar",message:r="Ests seguro?",onClose:l,onConfirm:u}){const[d,f]=rp.useState(!1);if(!o)return null;const g=async()=>{try{f(!0),await u()}finally{f(!1)}};return Eu.createPortal(s.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.45)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center"},children:s.jsxs("div",{style:{background:"#fff",padding:18,borderRadius:8,width:420},children:[s.jsx("h3",{style:{marginTop:0},children:a}),s.jsx("p",{children:r}),s.jsxs("div",{style:{display:"flex",gap:8,justifyContent:"flex-end"},children:[s.jsx("button",{className:"btn-opaque",onClick:l,disabled:d,children:"Cancelar"}),s.jsx("button",{className:"btn-danger",onClick:g,disabled:d,children:d?"...":"Eliminar"})]})]})}),typeof document<"u"&&document.body||document.createElement("div"))}function g_({open:o,title:a="Formulario",columns:r,initialData:l={},onClose:u,onSave:d}){const[f,g]=j.useState({}),[p,m]=j.useState(!1),[b,x]=j.useState(null);if(j.useEffect(()=>{g(l||{}),l&&typeof l.imagen=="string"?x(l.imagen):x(null)},[l,o]),!o)return null;const S=(R,T)=>{g(I=>({...I,[R]:T}))},_=async R=>{R.preventDefault();try{m(!0),await d(f)}finally{m(!1)}},w=R=>R==="creado_en"?null:R==="id"?s.jsx("input",{className:"input",value:f[R]??"",readOnly:!0}):R.includes("publicacion")||R.includes("exento")||R.includes("aplica_impuesto")||R==="publicacion_web"?s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[s.jsxs("label",{className:"switch",children:[s.jsx("input",{type:"checkbox",checked:!!f[R],onChange:T=>S(R,T.target.checked)}),s.jsx("span",{className:"slider"})]}),s.jsx("span",{style:{fontSize:13},children:f[R]?"S":"No"})]}):R.includes("categoria")||R.includes("marca")?s.jsx("input",{type:"text",className:"input",value:f[R]??"",onChange:T=>S(R,T.target.value===""?null:T.target.value)}):R==="imagen"?s.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[b?s.jsx("img",{src:b,alt:"preview",style:{maxWidth:200,maxHeight:120,objectFit:"contain"}}):null,s.jsx("input",{type:"file",accept:"image/*",onChange:T=>{const I=T.target.files&&T.target.files[0];if(S(R,I??null),I)try{const M=URL.createObjectURL(I);x(M)}catch{x(null)}else x(null)}}),b?s.jsx("button",{type:"button",className:"btn-opaque",onClick:()=>{S(R,null),x(null)},children:"Eliminar imagen"}):null]}):s.jsx("input",{className:"input",value:f[R]??"",onChange:T=>S(R,T.target.value)}),A=s.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.45)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center"},children:s.jsxs("div",{style:{background:"#fff",padding:18,borderRadius:8,width:720,maxHeight:"90vh",overflow:"auto"},children:[s.jsx("h3",{style:{marginTop:0},children:a}),s.jsxs("form",{onSubmit:_,children:[s.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12},children:r.map(R=>s.jsxs("label",{style:{display:"block"},children:[s.jsx("div",{style:{fontSize:12,color:"#374151",marginBottom:6},children:String(R).replace(/_/g," ").toUpperCase()}),w(R)]},R))}),s.jsxs("div",{style:{marginTop:12,display:"flex",gap:8,justifyContent:"flex-end"},children:[s.jsx("button",{type:"button",className:"btn-opaque",onClick:u,disabled:p,children:"Cancelar"}),s.jsx("button",{type:"submit",className:"btn-primary",disabled:p,children:p?"Guardando...":"Guardar"})]})]})]})});return Eu.createPortal(A,typeof document<"u"&&document.body||document.createElement("div"))}function p_({open:o,data:a,title:r="Detalle",onClose:l,onEdit:u,onDeleteClick:d}){if(!o)return null;const f=a||{},[g,p]=j.useState(null),[m,b]=j.useState(null),[x,S]=j.useState(null),[_,w]=j.useState(null);return j.useEffect(()=>{let A=!0;return(async()=>{const T=typeof f.imagen=="string"?f.imagen:null;if(!T){A&&p(null);return}if(T.startsWith("http")){A&&(p(T),S(T));return}let I=T;const M=String(T).match(/\/storage\/v1\/object\/public\/([^/]+)\/(.*)/);M&&(I=decodeURIComponent(M[2]));const J="inventario";try{const C=(await pn(async()=>{const{default:he}=await Promise.resolve().then(()=>gn);return{default:he}},void 0)).default,z=await C.storage.from(J).getPublicUrl(I),k=z?.data?.publicUrl||z?.data?.publicURL||null;if(k){A&&(p(k),S(k));return}const V=await C.storage.from(J).createSignedUrl(I,3600*24*7);if(V.error){console.warn("ProductDetailModal createSignedUrl error",V.error),A&&p(null);return}const le=V.data?.signedUrl??null;A&&(p(le),S(le))}catch(C){console.error("ProductDetailModal resolve error",C),A&&p(null)}})(),()=>{A=!1}},[f]),j.useEffect(()=>{let A=!0;return(async()=>{if(w(null),!!x)try{const T=await fetch(x,{method:"HEAD"});if(!A)return;w(`HEAD ${T.status} ${T.statusText} - content-type: ${T.headers.get("content-type")}`)}catch(T){if(!A)return;w(`FETCH_ERROR: ${String(T)}`)}})(),()=>{A=!1}},[x]),Eu.createPortal(s.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.45)",zIndex:1e4,display:"flex",alignItems:"center",justifyContent:"center"},children:s.jsxs("div",{style:{background:"#fff",padding:18,borderRadius:8,width:760,maxHeight:"90vh",overflow:"auto"},children:[s.jsx("h3",{style:{marginTop:0},children:r}),s.jsxs("div",{style:{display:"flex",gap:18},children:[s.jsx("div",{style:{flex:1},children:s.jsx("table",{style:{width:"100%"},children:s.jsx("tbody",{children:Object.keys(f).map(A=>{const R=f[A];return A==="imagen"&&typeof R=="string"?null:s.jsxs("tr",{children:[s.jsx("td",{style:{fontWeight:700,padding:6,width:160},children:String(A).replace(/_/g," ").toUpperCase()}),s.jsx("td",{style:{padding:6},children:String(R??"-")})]},A)})})})}),s.jsx("div",{style:{width:280,textAlign:"center"},children:g?s.jsx("img",{src:encodeURI(g),alt:"imagen",style:{maxWidth:260,maxHeight:260,objectFit:"contain"},onError:A=>{console.warn("Image load failed for",g),b(g),p(null)}}):m?s.jsxs("div",{style:{width:260,height:200,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"#fff5f5",color:"#b91c1c",border:"1px dashed #fca5a5",padding:8},children:[s.jsx("div",{style:{marginBottom:8,fontWeight:700},children:"Error cargando imagen"}),s.jsx("a",{href:m,target:"_blank",rel:"noopener noreferrer",style:{color:"#b91c1c",wordBreak:"break-all"},children:"Abrir imagen"})]}):s.jsx("div",{style:{width:260,height:200,display:"flex",alignItems:"center",justifyContent:"center",background:"#f3f4f6",color:"#6b7280"},children:"Sin imagen"})})]}),s.jsxs("div",{style:{marginTop:12,display:"flex",gap:8,justifyContent:"flex-end"},children:[s.jsx("button",{type:"button",className:"btn-opaque",onClick:()=>u(f),children:"Editar"}),s.jsx("button",{type:"button",className:"btn-danger",onClick:()=>d(f.id),children:"Eliminar"}),s.jsx("button",{type:"button",className:"btn-opaque",onClick:l,children:"Cerrar"})]})]})}),typeof document<"u"&&document.body||document.createElement("div"))}function m_({table:o,select:a,title:r,limit:l=500,columns:u,searchColumns:d,order:f,filters:g,allowAdd:p=!1,allowEdit:m=!1,allowDelete:b=!1,formExclude:x=[]}){const[S,_]=j.useState(null),[w,A]=j.useState(!1),[R,T]=j.useState(null),[I,M]=j.useState(""),[J,C]=j.useState(!1),[z,k]=j.useState("add"),[V,le]=j.useState({}),[he,oe]=j.useState(!1),[te,H]=j.useState(null),[ie,pe]=j.useState(!1),[D,L]=j.useState(null),Z=j.useRef(!0),ne=async()=>{A(!0),T(null);try{const ee=(await pn(async()=>{const{default:Ee}=await Promise.resolve().then(()=>gn);return{default:Ee}},void 0)).default,de=a||"*";let se=ee.from(o).select(de).limit(l);f&&(Array.isArray(f)?f:String(f).split(",").map(Ne=>Ne.trim()).filter(Boolean)).forEach(Ne=>{const Te=Ne.split(" ").map(_t=>_t.trim()).filter(Boolean),Ue=Te[0],He=Te[1]?Te[1].toLowerCase():"asc";se=se.order(Ue,{ascending:He!=="desc"})}),g&&Object.entries(g).forEach(([Ee,Ne])=>{Ne==null||Ne===""||(se=se.eq(Ee,Ne))});const fe=await se;if(console.debug("SupabaseTable fetch result for",o,fe),!Z.current)return;if(fe.error)throw fe.error;_(Array.isArray(fe.data)?fe.data:[])}catch(ee){console.error("SupabaseTable error",ee),T(ee?.message||String(ee)),_([])}finally{Z.current&&A(!1)}};j.useEffect(()=>(Z.current=!0,ne(),()=>{Z.current=!1}),[o,a,l]);const ue=j.useMemo(()=>u&&u.length>0?u:!S||S.length===0?[]:Object.keys(S[0]),[u,S]),E=j.useMemo(()=>{if(!S)return null;const ee=(I||"").toString().trim().toLowerCase();if(!ee)return S;const de=d&&d.length>0?d:ue;return S.filter(se=>de.some(fe=>{const Ee=se?.[fe];return Ee==null?!1:String(Ee).toLowerCase().includes(ee)}))},[S,I,d,ue]),U=()=>{p&&(k("add"),le({}),C(!0))},G=ee=>{m&&(k("edit"),le(ee),C(!0))},Y=async ee=>{const de=(await pn(async()=>{const{default:se}=await Promise.resolve().then(()=>gn);return{default:se}},void 0)).default;try{const se="inventario",fe={...ee},Ee=z==="edit"?V?.imagen??null:null,Ne=Te=>{if(!Te)return null;if(!Te.startsWith("http"))return Te;const Ue=Te.match(/\/storage\/v1\/object\/public\/([^/]+)\/(.*)/);return Ue?decodeURIComponent(Ue[2]):null};if(fe.imagen&&fe.imagen instanceof File){const Te=fe.imagen,Ue=fe.id??(crypto&&crypto.randomUUID?crypto.randomUUID():String(Date.now())),He=`${o}/${Ue}/${Date.now()}_${Te.name.replace(/[^a-zA-Z0-9.\-_/]/g,"_")}`,_t=await de.storage.from(se).upload(He,Te,{upsert:!0});if(_t.error)throw _t.error;const Dt=_t.data?.path??He;fe.imagen=Dt;try{const zt=Ne(Ee);if(zt&&zt!==Dt){const Wt=await de.storage.from(se).remove([zt]);Wt.error&&console.warn("Failed to remove old image",Wt.error)}}catch(zt){console.warn("Error removing old image",zt)}}if(z==="edit"&&(fe.imagen==null||fe.imagen===""))try{const Te=Ne(V?.imagen??null);if(Te){const Ue=await de.storage.from(se).remove([Te]);Ue.error&&console.warn("Failed to remove old image on clear",Ue.error)}}catch(Te){console.warn("Error removing old image on clear",Te)}if(z==="add"){const{error:Te}=await de.from(o).insert([fe]);if(Te)throw Te}else{const Te=fe.id,Ue={...fe};delete Ue.id;const{error:He}=await de.from(o).update(Ue).eq("id",Te);if(He)throw He}C(!1),await ne()}catch(se){console.error("Error saving",se),T(se?.message||String(se))}},ae=async()=>{if(te==null)return;const ee=(await pn(async()=>{const{default:de}=await Promise.resolve().then(()=>gn);return{default:de}},void 0)).default;try{if(!b)return;try{const se="inventario",fe=S?.find(Ue=>Ue.id===te),Ee=Ue=>{if(!Ue)return null;if(!Ue.startsWith("http"))return Ue;const He=Ue.match(/\/storage\/v1\/object\/public\/([^/]+)\/(.*)/);return He?decodeURIComponent(He[2]):null},Ne=fe?.imagen??null,Te=Ee(Ne);if(Te){const Ue=await ee.storage.from(se).remove([Te]);Ue.error&&console.warn("Failed to remove image on delete",Ue.error)}}catch(se){console.warn("Error removing image before delete",se)}const{error:de}=await ee.from(o).delete().eq("id",te);if(de)throw de;oe(!1),H(null),await ne()}catch(de){console.error("Error deleting",de),T(de?.message||String(de))}};return s.jsxs("div",{style:{padding:18},children:[r?s.jsx("h2",{style:{marginTop:0},children:r}):null,s.jsxs("div",{style:{display:"flex",gap:8,marginBottom:12},children:[s.jsx("input",{placeholder:"Buscar...",value:I,onChange:ee=>M(ee.target.value),className:"input",style:{minWidth:240}}),s.jsx("button",{onClick:()=>{T(null),M(""),ne()},className:"btn-opaque",children:"Recargar"}),s.jsx("div",{style:{marginLeft:"auto"},children:s.jsx("button",{onClick:U,className:"btn-primary",children:"Agregar"})})]}),w&&s.jsxs("div",{children:["Cargando datos de `",o,"` desde Supabase..."]}),R&&s.jsxs("div",{style:{color:"#b91c1c"},children:["Error: ",R]}),!w&&S&&S.length===0&&s.jsxs("div",{children:["No hay registros en la tabla ",s.jsx("strong",{children:o}),"."]}),!w&&E&&E.length>0&&s.jsx("div",{style:{overflowX:"auto"},children:s.jsxs("table",{className:"admin-table",style:{width:"100%"},children:[s.jsx("thead",{children:s.jsxs("tr",{children:[ue.map(ee=>s.jsx("th",{children:String(ee).replace(/_/g," ").toUpperCase()},ee)),s.jsx("th",{style:{width:140},children:"Acciones"})]})}),s.jsx("tbody",{children:E.map((ee,de)=>s.jsxs("tr",{children:[ue.map(se=>{if(se==="imagen"){const fe=ee?.imagen??null;return fe||console.debug("SupabaseTable: row has no imagen for id",ee?.id,ee),s.jsx("td",{style:{maxWidth:420,wordBreak:"break-word"},children:fe?s.jsx(em,{src:String(fe)}):s.jsx("span",{style:{color:"#6b7280"},children:"-"})},se)}return s.jsx("td",{style:{maxWidth:420,wordBreak:"break-word"},children:y_(ee[se])},se)}),s.jsx("td",{className:"admin-actions",children:s.jsx("button",{className:"btn-opaque",onClick:()=>{L(ee),pe(!0)},children:"Ver"})})]},ee.id??de))})]})}),s.jsx(g_,{open:J,title:z==="add"?`Agregar a ${o}`:`Editar ${o}`,columns:ue.filter(ee=>!x.includes(ee)),initialData:V,onClose:()=>C(!1),onSave:Y}),s.jsx(p_,{open:ie,data:D,title:`Detalle de ${o}`,onClose:()=>pe(!1),onEdit:ee=>{pe(!1),G(ee)},onDeleteClick:ee=>{pe(!1),H(ee),oe(!0)}}),s.jsx(f_,{open:he,title:"Confirmar eliminacin",message:`Eliminar registro de ${o}?`,onClose:()=>oe(!1),onConfirm:ae})]})}function y_(o){if(o==null)return"-";if(typeof o=="object")return JSON.stringify(o);if(typeof o=="boolean")return o?"S":"No";if(typeof o=="number"&&(o===0||o===1))return o===1?"S":"No";if(typeof o=="string"){const a=o.toLowerCase().trim();if(a==="1"||a==="true"||a==="t"||a==="si"||a==="s"||a==="yes")return"S";if(a==="0"||a==="false"||a==="f"||a==="no"||a==="n"||a==="not")return"No";if((o.startsWith("http")||o.startsWith("/"))&&(a.endsWith(".png")||a.endsWith(".jpg")||a.endsWith(".jpeg")||a.endsWith(".gif")||a.endsWith(".webp")||a.endsWith(".svg")||a.includes("/storage/")))return s.jsx(em,{src:o})}return String(o)}function em({src:o}){const[a,r]=j.useState(null),[l,u]=j.useState(null);return j.useEffect(()=>{let d=!0;return(async()=>{if(!o)return;if(o.startsWith("http")){d&&r(o);return}let g=o;const p=String(o).match(/\/storage\/v1\/object\/public\/([^/]+)\/(.*)/);p&&(g=decodeURIComponent(p[2]));try{const m=(await pn(async()=>{const{default:A}=await Promise.resolve().then(()=>gn);return{default:A}},void 0)).default,b="inventario",x=await m.storage.from(b).getPublicUrl(g),S=x?.data?.publicUrl||x?.data?.publicURL||null;if(S){d&&r(S);return}const _=await m.storage.from(b).createSignedUrl(g,3600*24*7);if(_.error){console.warn("Thumbnail createSignedUrl error",_.error),d&&r(null);return}const w=_.data?.signedUrl??null;d&&r(w)}catch(m){console.error("Thumbnail resolve error",m),d&&r(null)}})(),()=>{d=!1}},[o]),!a&&!l?s.jsx("div",{style:{width:140,height:80,display:"flex",alignItems:"center",justifyContent:"center",background:"#f3f4f6",color:"#6b7280",borderRadius:4},children:"Cargando..."}):a?s.jsx("img",{src:encodeURI(a),alt:"img",style:{maxWidth:140,maxHeight:80,objectFit:"contain"},onError:d=>{u(a),r(null)}}):s.jsx("div",{style:{width:140,height:80,display:"flex",alignItems:"center",justifyContent:"center",background:"#fff7ed",border:"1px dashed #f59e0b",padding:4},children:s.jsx("a",{href:l??o,target:"_blank",rel:"noopener noreferrer",style:{fontSize:12,color:"#92400e",textDecoration:"underline",wordBreak:"break-all"},children:"Abrir imagen"})})}function v_(){const[o,a]=j.useState(null),[r,l]=j.useState(""),[u,d]=j.useState(""),[f,g]=j.useState([]),[p,m]=j.useState([]);return j.useEffect(()=>{let b=!0;return(async()=>{try{const _=await(await pn(async()=>{const{default:k}=await Promise.resolve().then(()=>gn);return{default:k}},void 0)).default.from("inventario").select("id,categoria,marca,publicacion_web,exento,aplica_impuesto_18,aplica_impuesto_turistico");if(!b)return;const w=Array.isArray(_.data)?_.data:[],A=new Set(w.map(k=>k.categoria??"").filter(Boolean)),R=new Set(w.map(k=>k.marca??"").filter(Boolean)),T=w.length,I=w.filter(k=>!!k.publicacion_web).length,M=k=>{if(k==null)return!1;if(typeof k=="boolean")return k===!0;if(typeof k=="number")return k===1;const V=String(k).toLowerCase().trim();return V==="1"||V==="true"||V==="t"||V==="si"||V==="s"||V==="yes"},J=w.filter(k=>M(k.exento)).length,C=w.filter(k=>M(k.aplica_impuesto_18)).length,z=w.filter(k=>M(k.aplica_impuesto_turistico)).length;a({categorias:A.size,marcas:R.size,items:T,publicadas:I,exentos:J,aplica_impuesto_18:C,aplica_impuesto_turistico:z}),g(Array.from(A).sort()),m(Array.from(R).sort())}catch(S){console.error("Error loading inventario summary",S)}})(),()=>{b=!1}},[]),s.jsxs("div",{children:[s.jsx("h2",{style:{marginTop:0},children:"PRODUCTOS"}),s.jsxs("div",{style:{display:"flex",gap:12,marginBottom:16},children:[s.jsx(Pa,{label:"Categoras (cuenta)",value:o?String(o.categorias):"..."}),s.jsx(Pa,{label:"Marcas",value:o?String(o.marcas):"..."}),s.jsx(Pa,{label:"Items",value:o?String(o.items):"..."}),s.jsx(Pa,{label:"Publicadas en web",value:o?String(o.publicadas):"..."}),s.jsx(Pa,{label:"Exentos",value:o?String(o.exentos):"..."}),s.jsx(Pa,{label:"Aplica impuesto 18%",value:o?String(o.aplica_impuesto_18):"..."}),s.jsx(Pa,{label:"Impuesto turstico",value:o?String(o.aplica_impuesto_turistico):"..."})]}),s.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center",marginBottom:12},children:[s.jsxs("label",{style:{display:"flex",gap:8,alignItems:"center"},children:[s.jsx("div",{style:{fontSize:13,color:"#374151"},children:"Categoria:"}),s.jsxs("select",{value:r,onChange:b=>l(b.target.value),className:"input",children:[s.jsx("option",{value:"",children:"Todas"}),f.map(b=>s.jsx("option",{value:b,children:b},b))]})]}),s.jsxs("label",{style:{display:"flex",gap:8,alignItems:"center"},children:[s.jsx("div",{style:{fontSize:13,color:"#374151"},children:"Marca:"}),s.jsxs("select",{value:u,onChange:b=>d(b.target.value),className:"input",children:[s.jsx("option",{value:"",children:"Todas"}),p.map(b=>s.jsx("option",{value:b,children:b},b))]})]}),s.jsx("button",{className:"btn-opaque",onClick:()=>{l(""),d("")},children:"Limpiar filtros"}),s.jsx("button",{className:"btn-opaque",onClick:()=>{document.body.classList.add("print-table-only"),setTimeout(()=>{window.print(),document.body.classList.remove("print-table-only")},50)},children:"Imprimir tabla"})]}),s.jsx(m_,{table:"inventario",select:"id, nombre, sku, codigo_barras, categoria, marca, descripcion, modelo, publicacion_web, exento, aplica_impuesto_18, aplica_impuesto_turistico, creado_en,imagen",title:"",order:["id","categoria","marca"],filters:{categoria:r||void 0,marca:u||void 0},columns:["imagen","sku","nombre","marca","modelo","categoria","descripcion","publicacion_web","exento","aplica_impuesto_18","aplica_impuesto_turistico","creado_en"],searchColumns:["nombre","sku","descripcion","codigo_barras","modelo"],formExclude:["codigo_barras","creado_en"],allowAdd:!0,allowEdit:!0,allowDelete:!0})]})}function Pa({label:o,value:a}){return s.jsxs("div",{style:{padding:12,background:"#fff",borderRadius:8,boxShadow:"0 1px 2px rgba(0,0,0,0.04)",minWidth:140},children:[s.jsx("div",{style:{fontSize:12,color:"#6b7280"},children:o}),s.jsx("div",{style:{fontSize:20,fontWeight:700,marginTop:6},children:a})]})}function b_({open:o,onClose:a,products:r,availableCajas:l,onCreate:u}){const[d,f]=j.useState(null),[g,p]=j.useState(""),[m,b]=j.useState(!1),[x,S]=j.useState(null),[_,w]=j.useState(null),[A,R]=j.useState(null),[T,I]=j.useState(null),[M,J]=j.useState(null),[C,z]=j.useState(null),[k,V]=j.useState(null),[le,he]=j.useState(null),[oe,te]=j.useState(null),[H,ie]=j.useState(!1);j.useEffect(()=>{o&&(f(null),p(""),w(null),R(null),I(null),he(null),te(null),S(null))},[o]);async function pe(){const L=[];if(d||L.push("Producto"),g||L.push("Precio"),L.length>0){S(`Faltan campos: ${L.join(", ")}`);return}const Z=Number(g);if(isNaN(Z)||Z<0){S("Precio invlido");return}b(!0),S(null);try{await u({producto_id:d,precio:g});try{const ne={};if(M!==null&&(ne.exento=M),C!==null&&(ne.aplica_impuesto_18=C),k!==null&&(ne.aplica_impuesto_turistico=k),Object.keys(ne).length>0){const{error:ue}=await ce.from("inventario").update(ne).eq("id",d);ue&&console.warn("Error actualizando inventario flags:",ue)}}catch(ne){console.warn("Error al persistir flags en inventario:",ne)}a()}catch(ne){S(ne?.message||String(ne))}finally{b(!1)}}function D(L){return L?Number(L.replace(",",".")):NaN}return j.useEffect(()=>{let L=!0;async function Z(){if(w(null),R(null),I(null),he(null),te(null),!d)return;const ne=D(g);if(!isNaN(ne)){ie(!0);try{const{data:ue,error:E}=await ce.from("compras_detalle").select("costo_unitario").eq("producto_id",d);if(E)throw E;const U=Array.isArray(ue)?ue.map(rt=>Number(rt.costo_unitario)).filter(rt=>!isNaN(rt)):[],G=U.length>0?U.reduce((rt,at)=>rt+at,0)/U.length:0;if(!L)return;w(G);let Y=!1,ae=!1,ee=!1;try{const{data:rt,error:at}=await ce.from("inventario").select("exento,aplica_impuesto_18,aplica_impuesto_turistico").eq("id",d).single();!at&&rt&&(Y=!!rt.exento,ae=!!rt.aplica_impuesto_18,ee=!!rt.aplica_impuesto_turistico,M===null&&J(Y),C===null&&z(ae),k===null&&V(ee))}catch{}const{data:de}=await ce.from("impuesto").select("id, impuesto_venta"),se={};Array.isArray(de)&&de.forEach(rt=>{se[String(rt.id)]=Number(rt.impuesto_venta)});const fe=M!==null?M:Y,Ee=C!==null?C:ae,Ne=k!==null?k:ee;let Te=0;fe?Te=0:Ee?Te=se[2]??se[1]??0:Te=se[1]??0;let Ue=0;Ne&&(Ue=se[3]??0);const He=(Te||0)+(Ue||0),_t=He>1?He/100:He,Dt=ne*_t;R(He),I(Dt);const zt=ne-G,Wt=G>0?zt/G*100:null;he(Wt);const mn=ne>0?(ne-G-Dt)/ne*100:null;te(mn)}catch{}finally{L&&ie(!1)}}}return Z(),()=>{L=!1}},[d,g,M,C,k]),o?s.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.4)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3},children:s.jsxs("div",{style:{width:640,maxWidth:"95%",background:"#fff",borderRadius:8,padding:16},children:[s.jsx("h3",{style:{marginTop:0},children:"Agregar precio"}),s.jsxs("div",{style:{display:"grid",gap:8},children:[s.jsx("label",{style:{fontSize:13},children:"Producto"}),s.jsxs("select",{className:"input",value:d??"",onChange:L=>f(L.target.value||null),children:[s.jsx("option",{value:"",children:"-- seleccionar producto --"}),r.map(L=>s.jsx("option",{value:L.id,children:L.nombre},L.id))]}),s.jsxs("div",{style:{display:"flex",gap:12,alignItems:"center",marginTop:6},children:[s.jsxs("label",{style:{display:"flex",gap:8,alignItems:"center"},children:[s.jsx("input",{type:"checkbox",checked:!!M,onChange:L=>J(L.target.checked)}),s.jsx("span",{style:{fontSize:13},children:"Exento (si activo, impuesto = 0)"})]}),s.jsxs("label",{style:{display:"flex",gap:8,alignItems:"center"},children:[s.jsx("input",{type:"checkbox",checked:!!C,onChange:L=>z(L.target.checked)}),s.jsx("span",{style:{fontSize:13},children:"Usar impuesto 18% (id=2)"})]}),s.jsxs("label",{style:{display:"flex",gap:8,alignItems:"center"},children:[s.jsx("input",{type:"checkbox",checked:!!k,onChange:L=>V(L.target.checked)}),s.jsx("span",{style:{fontSize:13},children:"Impuesto turstico (+ id=3)"})]})]}),s.jsx("label",{style:{fontSize:13},children:"Precio"}),s.jsx("input",{className:"input",value:g,onChange:L=>p(L.target.value),placeholder:"0.00"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8,marginTop:8},children:[s.jsxs("div",{children:[s.jsx("label",{style:{fontSize:13},children:"Costo (promedio compras)"}),s.jsx("input",{className:"input",value:_==null?"":_.toFixed(2),readOnly:!0,placeholder:"--"})]}),s.jsxs("div",{children:[s.jsx("label",{style:{fontSize:13},children:"Impuesto (monto)"}),s.jsx("input",{className:"input",value:T==null?"":T.toFixed(2),readOnly:!0,placeholder:"--"})]}),s.jsxs("div",{children:[s.jsx("label",{style:{fontSize:13},children:"Margen de ganancia (%)"}),s.jsx("input",{className:"input",value:le==null?"":le.toFixed(2),readOnly:!0,placeholder:"--"})]}),s.jsxs("div",{children:[s.jsx("label",{style:{fontSize:13},children:"Rentabilidad (%)"}),s.jsx("input",{className:"input",value:oe==null?"":oe.toFixed(2),readOnly:!0,placeholder:"--"})]})]})]}),x&&s.jsx("div",{style:{color:"red",marginTop:12},children:x}),s.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:8,marginTop:16},children:[s.jsx("button",{className:"btn-opaque",onClick:a,disabled:m,style:{width:"auto"},children:"Cancelar"}),s.jsx("button",{className:"btn-primary",onClick:pe,disabled:m,style:{width:"auto",padding:"8px 14px"},children:m?"Creando...":"Crear"})]})]})}):null}function __({open:o,onClose:a,row:r,products:l,availableProducts:u,onSave:d}){const[f,g]=j.useState(null),[p,m]=j.useState(""),[b,x]=j.useState(!1),[S,_]=j.useState(null),[w,A]=j.useState(null),[R,T]=j.useState(null),[I,M]=j.useState(null),[J,C]=j.useState(null),[z,k]=j.useState(null),[V,le]=j.useState(null),[he,oe]=j.useState(null),[te,H]=j.useState(null),[ie,pe]=j.useState(!1);j.useEffect(()=>{if(!(!o||!r)){g(r.producto_id);try{const Z=Number(r.precio);m(isNaN(Z)?String(r.precio):Z.toFixed(2))}catch{m(r.precio)}_(null)}},[o,r]);function D(Z){return Z?Number(Z.replace(",",".")):NaN}if(j.useEffect(()=>{let Z=!0;async function ne(){if(A(null),T(null),M(null),oe(null),H(null),!o||!r||!f)return;const ue=D(p);if(!isNaN(ue)){pe(!0);try{const{data:E,error:U}=await ce.from("compras_detalle").select("costo_unitario").eq("producto_id",f);if(U)throw U;const G=Array.isArray(E)?E.map(at=>Number(at.costo_unitario)).filter(at=>!isNaN(at)):[],Y=G.length>0?G.reduce((at,wa)=>at+wa,0)/G.length:0;if(!Z)return;A(Y);let ae=!1,ee=!1,de=!1;try{const{data:at,error:wa}=await ce.from("inventario").select("exento,aplica_impuesto_18,aplica_impuesto_turistico").eq("id",f).single();!wa&&at&&(ae=!!at.exento,ee=!!at.aplica_impuesto_18,de=!!at.aplica_impuesto_turistico,J===null&&C(ae),z===null&&k(ee),V===null&&le(de))}catch{}const{data:se}=await ce.from("impuesto").select("id, impuesto_venta"),fe={};Array.isArray(se)&&se.forEach(at=>fe[String(at.id)]=Number(at.impuesto_venta));const Ee=J!==null?J:ae,Ne=z!==null?z:ee,Te=V!==null?V:de;let Ue=0;Ee?Ue=0:Ne?Ue=fe[2]??fe[1]??0:Ue=fe[1]??0;let He=0;Te&&(He=fe[3]??0);const _t=(Ue||0)+(He||0),Dt=_t>1?_t/100:_t,zt=ue*Dt;T(_t),M(zt);const Wt=ue-Y,mn=Y>0?Wt/Y*100:null;oe(mn);const rt=ue>0?(ue-Y-zt)/ue*100:null;H(rt)}catch{}finally{Z&&pe(!1)}}}return ne(),()=>{Z=!1}},[o,r,f,p,J,z,V]),!o||!r)return null;async function L(){const Z=[];if(f||Z.push("Producto"),p||Z.push("Precio"),Z.length>0){_(`Faltan campos: ${Z.join(", ")}`);return}const ne=Number(p);if(isNaN(ne)||ne<0){_("Precio invlido");return}x(!0),_(null);try{const ue=r.id;await d(ue,{producto_id:f,precio:p});try{const E={};if(J!==null&&(E.exento=J),z!==null&&(E.aplica_impuesto_18=z),V!==null&&(E.aplica_impuesto_turistico=V),Object.keys(E).length>0&&f){const{error:U}=await ce.from("inventario").update(E).eq("id",f);U&&console.warn("Error actualizando inventario flags:",U)}}catch(E){console.warn("Error al persistir flags en inventario:",E)}a()}catch(ue){_(ue?.message||String(ue))}finally{x(!1)}}return s.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.4)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3},children:s.jsxs("div",{style:{width:640,maxWidth:"95%",background:"#fff",borderRadius:8,padding:16},children:[s.jsxs("h3",{style:{marginTop:0},children:["Editar precio  ID ",r.id]}),s.jsxs("div",{style:{display:"grid",gap:8},children:[s.jsx("label",{style:{fontSize:13},children:"Producto"}),s.jsxs("select",{className:"input",value:f??"",onChange:Z=>g(Z.target.value||null),children:[s.jsx("option",{value:"",children:"-- seleccionar producto --"}),(u??l).map(Z=>s.jsx("option",{value:Z.id,children:Z.nombre},Z.id))]}),s.jsxs("div",{style:{display:"flex",gap:12,alignItems:"center",marginTop:6},children:[s.jsxs("label",{style:{display:"flex",gap:8,alignItems:"center"},children:[s.jsx("input",{type:"checkbox",checked:!!J,onChange:Z=>C(Z.target.checked)}),s.jsx("span",{style:{fontSize:13},children:"Exento (si activo, impuesto = 0)"})]}),s.jsxs("label",{style:{display:"flex",gap:8,alignItems:"center"},children:[s.jsx("input",{type:"checkbox",checked:!!z,onChange:Z=>k(Z.target.checked)}),s.jsx("span",{style:{fontSize:13},children:"Usar impuesto 18% (id=2)"})]}),s.jsxs("label",{style:{display:"flex",gap:8,alignItems:"center"},children:[s.jsx("input",{type:"checkbox",checked:!!V,onChange:Z=>le(Z.target.checked)}),s.jsx("span",{style:{fontSize:13},children:"Impuesto turstico (+ id=3)"})]})]}),s.jsx("label",{style:{fontSize:13},children:"Precio"}),s.jsx("input",{className:"input",value:p,onChange:Z=>m(Z.target.value),placeholder:"0.00"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8,marginTop:8},children:[s.jsxs("div",{children:[s.jsx("label",{style:{fontSize:13},children:"Costo (promedio compras)"}),s.jsx("input",{className:"input",value:w==null?"":w.toFixed(2),readOnly:!0,placeholder:"--"})]}),s.jsxs("div",{children:[s.jsx("label",{style:{fontSize:13},children:"Impuesto (monto)"}),s.jsx("input",{className:"input",value:I==null?"":I.toFixed(2),readOnly:!0,placeholder:"--"})]}),s.jsxs("div",{children:[s.jsx("label",{style:{fontSize:13},children:"Margen de ganancia (%)"}),s.jsx("input",{className:"input",value:he==null?"":he.toFixed(2),readOnly:!0,placeholder:"--"})]}),s.jsxs("div",{children:[s.jsx("label",{style:{fontSize:13},children:"Rentabilidad (%)"}),s.jsx("input",{className:"input",value:te==null?"":te.toFixed(2),readOnly:!0,placeholder:"--"})]})]})]}),S&&s.jsx("div",{style:{color:"red",marginTop:12},children:S}),s.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:8,marginTop:16},children:[s.jsx("button",{className:"btn-opaque",onClick:a,disabled:b,style:{width:"auto"},children:"Cancelar"}),s.jsx("button",{className:"btn-primary",onClick:L,disabled:b,style:{width:"auto",padding:"8px 14px"},children:b?"Guardando...":"Guardar"})]})]})})}function x_(){const[o,a]=j.useState([]),[r,l]=j.useState([]),[u,d]=j.useState(!1),[f,g]=j.useState(null),[p,m]=j.useState(!1),[b,x]=j.useState(!1),[S,_]=j.useState(null);async function w(){d(!0),g(null);try{const{data:C,error:z}=await ce.from("precios").select("id, producto_id, precio").order("id",{ascending:!0});if(z)throw z;a(Array.isArray(C)?C:[])}catch(C){g(C?.message||String(C)),a([])}finally{d(!1)}}async function A(){try{const{data:C}=await ce.from("inventario").select("id, nombre").order("nombre",{ascending:!0});l(Array.isArray(C)?C:[])}catch{}}j.useEffect(()=>{w(),A()},[]);const R=new Set(o.map(C=>String(C.producto_id))),T=r.filter(C=>!R.has(C.id));function I(C){_(C),x(!0),g(null)}async function M(C){d(!0),g(null);try{const{error:z}=await ce.from("precios").insert(C);if(z)throw z;try{const k={producto_id:C.producto_id,precio:C.precio},{error:V}=await ce.from("precios_historico").insert(k);V&&console.warn("No se pudo insertar en precios_historico",V)}catch(k){console.warn("Error registrando precios_historico",k)}await w()}catch(z){throw g(z?.message||String(z)),z}finally{d(!1)}}async function J(C,z){d(!0),g(null);try{const{error:k}=await ce.from("precios").update(z).eq("id",C);if(k)throw k;let V=z.producto_id,le=z.precio;if(!V||le===void 0)try{const{data:he}=await ce.from("precios").select("producto_id, precio").eq("id",C).limit(1).single();he&&(V=V||he.producto_id,le=le===void 0?he.precio:le)}catch{}try{if(V&&le!==void 0){const he={producto_id:V,precio:le},{error:oe}=await ce.from("precios_historico").insert(he);oe&&console.warn("No se pudo insertar en precios_historico",oe)}}catch(he){console.warn("Error registrando precios_historico",he)}await w()}catch(k){throw g(k?.message||String(k)),k}finally{d(!1)}}return s.jsxs("div",{style:{padding:18},children:[s.jsx("h2",{style:{marginTop:0},children:"Precios de productos"}),s.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center",marginBottom:12},children:[s.jsx("button",{className:"btn-opaque",onClick:()=>{w(),A()},children:"Recargar"}),s.jsx("button",{className:"btn-primary",onClick:()=>m(!0),style:{marginLeft:6},children:"Agregar precio"}),s.jsx("div",{style:{marginLeft:"auto",color:"#64748b"},children:u?"Cargando...":`${o.length} precios`})]}),f&&s.jsx("div",{style:{color:"red",marginBottom:12},children:f}),s.jsx("div",{style:{background:"#fff",padding:12,borderRadius:8,overflowX:"auto"},children:s.jsxs("table",{className:"admin-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"ID"}),s.jsx("th",{children:"Producto"}),s.jsx("th",{children:"Precio"}),s.jsx("th",{children:"Acciones"})]})}),s.jsx("tbody",{children:o.map(C=>s.jsxs("tr",{children:[s.jsx("td",{style:{width:80},children:C.id}),s.jsx("td",{style:{minWidth:220},children:r.find(z=>z.id===C.producto_id)?.nombre||C.producto_id}),s.jsx("td",{children:C.precio}),s.jsx("td",{style:{whiteSpace:"nowrap"},children:s.jsx("button",{className:"btn-opaque",onClick:()=>I(C),children:"Editar"})})]},C.id))})]})}),s.jsx(b_,{open:p,onClose:()=>m(!1),products:T,onCreate:async C=>{await M(C),m(!1)}}),s.jsx(__,{open:b,onClose:()=>{x(!1),_(null)},row:S,products:r,availableProducts:[...r.filter(C=>!R.has(C.id)),...S?r.filter(C=>C.id===S.producto_id):[]],onSave:async(C,z)=>{await J(C,z),x(!1),_(null)}})]})}function j_(){const[o,a]=j.useState(""),[r,l]=j.useState([]),[u,d]=j.useState(null),[f,g]=j.useState([]),[p,m]=j.useState(!1),[b,x]=j.useState(null);async function S(){if(x(null),l([]),d(null),g([]),!!o){m(!0);try{const{data:w,error:A}=await ce.from("inventario").select("id, nombre, sku").ilike("sku",`%${o}%`).order("nombre",{ascending:!0});if(A)throw A;if(l(Array.isArray(w)?w:[]),Array.isArray(w)&&w.length===1){const R=w[0].id;d(R),await _(R)}}catch(w){x(w?.message||String(w))}finally{m(!1)}}}async function _(w){m(!0),x(null);try{const{data:A,error:R}=await ce.from("precios_historico").select("id, producto_id, precio, cambiado_en").eq("producto_id",w).order("cambiado_en",{ascending:!1});if(R)throw R;g(Array.isArray(A)?A:[])}catch(A){x(A?.message||String(A)),g([])}finally{m(!1)}}return j.useEffect(()=>{u&&_(u)},[u]),s.jsxs("div",{style:{padding:18},children:[s.jsx("h2",{style:{marginTop:0},children:"Histrico de precios"}),s.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center",marginBottom:12},children:[s.jsx("input",{className:"input",placeholder:"Buscar por SKU",value:o,onChange:w=>a(w.target.value)}),s.jsx("button",{className:"btn-opaque",onClick:()=>S(),children:"Buscar"}),s.jsx("button",{className:"btn-opaque",onClick:()=>{a(""),l([]),d(null),g([])},children:"Limpiar"}),s.jsx("div",{style:{marginLeft:"auto",color:"#64748b"},children:p?"Cargando...":`${f.length} registros`})]}),b&&s.jsx("div",{style:{color:"red",marginBottom:12},children:b}),r.length>0&&s.jsxs("div",{style:{marginBottom:12},children:[s.jsx("div",{style:{fontSize:13,marginBottom:6},children:"Resultados:"}),s.jsx("ul",{children:r.map(w=>s.jsxs("li",{style:{marginBottom:6},children:[s.jsx("button",{className:"btn-opaque",onClick:()=>d(w.id),style:{marginRight:8},children:w.sku}),s.jsx("strong",{children:w.nombre})," ",s.jsxs("span",{style:{color:"#6b7280"},children:["(",w.id,")"]})]},w.id))})]}),s.jsxs("div",{style:{background:"#fff",padding:12,borderRadius:8,overflowX:"auto"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s.jsx("div",{}),s.jsx("div",{children:s.jsx("button",{className:"btn-opaque",onClick:()=>{document.body.classList.add("print-table-only"),setTimeout(()=>{window.print(),document.body.classList.remove("print-table-only")},50)},children:"Imprimir tabla"})})]}),s.jsxs("table",{className:"admin-table",style:{marginTop:8},children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"ID"}),s.jsx("th",{children:"Producto"}),s.jsx("th",{children:"Precio"}),s.jsx("th",{children:"Actualizacion"})]})}),s.jsx("tbody",{children:f.map(w=>s.jsxs("tr",{children:[s.jsx("td",{style:{width:80},children:String(w.id)}),s.jsx("td",{style:{minWidth:220},children:r.find(A=>A.id===w.producto_id)?.nombre||w.producto_id}),s.jsx("td",{children:Number(w.precio).toFixed(2)}),s.jsx("td",{children:w.cambiado_en})]},String(w.id)))})]})]})]})}function S_(){const[o,a]=j.useState(""),[r,l]=j.useState(""),[u,d]=j.useState(""),[f,g]=j.useState([]),[p,m]=j.useState({}),[b,x]=j.useState({}),[S,_]=j.useState(!1),[w,A]=j.useState(null);async function R(){_(!0),A(null);try{let T=ce.from("inventario").select("id, nombre, sku, marca, modelo, descripcion, imagen");o&&(T=T.ilike("sku",`%${o}%`)),r&&(T=T.ilike("marca",`%${r}%`)),u&&(T=T.ilike("modelo",`%${u}%`));const{data:I,error:M}=await T.order("nombre",{ascending:!0});if(M)throw M;const J=Array.isArray(I)?I:[];g(J);const C=J.map(he=>he.id);if(C.length===0){m({});return}const{data:z,error:k}=await ce.from("registro_de_inventario").select("producto_id, cantidad, tipo_de_movimiento").in("producto_id",C);if(k)throw k;const V=Array.isArray(z)?z:[],le={};for(const he of J)le[String(he.id)]=0;for(const he of V){const oe=String(he.producto_id),te=Number(he.cantidad)||0,H=String(he.tipo_de_movimiento||"").toUpperCase();le.hasOwnProperty(oe)||(le[oe]=0),H==="ENTRADA"?le[oe]=(le[oe]||0)+te:H==="SALIDA"&&(le[oe]=(le[oe]||0)-te)}for(const he of Object.keys(le))le[he]=Number((le[he]||0).toFixed(2));m(le);try{const he=(await pn(async()=>{const{default:H}=await Promise.resolve().then(()=>gn);return{default:H}},void 0)).default,oe="inventario",te={};await Promise.all(J.map(async H=>{const ie=H.imagen;if(!ie){te[String(H.id)]=null;return}const pe=String(ie);if(pe.startsWith("http")){te[String(H.id)]=pe;return}let D=pe;const L=String(pe).match(/\/storage\/v1\/object\/public\/([^/]+)\/(.*)/);L&&(D=decodeURIComponent(L[2]));try{const Z=await he.storage.from(oe).getPublicUrl(D),ne=Z?.data?.publicUrl||Z?.data?.publicURL||null;if(ne){te[String(H.id)]=ne;return}}catch{}try{const ne=(await he.storage.from(oe).createSignedUrl(D,604800))?.data?.signedUrl??null;te[String(H.id)]=ne}catch{te[String(H.id)]=null}})),x(te)}catch{}}catch(T){A(T?.message||String(T)),g([]),m({})}finally{_(!1)}}return j.useEffect(()=>{R()},[]),s.jsxs("div",{style:{padding:18},children:[s.jsx("h2",{style:{marginTop:0},children:"Stock"}),s.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center",marginBottom:12},children:[s.jsx("input",{className:"input",placeholder:"Filtro SKU",value:o,onChange:T=>a(T.target.value)}),s.jsx("input",{className:"input",placeholder:"Filtro Marca",value:r,onChange:T=>l(T.target.value)}),s.jsx("input",{className:"input",placeholder:"Filtro Modelo",value:u,onChange:T=>d(T.target.value)}),s.jsx("button",{className:"btn-opaque",onClick:()=>R(),children:"Aplicar"}),s.jsx("button",{className:"btn-opaque",onClick:()=>{a(""),l(""),d(""),R()},children:"Limpiar"}),s.jsx("div",{style:{marginLeft:"auto",color:"#64748b"},children:S?"Cargando...":`${f.length} productos`})]}),w&&s.jsx("div",{style:{color:"red",marginBottom:12},children:w}),s.jsxs("div",{style:{background:"#fff",padding:12,borderRadius:8,overflowX:"auto"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s.jsx("div",{}),s.jsx("div",{children:s.jsx("button",{className:"btn-opaque",onClick:()=>{document.body.classList.add("print-table-only"),setTimeout(()=>{window.print(),document.body.classList.remove("print-table-only")},50)},children:"Imprimir tabla"})})]}),s.jsxs("table",{className:"admin-table",style:{marginTop:8},children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Imagen"}),s.jsx("th",{children:"SKU"}),s.jsx("th",{children:"Marca"}),s.jsx("th",{children:"Modelo"}),s.jsx("th",{children:"Descripcin"}),s.jsx("th",{children:"Stock"})]})}),s.jsx("tbody",{children:f.map(T=>s.jsxs("tr",{children:[s.jsx("td",{style:{width:70},children:b[String(T.id)]?s.jsx("img",{src:encodeURI(b[String(T.id)]),alt:T.nombre,style:{width:48,height:48,objectFit:"cover"},onError:I=>{I.currentTarget.src=""}}):T.imagen?s.jsx("img",{src:T.imagen,alt:T.nombre,style:{width:48,height:48,objectFit:"cover"},onError:I=>{I.currentTarget.src=""}}):""}),s.jsx("td",{children:T.sku||""}),s.jsx("td",{children:T.marca||""}),s.jsx("td",{children:T.modelo||""}),s.jsx("td",{style:{maxWidth:320},children:T.descripcion||""}),s.jsx("td",{style:{textAlign:"right"},children:p[String(T.id)]!=null?String(p[String(T.id)]):"0"})]},T.id))})]})]})]})}function w_(){const[o,a]=j.useState(""),[r,l]=j.useState(""),[u,d]=j.useState(""),[f,g]=j.useState([]),[p,m]=j.useState([]),[b,x]=j.useState(!1),[S,_]=j.useState([]),[w,A]=j.useState({}),[R,T]=j.useState(!1),[I,M]=j.useState(null);async function J(){T(!0),M(null),_([]);try{let V=null;if(o||r||u){let ie=ce.from("inventario").select("id").order("nombre",{ascending:!0});o&&(ie=ie.ilike("sku",`%${o}%`)),r&&(ie=ie.ilike("marca",`%${r}%`)),u&&(ie=ie.ilike("categoria",`%${u}%`));const{data:pe,error:D}=await ie;if(D)throw D;if(V=Array.isArray(pe)?pe.map(L=>String(L.id)):[],V.length===0){_([]),A({}),T(!1);return}}let le=ce.from("registro_de_inventario").select("id, producto_id, cantidad, tipo_de_movimiento, referencia, usuario, fecha_salida");if(V&&(le=le.in("producto_id",V)),b){const ie=new Date(Date.now()-864e5).toISOString();le=le.gte("fecha_salida",ie)}le=le.order("fecha_salida",{ascending:!1});const{data:he,error:oe}=await le;if(oe)throw oe;const te=Array.isArray(he)?he.map(ie=>({id:ie.id,producto_id:String(ie.producto_id),cantidad:Number(ie.cantidad),tipo_de_movimiento:ie.tipo_de_movimiento,referencia:ie.referencia,usuario:ie.usuario,fecha_salida:ie.fecha_salida})):[];_(te);const H=Array.from(new Set(te.map(ie=>ie.producto_id))).filter(Boolean);if(H.length>0){const{data:ie}=await ce.from("inventario").select("id, nombre, sku, marca, categoria").in("id",H),pe={};Array.isArray(ie)&&ie.forEach(D=>{pe[String(D.id)]={id:D.id,nombre:D.nombre,sku:D.sku,marca:D.marca,categoria:D.categoria}}),A(pe)}else A({})}catch(V){M(V?.message||String(V)),_([])}finally{T(!1)}}async function C(){try{const{data:V,error:le}=await ce.from("inventario").select("marca, categoria");if(le)throw le;const he=new Set,oe=new Set;Array.isArray(V)&&V.forEach(te=>{te.marca&&he.add(String(te.marca)),te.categoria&&oe.add(String(te.categoria))}),g(Array.from(he).sort()),m(Array.from(oe).sort())}catch(V){console.warn("Error loading filter options",V)}}j.useEffect(()=>{J(),C()},[]);const z=S.filter(V=>String(V.tipo_de_movimiento).toUpperCase()==="ENTRADA"),k=S.filter(V=>String(V.tipo_de_movimiento).toUpperCase()==="SALIDA");return s.jsxs("div",{style:{padding:18},children:[s.jsx("h2",{style:{marginTop:0},children:"Movimiento de Inventario"}),s.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center",marginBottom:12},children:[s.jsx("input",{className:"input",placeholder:"SKU",value:o,onChange:V=>a(V.target.value)}),s.jsxs("select",{className:"input",value:r,onChange:V=>l(V.target.value),children:[s.jsx("option",{value:"",children:"-- Marca (todas) --"}),f.map(V=>s.jsx("option",{value:V,children:V},V))]}),s.jsxs("select",{className:"input",value:u,onChange:V=>d(V.target.value),children:[s.jsx("option",{value:"",children:"-- Categora (todas) --"}),p.map(V=>s.jsx("option",{value:V,children:V},V))]}),s.jsxs("label",{style:{display:"flex",alignItems:"center",gap:6},children:[s.jsx("input",{type:"checkbox",checked:b,onChange:V=>x(V.target.checked)})," ltimas 24h"]}),s.jsx("button",{className:"btn-opaque",onClick:()=>J(),children:"Aplicar"}),s.jsx("button",{className:"btn-opaque",onClick:()=>{a(""),l(""),d(""),x(!1),J()},children:"Limpiar"}),s.jsx("div",{style:{marginLeft:"auto",color:"#64748b"},children:R?"Cargando...":`${S.length} registros`})]}),I&&s.jsx("div",{style:{color:"red",marginBottom:12},children:I}),s.jsxs("div",{style:{display:"flex",gap:12},children:[s.jsxs("div",{style:{flex:1,background:"#fff",padding:12,borderRadius:8,overflowX:"auto"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s.jsx("strong",{children:"Entradas"}),s.jsx("button",{className:"btn-opaque",onClick:()=>{document.body.classList.add("print-table-only"),setTimeout(()=>{window.print(),document.body.classList.remove("print-table-only")},50)},children:"Imprimir"})]}),s.jsxs("table",{className:"admin-table",style:{marginTop:8},children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"ID"}),s.jsx("th",{children:"SKU"}),s.jsx("th",{children:"Producto"}),s.jsx("th",{children:"Cantidad"}),s.jsx("th",{children:"Referencia"}),s.jsx("th",{children:"Usuario"}),s.jsx("th",{children:"Fecha"})]})}),s.jsx("tbody",{children:z.map(V=>s.jsxs("tr",{children:[s.jsx("td",{style:{width:70},children:String(V.id)}),s.jsx("td",{style:{minWidth:120},children:w[V.producto_id]?.sku||V.producto_id}),s.jsx("td",{children:w[V.producto_id]?.nombre||""}),s.jsx("td",{style:{textAlign:"right"},children:Number(V.cantidad).toFixed(2)}),s.jsx("td",{children:V.referencia||""}),s.jsx("td",{children:V.usuario||""}),s.jsx("td",{children:V.fecha_salida||""})]},String(V.id)))})]})]}),s.jsxs("div",{style:{flex:1,background:"#fff",padding:12,borderRadius:8,overflowX:"auto"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s.jsx("strong",{children:"Salidas"}),s.jsx("button",{className:"btn-opaque",onClick:()=>{document.body.classList.add("print-table-only"),setTimeout(()=>{window.print(),document.body.classList.remove("print-table-only")},50)},children:"Imprimir"})]}),s.jsxs("table",{className:"admin-table",style:{marginTop:8},children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"ID"}),s.jsx("th",{children:"SKU"}),s.jsx("th",{children:"Producto"}),s.jsx("th",{children:"Cantidad"}),s.jsx("th",{children:"Referencia"}),s.jsx("th",{children:"Usuario"}),s.jsx("th",{children:"Fecha"})]})}),s.jsx("tbody",{children:k.map(V=>s.jsxs("tr",{children:[s.jsx("td",{style:{width:70},children:String(V.id)}),s.jsx("td",{style:{minWidth:120},children:w[V.producto_id]?.sku||V.producto_id}),s.jsx("td",{children:w[V.producto_id]?.nombre||""}),s.jsx("td",{style:{textAlign:"right"},children:Number(V.cantidad).toFixed(2)}),s.jsx("td",{children:V.referencia||""}),s.jsx("td",{children:V.usuario||""}),s.jsx("td",{children:V.fecha_salida||""})]},String(V.id)))})]})]})]})]})}function E_(){return s.jsxs("div",{style:{padding:18},children:[s.jsx("h2",{style:{marginTop:0},children:"Categoras / Marcas (opcional)"}),s.jsx("p",{style:{color:"#475569"},children:"Gestin de categoras y marcas. (Placeholder)"})]})}function T_(){return s.jsxs("div",{style:{padding:18},children:[s.jsx("h2",{style:{marginTop:0},children:"Sesiones de caja (caja_sesiones)"}),s.jsx("p",{style:{color:"#475569"},children:"Registros de sesiones de caja. (Placeholder)"})]})}function C_(){return s.jsxs("div",{style:{padding:18},children:[s.jsx("h2",{style:{marginTop:0},children:"Movimientos de caja (caja_movimientos)"}),s.jsx("p",{style:{color:"#475569"},children:"Listado de movimientos de caja. (Placeholder)"})]})}function A_(){return s.jsxs("div",{style:{padding:18},children:[s.jsx("h2",{style:{marginTop:0},children:"Ventas (reportes)"}),s.jsx("p",{style:{color:"#475569"},children:"Reporte de ventas. (Placeholder)"})]})}function O_(){return s.jsxs("div",{style:{padding:18},children:[s.jsx("h2",{style:{marginTop:0},children:"Devoluciones (reportes)"}),s.jsx("p",{style:{color:"#475569"},children:"Reporte de devoluciones. (Placeholder)"})]})}function R_(){return s.jsxs("div",{style:{padding:18},children:[s.jsx("h2",{style:{marginTop:0},children:"Ingresos / Egresos (reportes)"}),s.jsx("p",{style:{color:"#475569"},children:"Reporte de ingresos y egresos. (Placeholder)"})]})}function N_(){return s.jsxs("div",{style:{padding:18},children:[s.jsx("h2",{style:{marginTop:0},children:"Compras (reportes)"}),s.jsx("p",{style:{color:"#475569"},children:"Reporte de compras. (Placeholder)"})]})}function U_(){return s.jsxs("div",{style:{padding:18},children:[s.jsx("h2",{style:{marginTop:0},children:"Exportar reportes generales (PDF / Excel)"}),s.jsx("p",{style:{color:"#475569"},children:"Exportar reportes a PDF/Excel. (Placeholder)"})]})}function k_(){return s.jsxs("div",{style:{padding:18},children:[s.jsx("h2",{style:{marginTop:0},children:"Cuentas contables (cuentas_contables)"}),s.jsx("p",{style:{color:"#475569"},children:"Plan de cuentas y gestin contable. (Placeholder)"})]})}function D_(){return s.jsxs("div",{style:{padding:18},children:[s.jsx("h2",{style:{marginTop:0},children:"Libro diario (libro_diario)"}),s.jsx("p",{style:{color:"#475569"},children:"Libro diario contable. (Placeholder)"})]})}function z_(){return s.jsxs("div",{style:{padding:18},children:[s.jsx("h2",{style:{marginTop:0},children:"Auditora (auditoria)"}),s.jsx("p",{style:{color:"#475569"},children:"Registro de auditoras y trazabilidad. (Placeholder)"})]})}function B_({open:o,onClose:a,onCreate:r}){const[l,u]=j.useState(""),[d,f]=j.useState(""),[g,p]=j.useState(""),[m,b]=j.useState(""),[x,S]=j.useState(""),[_,w]=j.useState(""),[A,R]=j.useState(!0),[T,I]=j.useState(!1),[M,J]=j.useState(null);if(!o)return null;async function C(){const z=[];if(l.trim()||z.push("Nombre"),z.length){J(`Faltan campos: ${z.join(", ")}`);return}I(!0),J(null);try{await r({nombre:l.trim(),rtn:d.trim()||void 0,telefono:g.trim()||void 0,correo:m.trim()||void 0,direccion:x.trim()||void 0,tipo_proveedor:_||void 0,activo:A}),u(""),f(""),p(""),b(""),S(""),w(""),R(!0),a()}catch(k){J(k?.message||String(k))}finally{I(!1)}}return s.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.4)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3},children:s.jsxs("div",{style:{width:680,maxWidth:"95%",background:"#fff",borderRadius:8,padding:16},children:[s.jsx("h3",{style:{marginTop:0},children:"Agregar proveedor"}),s.jsxs("div",{style:{display:"grid",gap:8},children:[s.jsx("label",{style:{fontSize:13},children:"Nombre"}),s.jsx("input",{className:"input",value:l,onChange:z=>u(z.target.value)}),s.jsx("label",{style:{fontSize:13},children:"RTN"}),s.jsx("input",{className:"input",value:d,onChange:z=>f(z.target.value)}),s.jsx("label",{style:{fontSize:13},children:"Telfono"}),s.jsx("input",{className:"input",value:g,onChange:z=>p(z.target.value)}),s.jsx("label",{style:{fontSize:13},children:"Correo"}),s.jsx("input",{className:"input",value:m,onChange:z=>b(z.target.value)}),s.jsx("label",{style:{fontSize:13},children:"Direccin"}),s.jsx("input",{className:"input",value:x,onChange:z=>S(z.target.value)}),s.jsx("label",{style:{fontSize:13},children:"Tipo"}),s.jsx("input",{className:"input",value:_,onChange:z=>w(z.target.value),placeholder:"local / internacional"}),s.jsxs("label",{style:{fontSize:13},children:[s.jsx("input",{type:"checkbox",checked:A,onChange:z=>R(z.target.checked)})," ","Activo"]})]}),M&&s.jsx("div",{style:{color:"red",marginTop:12},children:M}),s.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:8,marginTop:16},children:[s.jsx("button",{className:"btn-opaque",onClick:a,disabled:T,style:{width:"auto"},children:"Cancelar"}),s.jsx("button",{className:"btn-primary",onClick:C,disabled:T,style:{width:"auto",padding:"8px 14px"},children:T?"Creando...":"Crear"})]})]})})}function M_({open:o,onClose:a,row:r,onSave:l}){const[u,d]=j.useState(""),[f,g]=j.useState(""),[p,m]=j.useState(""),[b,x]=j.useState(""),[S,_]=j.useState(""),[w,A]=j.useState(""),[R,T]=j.useState(!0),[I,M]=j.useState(!1),[J,C]=j.useState(null);if(j.useEffect(()=>{!o||!r||(d(r.nombre||""),g(r.rtn||""),m(r.telefono||""),x(r.correo||""),_(r.direccion||""),A(r.tipo_proveedor||""),T(r.activo??!0),C(null))},[o,r]),!o||!r)return null;async function z(){if(!r){C("No hay fila seleccionada");return}const k=[];if(u.trim()||k.push("Nombre"),k.length){C(`Faltan campos: ${k.join(", ")}`);return}M(!0),C(null);try{await l(r.id,{nombre:u.trim(),rtn:f.trim()||void 0,telefono:p.trim()||void 0,correo:b.trim()||void 0,direccion:S.trim()||void 0,tipo_proveedor:w||void 0,activo:R}),a()}catch(V){C(V?.message||String(V))}finally{M(!1)}}return s.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.4)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3},children:s.jsxs("div",{style:{width:680,maxWidth:"95%",background:"#fff",borderRadius:8,padding:16},children:[s.jsxs("h3",{style:{marginTop:0},children:["Editar proveedor  ID ",String(r.id)]}),s.jsxs("div",{style:{display:"grid",gap:8},children:[s.jsx("label",{style:{fontSize:13},children:"Nombre"}),s.jsx("input",{className:"input",value:u,onChange:k=>d(k.target.value)}),s.jsx("label",{style:{fontSize:13},children:"RTN"}),s.jsx("input",{className:"input",value:f,onChange:k=>g(k.target.value)}),s.jsx("label",{style:{fontSize:13},children:"Telfono"}),s.jsx("input",{className:"input",value:p,onChange:k=>m(k.target.value)}),s.jsx("label",{style:{fontSize:13},children:"Correo"}),s.jsx("input",{className:"input",value:b,onChange:k=>x(k.target.value)}),s.jsx("label",{style:{fontSize:13},children:"Direccin"}),s.jsx("input",{className:"input",value:S,onChange:k=>_(k.target.value)}),s.jsx("label",{style:{fontSize:13},children:"Tipo"}),s.jsx("input",{className:"input",value:w,onChange:k=>A(k.target.value),placeholder:"local / internacional"}),s.jsxs("label",{style:{fontSize:13},children:[s.jsx("input",{type:"checkbox",checked:R,onChange:k=>T(k.target.checked)})," ","Activo"]})]}),J&&s.jsx("div",{style:{color:"red",marginTop:12},children:J}),s.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:8,marginTop:16},children:[s.jsx("button",{className:"btn-opaque",onClick:a,disabled:I,style:{width:"auto"},children:"Cancelar"}),s.jsx("button",{className:"btn-primary",onClick:z,disabled:I,style:{width:"auto",padding:"8px 14px"},children:I?"Guardando...":"Guardar"})]})]})})}function L_(){const[o,a]=j.useState([]),[r,l]=j.useState(!1),[u,d]=j.useState(null),[f,g]=j.useState(""),[p,m]=j.useState(!1),[b,x]=j.useState(!1),[S,_]=j.useState(null),[w,A]=j.useState(!1),[R,T]=j.useState(null);async function I(z){l(!0),d(null);try{let k=null,V=null;if(z&&z.trim()){const he=`%${z.trim()}%`,oe=await ce.from("proveedores").select("id, nombre, rtn, telefono, correo, direccion, tipo_proveedor, activo").or(`nombre.ilike.${he},rtn.ilike.${he}`).order("id",{ascending:!0});k=oe.data,V=oe.error}else{const le=await ce.from("proveedores").select("id, nombre, rtn, telefono, correo, direccion, tipo_proveedor, activo").order("id",{ascending:!0});k=le.data,V=le.error}if(V)throw V;a(Array.isArray(k)?k:[])}catch(k){d(k?.message||String(k)),a([])}finally{l(!1)}}j.useEffect(()=>{I()},[]),j.useEffect(()=>{const z=setTimeout(()=>{I(f)},350);return()=>clearTimeout(z)},[f]);async function M(z){l(!0),d(null);try{const k={...z};if(delete k.id,k.rtn){const{data:le,error:he}=await ce.from("proveedores").select("id, nombre").eq("rtn",k.rtn).limit(1);if(he)throw he;if(Array.isArray(le)&&le.length>0)throw new Error(`Ya existe un proveedor con RTN ${k.rtn}`)}const{error:V}=await ce.from("proveedores").insert(k);if(V)throw V;await I()}catch(k){throw String(k).includes("Ya existe un proveedor")?d(String(k)):k?.code==="23505"||String(k).includes("duplicate key value")?d("Clave duplicada: el id ya existe. Ejecuta la reparacin de la sequence en la BD (setval) o contacta al administrador."):d(k?.message||String(k)),k}finally{l(!1)}}async function J(z,k){l(!0),d(null);try{const{error:V}=await ce.from("proveedores").update(k).eq("id",z);if(V)throw V;await I()}catch(V){throw d(V?.message||String(V)),V}finally{l(!1)}}async function C(){if(R){l(!0),d(null);try{const{error:z}=await ce.from("proveedores").delete().eq("id",R.id);if(z)throw z;A(!1),T(null),await I()}catch(z){d(z?.message||String(z))}finally{l(!1)}}}return s.jsxs("div",{style:{padding:18},children:[s.jsx("h2",{style:{marginTop:0},children:"Proveedores (proveedores)"}),s.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center",marginBottom:12},children:[s.jsx("button",{className:"btn-opaque",onClick:()=>I(),children:"Recargar"}),s.jsx("button",{className:"btn-primary",onClick:()=>m(!0),children:"Agregar proveedor"}),s.jsxs("div",{style:{marginLeft:12,display:"flex",gap:8,alignItems:"center"},children:[s.jsx("input",{className:"input",placeholder:"Buscar por nombre o RTN...",value:f,onChange:z=>g(z.target.value),style:{width:260}}),s.jsx("button",{className:"btn-opaque",onClick:()=>{g(""),I()},children:"Limpiar"})]}),s.jsx("div",{style:{marginLeft:"auto",color:"#64748b"},children:r?"Cargando...":`${o.length} proveedores`})]}),u&&s.jsx("div",{style:{color:"red",marginBottom:12},children:u}),s.jsx("div",{style:{background:"#fff",padding:12,borderRadius:8,overflowX:"auto"},children:s.jsxs("table",{className:"admin-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"RTN"}),s.jsx("th",{children:"Nombre"}),s.jsx("th",{children:"Telfono"}),s.jsx("th",{children:"Correo"}),s.jsx("th",{children:"Direccin"}),s.jsx("th",{children:"Tipo"}),s.jsx("th",{children:"Activo"}),s.jsx("th",{children:"Acciones"})]})}),s.jsx("tbody",{children:o.map(z=>s.jsxs("tr",{children:[s.jsx("td",{children:z.rtn||""}),s.jsx("td",{style:{minWidth:180},children:z.nombre}),s.jsx("td",{children:z.telefono||""}),s.jsx("td",{children:z.correo||""}),s.jsx("td",{children:z.direccion||""}),s.jsx("td",{children:z.tipo_proveedor||""}),s.jsx("td",{children:z.activo?"S":"No"}),s.jsxs("td",{style:{whiteSpace:"nowrap"},children:[s.jsx("button",{className:"btn-opaque",onClick:()=>{_(z),x(!0)},children:"Editar"}),s.jsx("button",{className:"btn-danger",onClick:()=>{T(z),A(!0)},style:{marginLeft:8},children:"Eliminar"})]})]},z.id))})]})}),s.jsx(B_,{open:p,onClose:()=>m(!1),onCreate:async z=>{await M(z),m(!1)}}),s.jsx(M_,{open:b,onClose:()=>{x(!1),_(null)},row:S,onSave:async(z,k)=>{await J(z,k),x(!1),_(null)}}),s.jsx(Wp,{open:w,title:R?`Eliminar proveedor ${R.nombre}`:"Eliminar proveedor",message:R?`Confirma eliminar al proveedor ${R.nombre}? Esta accin es irreversible.`:"Confirma eliminar el proveedor?",onClose:async()=>{await C()},onCancel:()=>{A(!1),T(null)},confirmLabel:"Eliminar",cancelLabel:"Cerrar"})]})}function q_({open:o,onClose:a,onCreated:r}){const[l,u]=j.useState([]),[d,f]=j.useState([]),[g,p]=j.useState(0),[m,b]=j.useState(null),[x,S]=j.useState(""),[_,w]=j.useState("factura"),[A,R]=j.useState([]),[T,I]=j.useState(null),[M,J]=j.useState(1),[C,z]=j.useState(null),[k,V]=j.useState(!1),[le,he]=j.useState(null);if(j.useEffect(()=>{o&&(async()=>{try{const L=await ce.from("inventario").select("id, nombre, exento").order("nombre",{ascending:!0});u(Array.isArray(L.data)?L.data:[])}catch{}try{const L=await ce.from("proveedores").select("id, nombre").order("nombre",{ascending:!0});f(Array.isArray(L.data)?L.data:[])}catch{}try{const L=await ce.from("impuesto").select("impuesto_venta").limit(1).order("id",{ascending:!0}),Z=Array.isArray(L.data)&&L.data.length>0?L.data[0]:null,ne=Z?Number(Z.impuesto_venta):0;p(ne)}catch{}})()},[o]),!o)return null;function oe(){b(null),S(""),w("factura"),R([]),I(null),J(1),z(null),he(null)}function te(){if(!T){he("Selecciona un producto");return}if(!C||C<=0){he("Costo unitario invlido");return}if(!M||M<=0){he("Cantidad invlida");return}const L=l.find(ne=>ne.id===T),Z=ne=>{if(ne==null)return!1;if(typeof ne=="boolean")return ne===!0;if(typeof ne=="number")return ne===1;const ue=String(ne).toLowerCase().trim();return ue==="1"||ue==="true"||ue==="t"||ue==="si"||ue==="s"||ue==="yes"};R(ne=>[...ne,{producto_id:T,nombre:L?.nombre||"",cantidad:M,costo_unitario:C,exento:Z(L?.exento)}]),I(null),J(1),z(null),he(null)}function H(L){R(Z=>Z.filter((ne,ue)=>ue!==L))}function ie(){const L=g,Z=L>1?L/100:L;let ne=0,ue=0,E=0;for(const U of A){const G=U.cantidad*U.costo_unitario;let Y=0,ae=G;U.exento||(Y=G*Z,ae=G-Y),ne+=ae,ue+=Y,E+=G}return{subtotal:ne,impuesto:ue,total:E}}async function pe(){if(he(null),!m){he("Selecciona un proveedor");return}if(A.length===0){he("Agrega al menos un producto");return}V(!0);try{const{subtotal:L,impuesto:Z,total:ne}=ie(),ue={proveedor_id:m,numero_documento:x||null,tipo_documento:_||null,subtotal:L,impuesto:Z,total:ne,usuario:null},E=await ce.from("compras").insert(ue).select("id").single();if(E.error)throw E.error;const U=E.data.id,G=A.map(ae=>({compra_id:U,producto_id:ae.producto_id,cantidad:ae.cantidad,costo_unitario:ae.costo_unitario})),Y=await ce.from("compras_detalle").insert(G);if(Y.error)throw await ce.from("compras").delete().eq("id",U),Y.error;try{const ae=x?`Compra - ${x}`:`Compra ${U}`;let ee="sistema";try{const Ee=localStorage.getItem("user");if(Ee){const Ne=JSON.parse(Ee);ee=Ne.username?`${Ne.username}${Ne.role?` (${Ne.role})`:""}`:String(Ne)}}catch{}const de=new Date().toISOString(),se=A.map(Ee=>({producto_id:Ee.producto_id,cantidad:Ee.cantidad,tipo_de_movimiento:"ENTRADA",referencia:ae,usuario:ee,fecha_salida:de})),fe=await ce.from("registro_de_inventario").insert(se);fe.error&&(console.warn("Error registrando en registro_de_inventario",fe.error),he("Compra guardada, pero fall el registro en inventario: "+fe.error.message))}catch(ae){console.warn("Registro inventario fallo",ae)}oe(),a(),r&&r()}catch(L){he(L?.message||String(L))}finally{V(!1)}}const D=ie();return s.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.4)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3},children:s.jsxs("div",{style:{width:900,maxWidth:"98%",background:"#fff",borderRadius:8,padding:16,maxHeight:"90vh",overflow:"auto"},children:[s.jsx("h3",{style:{marginTop:0},children:"Nueva compra"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12},children:[s.jsxs("div",{children:[s.jsx("label",{style:{fontSize:13},children:"Proveedor"}),s.jsxs("select",{className:"input",value:m??"",onChange:L=>b(L.target.value||null),children:[s.jsx("option",{value:"",children:"-- seleccionar proveedor --"}),d.map(L=>s.jsx("option",{value:L.id,children:L.nombre},String(L.id)))]}),s.jsx("label",{style:{fontSize:13,marginTop:8},children:"Nmero documento"}),s.jsx("input",{className:"input",value:x,onChange:L=>S(L.target.value)}),s.jsx("label",{style:{fontSize:13,marginTop:8},children:"Tipo documento"}),s.jsx("input",{className:"input",value:_,onChange:L=>w(L.target.value)})]}),s.jsxs("div",{children:[s.jsx("label",{style:{fontSize:13},children:"Agregar producto"}),s.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[s.jsxs("select",{className:"input",value:T??"",onChange:L=>I(L.target.value||null),children:[s.jsx("option",{value:"",children:"-- seleccionar producto --"}),l.map(L=>s.jsx("option",{value:L.id,children:L.nombre},L.id))]}),s.jsx("input",{className:"input",type:"number",style:{width:90},value:M,onChange:L=>J(Number(L.target.value))}),s.jsx("input",{className:"input",type:"number",style:{width:120},value:C??"",onChange:L=>z(Number(L.target.value)),placeholder:"Costo unitario"}),s.jsx("button",{className:"btn-primary",onClick:te,children:"Agregar"})]}),s.jsx("div",{style:{marginTop:12},children:s.jsxs("table",{className:"admin-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Producto"}),s.jsx("th",{children:"Cantidad"}),s.jsx("th",{children:"Costo unit."}),s.jsx("th",{children:"Impuesto"}),s.jsx("th",{children:"Subtotal"}),s.jsx("th",{children:"Acciones"})]})}),s.jsx("tbody",{children:A.map((L,Z)=>{const ne=L.cantidad*L.costo_unitario,ue=g>1?g/100:g,E=L.exento?0:ne*ue,U=L.exento?ne:ne-E;return s.jsxs("tr",{children:[s.jsx("td",{children:L.nombre}),s.jsx("td",{children:L.cantidad}),s.jsx("td",{children:L.costo_unitario.toFixed(2)}),s.jsx("td",{children:E.toFixed(2)}),s.jsx("td",{children:U.toFixed(2)}),s.jsx("td",{children:s.jsx("button",{className:"btn-opaque",onClick:()=>H(Z),children:"Quitar"})})]},`${L.producto_id}-${Z}`)})})]})})]})]}),s.jsx("div",{style:{marginTop:12,display:"flex",justifyContent:"flex-end",gap:12},children:s.jsxs("div",{style:{textAlign:"right"},children:[s.jsxs("div",{children:["Subtotal: ",s.jsx("strong",{children:D.subtotal.toFixed(2)})]}),s.jsxs("div",{children:["Impuesto: ",s.jsx("strong",{children:D.impuesto.toFixed(2)})]}),s.jsxs("div",{children:["Total: ",s.jsx("strong",{children:D.total.toFixed(2)})]})]})}),le&&s.jsx("div",{style:{color:"red",marginTop:12},children:le}),s.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:8,marginTop:16},children:[s.jsx("button",{className:"btn-opaque",onClick:()=>{oe(),a()},disabled:k,children:"Cancelar"}),s.jsx("button",{className:"btn-primary",onClick:pe,disabled:k,children:k?"Guardando...":"Confirmar compra"})]})]})})}function H_({open:o,compraId:a,onClose:r}){const[l,u]=j.useState([]),[d,f]=j.useState({}),[g,p]=j.useState({}),[m,b]=j.useState(0),[x,S]=j.useState(!1);return j.useEffect(()=>{if(!o||a==null)return;let _=!0;return(async()=>{S(!0);try{const{data:w,error:A}=await ce.from("compras_detalle").select("id, compra_id, producto_id, cantidad, costo_unitario, subtotal").eq("compra_id",a);if(A)throw A;const R=Array.isArray(w)?w:[];if(!_)return;u(R);const T=Array.from(new Set(R.map(I=>I.producto_id))).filter(Boolean);if(T.length>0){const{data:I}=await ce.from("inventario").select("id, nombre, exento").in("id",T),M={},J={};Array.isArray(I)&&I.forEach(C=>{M[String(C.id)]={id:C.id,nombre:C.nombre},J[String(C.id)]=C.exento===!0||C.exento===1||String(C.exento).toLowerCase()==="true"}),_&&(f(M),p(J))}else f({});try{const{data:I}=await ce.from("impuesto").select("impuesto_venta").limit(1).order("id",{ascending:!0}),M=Array.isArray(I)&&I.length>0?I[0]:null,J=M?Number(M.impuesto_venta):0;_&&b(J)}catch{}}catch(w){console.error("Error cargando detalle de compra",w)}finally{_&&S(!1)}})(),()=>{_=!1}},[o,a]),o?s.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.4)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3},children:s.jsxs("div",{style:{width:760,maxWidth:"98%",background:"#fff",borderRadius:8,padding:16,maxHeight:"90vh",overflow:"auto"},children:[s.jsxs("h3",{style:{marginTop:0},children:["Detalle de compra ",a]}),s.jsx("div",{style:{marginTop:8},children:x?s.jsx("div",{children:"Cargando..."}):s.jsxs("table",{className:"admin-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Producto"}),s.jsx("th",{children:"Cantidad"}),s.jsx("th",{children:"Costo unit."}),s.jsx("th",{children:"Impuesto"}),s.jsx("th",{children:"Subtotal"}),s.jsx("th",{children:"Total"})]})}),s.jsx("tbody",{children:l.map(_=>{const w=Number(_.cantidad),A=Number(_.costo_unitario),R=w*A,T=m>1?m/100:m,I=g[String(_.producto_id)]===!0,M=I?0:R*T,J=I?R:R-M;return s.jsxs("tr",{children:[s.jsx("td",{children:d[String(_.producto_id)]?d[String(_.producto_id)].nombre:String(_.producto_id)}),s.jsx("td",{children:w.toFixed(2)}),s.jsx("td",{children:A.toFixed(2)}),s.jsx("td",{children:M.toFixed(2)}),s.jsx("td",{children:J.toFixed(2)}),s.jsx("td",{children:R.toFixed(2)})]},String(_.id))})}),s.jsx("tfoot",{children:l.length>0&&(()=>{const _=l.reduce((w,A)=>{const R=Number(A.cantidad),T=Number(A.costo_unitario),I=R*T,M=m>1?m/100:m,J=g[String(A.producto_id)]===!0,C=J?0:I*M,z=J?I:I-C;return w.subtotal+=z,w.impuesto+=C,w.total+=I,w},{subtotal:0,impuesto:0,total:0});return s.jsxs("tr",{children:[s.jsx("td",{colSpan:3,style:{textAlign:"right"},children:"Totales:"}),s.jsx("td",{children:_.impuesto.toFixed(2)}),s.jsx("td",{children:_.subtotal.toFixed(2)}),s.jsx("td",{children:_.total.toFixed(2)})]})})()})]})}),s.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:12},children:s.jsx("button",{className:"btn-opaque",onClick:r,children:"Cerrar"})})]})}):null}function I_(){const[o,a]=j.useState([]),[r,l]=j.useState(!1),[u,d]=j.useState(null),[f,g]=j.useState(!1),[p,m]=j.useState(!1),[b,x]=j.useState(null),[S,_]=j.useState([]),[w,A]=j.useState(""),[R,T]=j.useState(""),[I,M]=j.useState(!1);async function J(){l(!0),d(null);try{let C=ce.from("compras").select("id, proveedor_id, numero_documento, fecha_compra, subtotal, impuesto, total");if(w){const V=Number(w);isNaN(V)?C=C.eq("proveedor_id",w):C=C.eq("proveedor_id",V)}if(R&&(C=C.ilike("numero_documento",`%${R}%`)),I){const V=new Date(Date.now()-864e5).toISOString();C=C.gte("fecha_compra",V)}const{data:z,error:k}=await C.order("id",{ascending:!1});if(k)throw k;a(Array.isArray(z)?z:[])}catch(C){d(C?.message||String(C)),a([])}finally{l(!1)}}return j.useEffect(()=>{J()},[]),j.useEffect(()=>{let C=!0;return(async()=>{try{const{data:z}=await ce.from("proveedores").select("id, nombre").order("nombre",{ascending:!0});if(!C)return;_(Array.isArray(z)?z:[])}catch{}})(),()=>{C=!1}},[]),s.jsxs("div",{style:{padding:18},children:[s.jsx("h2",{style:{marginTop:0},children:"Compras (compras)"}),s.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center",marginBottom:12},children:[s.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[s.jsxs("select",{className:"input",value:w,onChange:C=>A(C.target.value),children:[s.jsx("option",{value:"",children:"-- proveedor (todos) --"}),S.map(C=>s.jsx("option",{value:String(C.id),children:C.nombre},String(C.id)))]}),s.jsx("input",{className:"input",placeholder:"Nmero documento",value:R,onChange:C=>T(C.target.value)}),s.jsxs("label",{style:{display:"flex",alignItems:"center",gap:6},children:[s.jsx("input",{type:"checkbox",checked:I,onChange:C=>M(C.target.checked)})," ltimas 24h"]}),s.jsx("button",{className:"btn-opaque",onClick:()=>J(),children:"Aplicar"}),s.jsx("button",{className:"btn-opaque",onClick:()=>{A(""),T(""),M(!1),J()},children:"Limpiar"})]}),s.jsxs("div",{style:{marginLeft:"auto",display:"flex",gap:8,alignItems:"center"},children:[s.jsx("button",{className:"btn-opaque",onClick:()=>J(),children:"Recargar"}),s.jsx("button",{className:"btn-primary",onClick:()=>g(!0),children:"Nueva compra"}),s.jsx("div",{style:{marginLeft:12,color:"#64748b"},children:r?"Cargando...":`${o.length} compras`})]})]}),u&&s.jsx("div",{style:{color:"red",marginBottom:12},children:u}),s.jsx("div",{style:{background:"#fff",padding:12,borderRadius:8,overflowX:"auto"},children:s.jsxs("table",{className:"admin-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"ID"}),s.jsx("th",{children:"Proveedor"}),s.jsx("th",{children:"Documento"}),s.jsx("th",{children:"Fecha"}),s.jsx("th",{children:"Subtotal"}),s.jsx("th",{children:"Impuesto"}),s.jsx("th",{children:"Total"})]})}),s.jsx("tbody",{children:o.map(C=>s.jsxs("tr",{children:[s.jsx("td",{style:{width:80},children:String(C.id)}),s.jsx("td",{children:String(C.proveedor_id)}),s.jsx("td",{children:C.numero_documento||""}),s.jsx("td",{children:C.fecha_compra||""}),s.jsx("td",{children:C.subtotal||""}),s.jsx("td",{children:C.impuesto||""}),s.jsx("td",{children:C.total||""}),s.jsx("td",{children:s.jsx("button",{className:"btn-opaque",onClick:()=>{x(C.id),m(!0)},children:"Detalle"})})]},String(C.id)))})]})}),s.jsx(q_,{open:f,onClose:()=>g(!1),onCreated:()=>{g(!1),J()}}),s.jsx(H_,{open:p,compraId:b,onClose:()=>{m(!1),x(null)}})]})}function V_(){const[o,a]=j.useState([]),[r,l]=j.useState(!1),[u,d]=j.useState(null),[f,g]=j.useState(!1),[p,m]=j.useState(null);async function b(){l(!0),d(null);try{const{data:x,error:S}=await ce.from("devoluciones_proveedores").select("id, proveedor_id, numero_documento, usuario, created_at").order("created_at",{ascending:!1});if(S)throw S;a(Array.isArray(x)?x.map(_=>({id:_.id,proveedor_id:_.proveedor_id,numero_documento:_.numero_documento,usuario:_.usuario,fecha:_.created_at})):[])}catch(x){d(x?.message||String(x)),a([])}finally{l(!1)}}return j.useEffect(()=>{b()},[]),s.jsxs("div",{style:{padding:18},children:[s.jsx("h2",{style:{marginTop:0},children:"Devolucin a Proveedores"}),s.jsx("p",{style:{color:"#475569"},children:"Registra devoluciones de productos hacia proveedores. Este proceso crear un registro de devolucin y registrar la salida en `registro_de_inventario`."}),s.jsxs("div",{style:{display:"flex",gap:8,marginBottom:12},children:[s.jsx("button",{className:"btn-primary",onClick:()=>g(!0),children:"Nueva devolucin"}),s.jsx("div",{style:{marginLeft:"auto",color:"#64748b"},children:r?"Cargando...":`${o.length} devoluciones`})]}),u&&s.jsx("div",{style:{color:"red",marginBottom:12},children:u}),s.jsx("div",{style:{background:"#fff",padding:12,borderRadius:8,overflowX:"auto"},children:s.jsxs("table",{className:"admin-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"ID"}),s.jsx("th",{children:"Proveedor"}),s.jsx("th",{children:"Documento"}),s.jsx("th",{children:"Usuario"}),s.jsx("th",{children:"Fecha"}),s.jsx("th",{children:"Acciones"})]})}),s.jsx("tbody",{children:o.map(x=>s.jsxs("tr",{children:[s.jsx("td",{style:{width:80},children:String(x.id)}),s.jsx("td",{children:String(x.proveedor_id||"")}),s.jsx("td",{children:x.numero_documento||""}),s.jsx("td",{children:x.usuario||""}),s.jsx("td",{children:x.fecha||""}),s.jsx("td",{children:s.jsx("button",{className:"btn-opaque",onClick:()=>m(x.id),children:"Detalle"})})]},String(x.id)))})]})}),f&&s.jsx($_,{onClose:()=>{g(!1),b()}}),p&&s.jsx(G_,{id:p,onClose:()=>{m(null),b()}})]})}function $_({onClose:o}){const[a,r]=j.useState([]),[l,u]=j.useState([]),[d,f]=j.useState(null),[g,p]=j.useState([]),[m,b]=j.useState(null),[x,S]=j.useState(null),[_,w]=j.useState(""),[A,R]=j.useState([]),[T,I]=j.useState(null),[M,J]=j.useState(1),[C,z]=j.useState(!1),[k,V]=j.useState(null);j.useEffect(()=>{(async()=>{try{const H=await ce.from("proveedores").select("id, nombre").order("nombre",{ascending:!0});r(Array.isArray(H.data)?H.data:[])}catch{}try{const H=await ce.from("inventario").select("id, nombre, sku").order("nombre",{ascending:!0});u(Array.isArray(H.data)?H.data:[])}catch{}})()},[]);async function le(){if(_){V(null);try{const{data:H,error:ie}=await ce.from("compras").select("id, proveedor_id, numero_documento").eq("numero_documento",_).limit(1).single();if(ie)throw ie;if(!H){V("No se encontr compra con ese nmero de documento");return}f(H.id),b(H.proveedor_id);try{const{data:Y}=await ce.from("proveedores").select("id, nombre").eq("id",H.proveedor_id).limit(1).single();Y&&Y.nombre&&S(Y.nombre)}catch{}const{data:pe}=await ce.from("compras_detalle").select("producto_id, cantidad, costo_unitario").eq("compra_id",H.id),D=Array.isArray(pe)?pe:[],{data:L}=await ce.from("devoluciones_proveedores").select("id").eq("numero_documento",_),Z=Array.isArray(L)?L.map(Y=>Y.id):[];let ne={};if(Z.length>0){const{data:Y}=await ce.from("devoluciones_proveedores_detalle").select("producto_id, cantidad").in("devolucion_id",Z);Array.isArray(Y)&&Y.forEach(ae=>{const ee=String(ae.producto_id);ne[ee]=(ne[ee]||0)+Number(ae.cantidad)})}const ue=D.map(Y=>Y.producto_id),{data:E}=await ce.from("inventario").select("id, nombre, sku").in("id",ue),U={};Array.isArray(E)&&E.forEach(Y=>{U[String(Y.id)]=Y});const G=D.map(Y=>{const ae=String(Y.producto_id),ee=Number(Y.cantidad),de=ne[ae]||0,se=Math.max(0,ee-de);return{producto_id:ae,nombre:U[ae]?.nombre||ae,sku:U[ae]?.sku,purchased:ee,returned:de,available:se,costo_unitario:Number(Y.costo_unitario||0)}});p(G),u(G.map(Y=>({id:Y.producto_id,nombre:Y.nombre,sku:Y.sku})))}catch(H){V(H?.message||String(H))}}}function he(){if(!T){V("Selecciona un producto");return}if(!M||M<=0){V("Cantidad invlida");return}const H=l.find(pe=>pe.id===T),ie=g.find(pe=>pe.producto_id===T);if(ie&&M>ie.available){V(`Cantidad excede disponible para devolucin (${ie.available})`);return}R(pe=>[...pe,{producto_id:T,nombre:H?.nombre,cantidad:M}]),I(null),J(1),V(null),ie&&(p(pe=>pe.map(D=>D.producto_id===ie.producto_id?{...D,available:Math.max(0,D.available-M)}:D)),u(pe=>pe.map(D=>(D.id===ie.producto_id,D))))}function oe(H){R(ie=>ie.filter((pe,D)=>D!==H))}async function te(){if(V(null),!m){V("Selecciona un proveedor");return}if(A.length===0){V("Agrega al menos un producto");return}z(!0);try{const H={proveedor_id:m,numero_documento:_||null,usuario:null},ie=await ce.from("devoluciones_proveedores").insert(H).select("id").single();if(ie.error)throw ie.error;const pe=ie.data.id;try{const D=A.map(Z=>({devolucion_id:pe,producto_id:Z.producto_id,cantidad:Z.cantidad})),L=await ce.from("devoluciones_proveedores_detalle").insert(D);L.error&&console.warn("No se pudo insertar detalles de devolucin",L.error)}catch(D){console.warn("Detalles tabla puede no existir",D)}try{const D=_?`Devolucin - ${_}`:`Devolucin ${pe}`;let L="sistema";try{const E=localStorage.getItem("user");if(E){const U=JSON.parse(E);L=U.username?`${U.username}${U.role?` (${U.role})`:""}`:String(U)}}catch{}const Z=new Date().toISOString(),ne=A.map(E=>({producto_id:E.producto_id,cantidad:E.cantidad,tipo_de_movimiento:"SALIDA",referencia:D,usuario:L,fecha_salida:Z})),ue=await ce.from("registro_de_inventario").insert(ne);ue.error&&(console.warn("Error registrando en registro_de_inventario",ue.error),V("Devolucin guardada, pero fall el registro en inventario: "+ue.error.message))}catch(D){console.warn("Registro inventario fallo",D)}o()}catch(H){V(H?.message||String(H))}finally{z(!1)}}return s.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.4)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3},children:s.jsxs("div",{style:{width:900,maxWidth:"98%",background:"#fff",borderRadius:8,padding:16,maxHeight:"90vh",overflow:"auto"},children:[s.jsx("h3",{style:{marginTop:0},children:"Nueva devolucin a proveedor"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12},children:[s.jsxs("div",{children:[s.jsx("label",{style:{fontSize:13},children:"Proveedor"}),d?s.jsx("div",{style:{padding:8,background:"#f1f5f9",borderRadius:6},children:x||String(m||"")}):s.jsxs("select",{className:"input",value:m??"",onChange:H=>b(H.target.value||null),children:[s.jsx("option",{value:"",children:"-- seleccionar proveedor --"}),a.map(H=>s.jsx("option",{value:H.id,children:H.nombre},String(H.id)))]}),s.jsx("label",{style:{fontSize:13,marginTop:8},children:"Nmero documento / referencia"}),s.jsxs("div",{style:{display:"flex",gap:8},children:[s.jsx("input",{className:"input",value:_,onChange:H=>w(H.target.value)}),s.jsx("button",{className:"btn-opaque",onClick:()=>le(),children:"Buscar compra"})]}),d&&s.jsxs("div",{style:{marginTop:8,color:"#374151"},children:["Compra encontrada: #",d,"  proveedor seleccionado automticamente."]}),g&&g.length>0&&s.jsxs("div",{style:{marginTop:8,background:"#f8fafc",padding:8,borderRadius:6},children:[s.jsxs("div",{style:{fontSize:13,marginBottom:6},children:[s.jsx("strong",{children:"Productos en la compra"})," (disponible para devolucin)"]}),s.jsxs("table",{className:"admin-table",style:{width:"100%"},children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Producto"}),s.jsx("th",{children:"Comprado"}),s.jsx("th",{children:"Devuelto"}),s.jsx("th",{children:"Disponible"}),s.jsx("th",{})]})}),s.jsx("tbody",{children:g.map(H=>s.jsxs("tr",{children:[s.jsx("td",{children:H.nombre}),s.jsx("td",{style:{textAlign:"right"},children:Number(H.purchased).toFixed(2)}),s.jsx("td",{style:{textAlign:"right"},children:Number(H.returned).toFixed(2)}),s.jsx("td",{style:{textAlign:"right"},children:Number(H.available).toFixed(2)}),s.jsx("td",{style:{textAlign:"right"},children:s.jsx("button",{className:"btn-opaque",onClick:()=>{I(H.producto_id),J(H.available||1)},children:"Usar"})})]},H.producto_id))})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{style:{fontSize:13},children:"Agregar producto a devolver"}),s.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[s.jsxs("select",{className:"input",value:T??"",onChange:H=>I(H.target.value||null),disabled:!!d,children:[s.jsx("option",{value:"",children:"-- seleccionar producto --"}),l.map(H=>s.jsx("option",{value:H.id,children:H.nombre},H.id))]}),s.jsx("input",{className:"input",type:"number",style:{width:90},value:M,onChange:H=>{const ie=Number(H.target.value),pe=g.find(D=>D.producto_id===T);if(pe){const D=Number(pe.available||0);return isNaN(ie)||ie<1?J(1):ie>D?J(D):J(ie)}J(ie)},min:1,max:T?g.find(H=>H.producto_id===T)?.available??void 0:void 0,disabled:(()=>{const H=g.find(ie=>ie.producto_id===T);return!!H&&Number(H.available||0)<=1})()}),s.jsx("button",{className:"btn-primary",onClick:he,children:"Agregar"})]}),s.jsx("div",{style:{marginTop:12},children:s.jsxs("table",{className:"admin-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Producto"}),s.jsx("th",{children:"Cantidad"}),s.jsx("th",{children:"Acciones"})]})}),s.jsx("tbody",{children:A.map((H,ie)=>s.jsxs("tr",{children:[s.jsx("td",{children:H.nombre}),s.jsx("td",{style:{textAlign:"right"},children:H.cantidad}),s.jsx("td",{children:s.jsx("button",{className:"btn-opaque",onClick:()=>oe(ie),children:"Quitar"})})]},`${H.producto_id}-${ie}`))})]})})]})]}),k&&s.jsx("div",{style:{color:"red",marginTop:12},children:k}),s.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:8,marginTop:16},children:[s.jsx("button",{className:"btn-opaque",onClick:o,disabled:C,children:"Cancelar"}),s.jsx("button",{className:"btn-primary",onClick:te,disabled:C,children:C?"Guardando...":"Registrar devolucin"})]})]})})}function G_({id:o,onClose:a}){const[r,l]=j.useState([]),[u,d]=j.useState(!1),[f,g]=j.useState(null);async function p(){d(!0),g(null);try{const{data:m,error:b}=await ce.from("devoluciones_proveedores_detalle").select("producto_id, cantidad").eq("devolucion_id",o);if(b)throw b;const x=Array.isArray(m)?m:[];if(x.length>0){const S=x.map(A=>A.producto_id),{data:_}=await ce.from("inventario").select("id, nombre, sku").in("id",S),w={};Array.isArray(_)&&_.forEach(A=>{w[String(A.id)]=A}),l(x.map(A=>({producto:w[String(A.producto_id)]?.nombre||String(A.producto_id),cantidad:A.cantidad})))}else{const{data:S}=await ce.from("registro_de_inventario").select("producto_id, cantidad").like("referencia",`%${o}%`),_=Array.isArray(S)?S:[],w=_.map(T=>T.producto_id),{data:A}=await ce.from("inventario").select("id, nombre, sku").in("id",w),R={};Array.isArray(A)&&A.forEach(T=>{R[String(T.id)]=T}),l(_.map(T=>({producto:R[String(T.producto_id)]?.nombre||String(T.producto_id),cantidad:T.cantidad})))}}catch(m){g(m?.message||String(m)),l([])}finally{d(!1)}}return j.useEffect(()=>{p()},[o]),s.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.4)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3},children:s.jsxs("div",{style:{width:720,maxWidth:"98%",background:"#fff",borderRadius:8,padding:16,maxHeight:"80vh",overflow:"auto"},children:[s.jsxs("h3",{style:{marginTop:0},children:["Detalle devolucin #",String(o)]}),u&&s.jsx("div",{children:"Cargando..."}),f&&s.jsx("div",{style:{color:"red"},children:f}),s.jsxs("table",{className:"admin-table",style:{marginTop:8},children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Producto"}),s.jsx("th",{children:"Cantidad"})]})}),s.jsx("tbody",{children:r.map((m,b)=>s.jsxs("tr",{children:[s.jsx("td",{children:m.producto}),s.jsx("td",{style:{textAlign:"right"},children:Number(m.cantidad).toFixed(2)})]},b))})]}),s.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:12},children:s.jsx("button",{className:"btn-opaque",onClick:a,children:"Cerrar"})})]})})}const P_={1:"Impuesto de venta",2:"Impuesto 18%",3:"Impuesto turstico"};function K_(){const[o,a]=j.useState([]),[r,l]=j.useState(!1),[u,d]=j.useState(null),[f,g]=j.useState(null),[p,m]=j.useState(null),b=async()=>{l(!0),m(null);try{const{data:_,error:w}=await ce.from("impuesto").select("id, impuesto_venta").order("id",{ascending:!0});if(w)throw w;a(Array.isArray(_)?_:[])}catch(_){console.warn("Error cargando impuestos:",_),m(String(_.message||_))}finally{l(!1)}};j.useEffect(()=>{b()},[]);const x=(_,w)=>{a(A=>A.map(R=>R.id===_?{...R,impuesto_venta:w}:R))},S=async _=>{const w=o.find(A=>A.id===_);if(w){d(_),m(null);try{const A={impuesto_venta:w.impuesto_venta??null},{error:R}=await ce.from("impuesto").update(A).eq("id",_);if(R)throw R;await b()}catch(A){console.warn("Error guardando impuesto:",A),m(String(A.message||A))}finally{d(null)}}};return s.jsxs("div",{children:[s.jsx("h2",{children:"Impuestos"}),s.jsx("p",{style:{color:"#475569"},children:"Edite los valores de impuestos. Solo se permite actualizar registros existentes."}),r?s.jsx("div",{children:"Cargando..."}):s.jsxs("div",{style:{display:"flex",gap:12,flexWrap:"wrap"},children:[o.map(_=>s.jsxs("div",{style:{width:300,borderRadius:8,padding:12,background:"white",boxShadow:"0 6px 18px rgba(2,6,23,0.06)"},children:[s.jsx("div",{style:{fontWeight:700,marginBottom:8},children:P_[_.id]??`Impuesto #${_.id}`}),s.jsxs("div",{style:{fontSize:13,color:"#64748b",marginBottom:8},children:["ID: ",_.id]}),s.jsxs("div",{style:{marginBottom:8},children:[s.jsx("label",{style:{fontSize:12,color:"#334155"},children:"Impuesto (porcentaje)"}),s.jsx("input",{type:"text",value:_.impuesto_venta??"",onChange:w=>x(_.id,w.target.value),style:{width:"100%",padding:8,borderRadius:6,border:"1px solid #e2e8f0"},disabled:f!==_.id}),s.jsx("div",{style:{fontSize:12,color:"#94a3b8",marginTop:6},children:f===_.id?"Ahora puede editar. ":'Pulse "Actualizar" para habilitar edicin'})]}),s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:8},children:[s.jsx("div",{style:{color:"#94a3b8",fontSize:12},children:u===_.id?"Guardando...":""}),s.jsx("div",{style:{display:"flex",gap:8},children:f===_.id?s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>{g(null),b()},className:"btn-opaque",style:{background:"transparent"},children:"Cancelar"}),s.jsx("button",{onClick:()=>S(_.id),className:"btn-opaque",disabled:u===_.id,style:{opacity:u===_.id?.6:1},children:"Guardar"})]}):s.jsx("button",{onClick:()=>g(_.id),className:"btn-opaque",children:"Actualizar"})})]})]},_.id)),o.length===0&&s.jsx("div",{style:{color:"#64748b"},children:"No hay registros en la tabla `impuesto`."})]}),p&&s.jsxs("div",{style:{marginTop:12,color:"red"},children:["Error: ",p]})]})}const Y_={dashboard:n_,datos:r_,usuarios_internal:l_,usuarios_web:s_,cai:u_,facturas:d_,historial_facturas:h_,inventario_productos:v_,precios_productos:x_,precios_historico:j_,stock:S_,inventario_salidas:w_,inventario_categorias:E_,proveedores:L_,caja_sesiones:T_,caja_movimientos:C_,rep_ventas:A_,rep_devoluciones:O_,rep_ingresos_egresos:R_,rep_compras:N_,compras_main:I_,devoluciones_proveedores:V_,rep_export:U_,cuentas_contables:k_,libro_diario:D_,auditoria:z_,impuestos:K_};function J_({onLogout:o}){const[a,r]=j.useState("dashboard"),[l,u]=j.useState(null),[d,f]=j.useState({}),g=l||a,p=Y_[g],b=(S=>{for(const _ of tp){if(_.id===S)return _.label;if(_.children){const w=_.children.find(A=>A.id===S);if(w)return w.label}}return"Panel de Administracin"})(g),x=S=>{if(S.id==="salir")return o();S.children&&S.children.length>0?(f(_=>({..._,[S.id]:!_[S.id]})),(S.id!==a||!l)&&(r(S.id),u(S.children[0].id))):(r(S.id),u(null))};return s.jsxs("div",{style:{display:"flex",minHeight:"100vh",background:"#f8fafc"},children:[s.jsxs("aside",{style:{width:260,background:"#0f1724",color:"white",padding:18,boxShadow:"2px 0 6px rgba(2,6,23,0.08)"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:18},children:[s.jsx("strong",{children:"Panel Admin"}),s.jsx("button",{onClick:o,className:"btn-opaque",style:{background:"#ef4444",padding:"6px 8px"},children:"Salir"})]}),s.jsx("nav",{children:tp.map(S=>s.jsxs("div",{style:{marginBottom:6},children:[s.jsxs("div",{onClick:()=>x(S),style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"10px 8px",borderRadius:6,cursor:"pointer",background:a===S.id&&!l?"rgba(255,255,255,0.06)":"transparent"},children:[s.jsx("span",{children:S.label}),Array.isArray(S.children)&&S.children.length>0?s.jsx("span",{style:{marginLeft:8},children:d[S.id]?"":""}):null]}),Array.isArray(S.children)&&S.children.length>0&&d[S.id]&&s.jsx("div",{style:{marginLeft:12,marginTop:6},children:S.children.map(_=>s.jsx("div",{onClick:()=>{r(S.id),u(_.id)},style:{padding:"6px 8px",borderRadius:6,cursor:"pointer",marginBottom:4,fontSize:13,color:l===_.id?"#e2e8f0":"#cbd5e1",background:l===_.id?"rgba(255,255,255,0.04)":"transparent"},children:_.label},_.id))})]},S.id))})]}),s.jsx("main",{style:{flex:1,padding:24},children:p?s.jsx(p,{}):s.jsx(t_,{title:b,children:a===g?"Seleccione una opcin del submen para ver la seccin correspondiente.":"Contenido no implementado o en construccin."})})]})}function Q_(){const[o,a]=j.useState(null);j.useEffect(()=>{try{const u=localStorage.getItem("user");u&&a(JSON.parse(u))}catch{a(null)}},[]);function r(){try{const u=localStorage.getItem("user");u&&a(JSON.parse(u))}catch{a(null)}}function l(){localStorage.removeItem("user"),a(null)}return s.jsxs("div",{children:[!o&&s.jsx(P0,{onLogin:r}),o&&o.role==="cajero"&&s.jsx(W0,{onLogout:l}),o&&o.role==="admin"&&s.jsx(J_,{onLogout:l}),o&&o.role!=="cajero"&&o.role!=="admin"&&s.jsxs("div",{style:{padding:24,maxWidth:900,margin:"32px auto",textAlign:"center"},children:[s.jsx("h2",{style:{marginTop:0},children:"Acceso restringido"}),s.jsxs("p",{style:{color:"#475569"},children:['Su cuenta tiene rol "',o.role||"sin rol",'". Solo usuarios con rol ',s.jsx("strong",{children:"cajero"})," pueden acceder al Punto de Ventas."]}),s.jsx("div",{style:{marginTop:18},children:s.jsx("button",{onClick:l,className:"btn-opaque",children:"Cerrar sesin"})})]})]})}class X_ extends rp.Component{constructor(a){super(a),this.state={error:null,info:null}}static getDerivedStateFromError(a){return{error:a,info:null}}componentDidCatch(a,r){console.error("ErrorBoundary caught:",a,r),this.setState({error:a,info:r})}render(){return this.state.error?s.jsxs("div",{style:{padding:18},children:[s.jsx("h2",{style:{color:"#b91c1c"},children:"Error en la aplicacin"}),s.jsxs("div",{style:{background:"#fff",padding:12,borderRadius:6,border:"1px solid #fee2e2"},children:[s.jsxs("pre",{style:{whiteSpace:"pre-wrap",fontSize:12},children:[String(this.state.error),this.state.info?.componentStack]}),s.jsx("div",{style:{marginTop:12},children:s.jsx("button",{onClick:()=>window.location.reload(),className:"btn-primary",children:"Recargar"})})]})]}):this.props.children}}jv.createRoot(document.getElementById("root")).render(s.jsx(X_,{children:s.jsx(Q_,{})}));
